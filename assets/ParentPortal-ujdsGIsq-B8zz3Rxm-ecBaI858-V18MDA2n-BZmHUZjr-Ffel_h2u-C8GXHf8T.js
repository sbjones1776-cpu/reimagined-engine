import{P as Ke,a1 as $s,E as P,a2 as qs,b as he,x as e,w as v,Q as R,q as Ks,p as $t,ay as za,h as qt,N as O,O as S,X as ct,Z as jt,_ as xt,y as Ve,z as ee,r as te,A as F,M as I,af as Va,a8 as Gs,g as qe,m as je,n as be,C as ve,e as De,l as B,f as Ue,az as Bs,s as ja,I as Y,K as J,aA as ra,W as Ne,aB as na,ai as we,ag as G,ah as bt,aC as zs,aD as Kt,B as Vs,Y as We,aE as Hs,a7 as ba,D as vt,H as Qs,aF as Us,aG as Ws,aj as Ha,as as Ys,aq as ot,ao as Et,am as Qa,ar as Ht,aH as ae,aI as Ua,aJ as ia,aK as Js,R as la,S as Ee}from"./index-_6DBZxFT.js";import{J as ne}from"./useMutation-Dw-sPjxD-CEUn9Yuu-xvhDPSZb-Dr0QtMK_-BVesU6qw-CG5MCbzm-BvDHL4Y4.js";import{G as ca,W as oa,J as Q,L as U}from"./tabs-BCUfDdd3-DRpA79_--UQJ3H5nI-BCygjE_3-CERtGQAZ-BoCXO3SG-CiW37Qbf.js";import Wa from"./AvatarDisplay-BzkYfhqx-DhuaIq-T-B1MXxMhX-Dfi86nzO-BHKSaNp_-DZaDo8HZ-Bd77omDN.js";import{m as Oe,n as Ye,f as Ya,x as mt}from"./textarea-CqrSSpqj-CdkJNOEe-BjFPPF_a-T6z-VvbV-BZi3D42F-BniOzOaT-B4WaX2EB.js";import{n as Nt}from"./trending-up-DOxCo9I6-CjyZKRpy-BwiJPOic-BbyIY-I5-2slMDHp0-Dt8Hz_gu-DQ4ciPVI.js";import{r as da}from"./circle-alert-D0KxAb-N-CBSI-qzf-C23EQ00--C_pq6P6f-CFg9LYze-Dqr9YOPU-C0SyBRpa.js";import{n as Ja}from"./trending-down-CtEqn-BB-zOpygq96-CNt4ZELp-DYs6Ix-S-DshAzykl-BsXPPDcM-DBAPLTxO.js";import{u as Se,c as Dt,D as He,i as Me,a as pe,b as Pe,l as Qe,G as Ge,s as Za,z as wt,Q as Xa,e as es,d as ts,Z as L,P as se,K as X,A as ma,f as H,y as ua,g as as,E as ss,h as ha,x as gt,Y as ye,R as xe,j as Zs,k as pa,X as Xs,J as ie,M as _t,m as le,n as xa,o as ut,$ as er,p as tr,L as rs,q as ar,T as ns,r as sr,U as is,t as ga,v as yt,H as rr,_ as nr,w as ht,B as va,C as ir,F as Na}from"./LineChart-Boznw0oC-BjVvaeYB-BHo1DAUe-BCwC00ff-CGgC7vS1-CgwfReGn-DNMXd5HN.js";import{N as E}from"./label-ClTmKTiT-BGzEp_4m-ePFqNJla-OJoxH8iZ-ezXG_L9G-BEUxX-nu-BaLol5Ef.js";import{S as oe,h as de,C as me,m as ue,g as M}from"./select-CEEjSQMd-D2Q8_Gex-v90sRaal-CQjYJdsc-XiyT1ylp-BV4oUjra-CdhrMS0w.js";import{B as ls}from"./progress-DswiN-jt-CRkTvpyk-D1KYlrjl-CsboKJzw-C3ozQzG_-BS-NPxbZ-Do7G8zpZ.js";import{y as re}from"./target-1p2ICMDN-CvDzxGjB-qkOcir94-HosS9mN8-D7ZLtM3Q-fUNOd4Tb-uVCUCnov.js";import{s as Mt}from"./plus-CzE6Y-vE-CTS6AMhf-DQnCZw7L-g8gOaACh-BCHOnD0---4-_1MLM-D60HZjyU.js";import{t as Tt}from"./trash-2-jwsEREBw-DdJfLY0z-Di6zSu_S-QRFYV4zs-CLTC0C47-DdwKpe-B-CjUiN4J_.js";import{c as cs}from"./index-K24GeIQO-pPWQlksM-BpwW-z19-BGlWs2JA-CQ-9O2Qt-CIrR7EI3-DlUHcS2G.js";import{o as wa}from"./save-WpcaPzdX-CJl6cnmk-B2n1mQt_-DxLoG_6R-BSHHPml2-D_yBAKS5-DIMqUFDl.js";import{o as pt}from"./lock-DVJmOJtR-CPCpectf-CAbDyxwB-CjKaN8Uy-DSiTgkC1-DhFXkp_T-wjER_uU1.js";import{t as Qt}from"./triangle-alert-BF04o9wv-5R0uES8i-B0nBc2eR-DyIfcPD2-DHjNSAAD-mWQj0O8b-IitXZYGd.js";import{e as Ut}from"./book-open-CsZLkRie-CnloTbZU-ChOf-sMy-O-KDOf0X-BjwcqdyU-HefgA4ey-dkeLpIxb.js";import{a as Te}from"./info-BwmiXNr9-k9-UA3eH-BktW3SKg-XAlziMFr-Crsier0o-Bff3sT4n-DrOZgfPn.js";import{y as lr}from"./download-k8BXtbsE-hJBy54oi-W-SMHhYC-Bl-czKV--CsHTKCTt-BP9X_a4h-DBl5YPJh.js";import{e as cr}from"./startOfMonth-D3h4jTlt-D4WVPLzh-Dy-xtlLU-xSybLC5--BPyiYMnQ-k2gq4TdQ-DUtTXYiH.js";import{b as or}from"./PremiumFeatureLock-DUuDI_YH-C25OdOdH-ABaij4QQ-D0Avu4LI-BPEWt9vX-DCprVw_7-DX2Rz0v5.js";import"./index-DytiPzxp-BK84tApl-D69EGyDe-CcEtxDqH-DwPTvosq-BzPWxo8M-DoJFGzd-.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],mr=ct("Bell",dr);/**
* @license lucide-react v0.475.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ur=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],hr=ct("ClipboardList",ur);/**
* @license lucide-react v0.475.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const pr=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],xr=ct("RefreshCw",pr);/**
* @license lucide-react v0.475.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const gr=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],yr=ct("ThumbsUp",gr);/**
* @license lucide-react v0.475.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const fr=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],Wt=ct("UserCog",fr);function jr(t,s){const a=Us(t);return isNaN(s)?Ws(t,NaN):(s&&a.setDate(a.getDate()+s),a)}function Gt(t,s){return jr(t,-s)}var br=["points","className","baseLinePoints","connectNulls"];function Be(){return Be=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Be.apply(this,arguments)}function vr(t,s){if(t==null)return{};var a=Nr(t,s),r,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(i=0;i<n.length;i++)r=n[i],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Nr(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function _a(t){return Ar(t)||kr(t)||_r(t)||wr()}function wr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _r(t,s){if(t){if(typeof t=="string")return Yt(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Yt(t,s)}}function kr(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ar(t){if(Array.isArray(t))return Yt(t)}function Yt(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}var ka=function(t){return t&&t.x===+t.x&&t.y===+t.y},Cr=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=[[]];return t.forEach(function(a){ka(a)?s[s.length-1].push(a):s[s.length-1].length>0&&s.push([])}),ka(t[0])&&s[s.length-1].push(t[0]),s[s.length-1].length<=0&&(s=s.slice(0,-1)),s},rt=function(t,s){var a=Cr(t);s&&(a=[a.reduce(function(i,n){return[].concat(_a(i),_a(n))},[])]);var r=a.map(function(i){return i.reduce(function(n,l,o){return"".concat(n).concat(o===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return a.length===1?"".concat(r,"Z"):r},Or=function(t,s,a){var r=rt(t,a);return"".concat(r.slice(-1)==="Z"?r.slice(0,-1):r,"L").concat(rt(s.reverse(),a).slice(1))},os=function(t){var s=t.points,a=t.className,r=t.baseLinePoints,i=t.connectNulls,n=vr(t,br);if(!s||!s.length)return null;var l=ae("recharts-polygon",a);if(r&&r.length){var o=n.stroke&&n.stroke!=="none",u=Or(s,r,i);return v.createElement("g",{className:l},v.createElement("path",Be({},L(n,!0),{fill:u.slice(-1)==="Z"?n.fill:"none",stroke:"none",d:u})),o?v.createElement("path",Be({},L(n,!0),{fill:"none",d:rt(s,i)})):null,o?v.createElement("path",Be({},L(n,!0),{fill:"none",d:rt(r,i)})):null)}var m=rt(s,i);return v.createElement("path",Be({},L(n,!0),{fill:m.slice(-1)==="Z"?n.fill:"none",className:l,d:m}))},Sr=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function it(t){"@babel/helpers - typeof";return it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},it(t)}function Pr(t,s){if(t==null)return{};var a=Er(t,s),r,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(i=0;i<n.length;i++)r=n[i],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Er(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function _e(){return _e=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},_e.apply(this,arguments)}function Aa(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function lt(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Aa(Object(a),!0).forEach(function(r){Dr(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Aa(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Dr(t,s,a){return s=Mr(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function Mr(t){var s=Tr(t,"string");return it(s)=="symbol"?s:s+""}function Tr(t,s){if(it(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s);if(it(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Rr=function(t,s,a,r){var i="";return r.forEach(function(n,l){var o=se(s,a,t,n);l?i+="L ".concat(o.x,",").concat(o.y):i+="M ".concat(o.x,",").concat(o.y)}),i+="Z",i},Fr=function(t){var s=t.cx,a=t.cy,r=t.innerRadius,i=t.outerRadius,n=t.polarAngles,l=t.radialLines;if(!n||!n.length||!l)return null;var o=lt({stroke:"#ccc"},L(t,!1));return v.createElement("g",{className:"recharts-polar-grid-angle"},n.map(function(u){var m=se(s,a,r,u),f=se(s,a,i,u);return v.createElement("line",_e({},o,{key:"line-".concat(u),x1:m.x,y1:m.y,x2:f.x,y2:f.y}))}))},Ir=function(t){var s=t.cx,a=t.cy,r=t.radius,i=t.index,n=lt(lt({stroke:"#ccc"},L(t,!1)),{},{fill:"none"});return v.createElement("circle",_e({},n,{className:ae("recharts-polar-grid-concentric-circle",t.className),key:"circle-".concat(i),cx:s,cy:a,r}))},Lr=function(t){var s=t.radius,a=t.index,r=lt(lt({stroke:"#ccc"},L(t,!1)),{},{fill:"none"});return v.createElement("path",_e({},r,{className:ae("recharts-polar-grid-concentric-polygon",t.className),key:"path-".concat(a),d:Rr(s,t.cx,t.cy,t.polarAngles)}))},$r=function(t){var s=t.polarRadius,a=t.gridType;return!s||!s.length?null:v.createElement("g",{className:"recharts-polar-grid-concentric"},s.map(function(r,i){var n=i;return a==="circle"?v.createElement(Ir,_e({key:n},t,{radius:r,index:i})):v.createElement(Lr,_e({key:n},t,{radius:r,index:i}))}))},ds=function(t){var s=t.cx,a=s===void 0?0:s,r=t.cy,i=r===void 0?0:r,n=t.innerRadius,l=n===void 0?0:n,o=t.outerRadius,u=o===void 0?0:o,m=t.gridType,f=m===void 0?"polygon":m,d=t.radialLines,h=d===void 0?!0:d,y=Pr(t,Sr);return u<=0?null:v.createElement("g",{className:"recharts-polar-grid"},v.createElement(Fr,_e({cx:a,cy:i,innerRadius:l,outerRadius:u,gridType:f,radialLines:h},y)),v.createElement($r,_e({cx:a,cy:i,innerRadius:l,outerRadius:u,gridType:f,radialLines:h},y)))};ds.displayName="PolarGrid";var Bt,Ca;function qr(){if(Ca)return Bt;Ca=1;var t=rs(),s=ar(),a=ns();function r(i,n){return i&&i.length?t(i,a(n,2),s):void 0}return Bt=r,Bt}var Kr=qr();const Gr=ia(Kr);var zt,Oa;function Br(){if(Oa)return zt;Oa=1;var t=rs(),s=ns(),a=sr();function r(i,n){return i&&i.length?t(i,s(n,2),a):void 0}return zt=r,zt}var zr=Br();const Vr=ia(zr);var Hr=["cx","cy","angle","ticks","axisLine"],Qr=["ticks","tick","angle","tickFormatter","stroke"];function Je(t){"@babel/helpers - typeof";return Je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Je(t)}function nt(){return nt=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},nt.apply(this,arguments)}function Sa(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Fe(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Sa(Object(a),!0).forEach(function(r){Rt(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Sa(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Pa(t,s){if(t==null)return{};var a=Ur(t,s),r,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(i=0;i<n.length;i++)r=n[i],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Ur(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Wr(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Ea(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,us(r.key),r)}}function Yr(t,s,a){return s&&Ea(t.prototype,s),a&&Ea(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jr(t,s,a){return s=kt(s),Zr(t,ms()?Reflect.construct(s,a||[],kt(t).constructor):s.apply(t,a))}function Zr(t,s){if(s&&(Je(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xr(t)}function Xr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ms(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ms=function(){return!!t})()}function kt(t){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},kt(t)}function en(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Jt(t,s)}function Jt(t,s){return Jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,r){return a.__proto__=r,a},Jt(t,s)}function Rt(t,s,a){return s=us(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function us(t){var s=tn(t,"string");return Je(s)=="symbol"?s:s+""}function tn(t,s){if(Je(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s);if(Je(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var at=(function(t){function s(){return Wr(this,s),Jr(this,s,arguments)}return en(s,t),Yr(s,[{key:"getTickValueCoord",value:function(a){var r=a.coordinate,i=this.props,n=i.angle,l=i.cx,o=i.cy;return se(l,o,r,n)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,r;switch(a){case"left":r="end";break;case"right":r="start";break;default:r="middle";break}return r}},{key:"getViewBox",value:function(){var a=this.props,r=a.cx,i=a.cy,n=a.angle,l=a.ticks,o=Gr(l,function(m){return m.coordinate||0}),u=Vr(l,function(m){return m.coordinate||0});return{cx:r,cy:i,startAngle:n,endAngle:n,innerRadius:u.coordinate||0,outerRadius:o.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,r=a.cx,i=a.cy,n=a.angle,l=a.ticks,o=a.axisLine,u=Pa(a,Hr),m=l.reduce(function(y,j){return[Math.min(y[0],j.coordinate),Math.max(y[1],j.coordinate)]},[1/0,-1/0]),f=se(r,i,m[0],n),d=se(r,i,m[1],n),h=Fe(Fe(Fe({},L(u,!1)),{},{fill:"none"},L(o,!1)),{},{x1:f.x,y1:f.y,x2:d.x,y2:d.y});return v.createElement("line",nt({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var a=this,r=this.props,i=r.ticks,n=r.tick,l=r.angle,o=r.tickFormatter,u=r.stroke,m=Pa(r,Qr),f=this.getTickTextAnchor(),d=L(m,!1),h=L(n,!1),y=i.map(function(j,c){var x=a.getTickValueCoord(j),g=Fe(Fe(Fe(Fe({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(x.x,", ").concat(x.y,")")},d),{},{stroke:"none",fill:u},h),{},{index:c},x),{},{payload:j});return v.createElement(H,nt({className:ae("recharts-polar-radius-axis-tick",as(n)),key:"tick-".concat(j.coordinate)},ua(a.props,j,c)),s.renderTickItem(n,g,o?o(j.value,c):j.value))});return v.createElement(H,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var a=this.props,r=a.ticks,i=a.axisLine,n=a.tick;return!r||!r.length?null:v.createElement(H,{className:ae("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),n&&this.renderTicks(),ss.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,r,i){var n;return v.isValidElement(a)?n=v.cloneElement(a,r):X(a)?n=a(r):n=v.createElement(ma,nt({},r,{className:"recharts-polar-radius-axis-tick-value"}),i),n}}])})(P.PureComponent);Rt(at,"displayName","PolarRadiusAxis");Rt(at,"axisType","radiusAxis");Rt(at,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Ze(t){"@babel/helpers - typeof";return Ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ze(t)}function Le(){return Le=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Le.apply(this,arguments)}function Da(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Ie(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Da(Object(a),!0).forEach(function(r){Ft(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Da(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function an(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Ma(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ps(r.key),r)}}function sn(t,s,a){return s&&Ma(t.prototype,s),a&&Ma(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function rn(t,s,a){return s=At(s),nn(t,hs()?Reflect.construct(s,a||[],At(t).constructor):s.apply(t,a))}function nn(t,s){if(s&&(Ze(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ln(t)}function ln(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hs=function(){return!!t})()}function At(t){return At=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},At(t)}function cn(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Zt(t,s)}function Zt(t,s){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,r){return a.__proto__=r,a},Zt(t,s)}function Ft(t,s,a){return s=ps(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function ps(t){var s=on(t,"string");return Ze(s)=="symbol"?s:s+""}function on(t,s){if(Ze(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s);if(Ze(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dn=Math.PI/180,Ta=1e-5,st=(function(t){function s(){return an(this,s),rn(this,s,arguments)}return cn(s,t),sn(s,[{key:"getTickLineCoord",value:function(a){var r=this.props,i=r.cx,n=r.cy,l=r.radius,o=r.orientation,u=r.tickSize,m=u||8,f=se(i,n,l,a.coordinate),d=se(i,n,l+(o==="inner"?-1:1)*m,a.coordinate);return{x1:f.x,y1:f.y,x2:d.x,y2:d.y}}},{key:"getTickTextAnchor",value:function(a){var r=this.props.orientation,i=Math.cos(-a.coordinate*dn),n;return i>Ta?n=r==="outer"?"start":"end":i<-Ta?n=r==="outer"?"end":"start":n="middle",n}},{key:"renderAxisLine",value:function(){var a=this.props,r=a.cx,i=a.cy,n=a.radius,l=a.axisLine,o=a.axisLineType,u=Ie(Ie({},L(this.props,!1)),{},{fill:"none"},L(l,!1));if(o==="circle")return v.createElement(ha,Le({className:"recharts-polar-angle-axis-line"},u,{cx:r,cy:i,r:n}));var m=this.props.ticks,f=m.map(function(d){return se(r,i,n,d.coordinate)});return v.createElement(os,Le({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var a=this,r=this.props,i=r.ticks,n=r.tick,l=r.tickLine,o=r.tickFormatter,u=r.stroke,m=L(this.props,!1),f=L(n,!1),d=Ie(Ie({},m),{},{fill:"none"},L(l,!1)),h=i.map(function(y,j){var c=a.getTickLineCoord(y),x=a.getTickTextAnchor(y),g=Ie(Ie(Ie({textAnchor:x},m),{},{stroke:"none",fill:u},f),{},{index:j,payload:y,x:c.x2,y:c.y2});return v.createElement(H,Le({className:ae("recharts-polar-angle-axis-tick",as(n)),key:"tick-".concat(y.coordinate)},ua(a.props,y,j)),l&&v.createElement("line",Le({className:"recharts-polar-angle-axis-tick-line"},d,c)),n&&s.renderTickItem(n,g,o?o(y.value,j):y.value))});return v.createElement(H,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var a=this.props,r=a.ticks,i=a.radius,n=a.axisLine;return i<=0||!r||!r.length?null:v.createElement(H,{className:ae("recharts-polar-angle-axis",this.props.className)},n&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,r,i){var n;return v.isValidElement(a)?n=v.cloneElement(a,r):X(a)?n=a(r):n=v.createElement(ma,Le({},r,{className:"recharts-polar-angle-axis-tick-value"}),i),n}}])})(P.PureComponent);Ft(st,"displayName","PolarAngleAxis");Ft(st,"axisType","angleAxis");Ft(st,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var ft;function Xe(t){"@babel/helpers - typeof";return Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Xe(t)}function ze(){return ze=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ze.apply(this,arguments)}function Ra(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function q(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Ra(Object(a),!0).forEach(function(r){ce(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ra(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function mn(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Fa(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gs(r.key),r)}}function un(t,s,a){return s&&Fa(t.prototype,s),a&&Fa(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function hn(t,s,a){return s=Ct(s),pn(t,xs()?Reflect.construct(s,a||[],Ct(t).constructor):s.apply(t,a))}function pn(t,s){if(s&&(Xe(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xn(t)}function xn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xs=function(){return!!t})()}function Ct(t){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Ct(t)}function gn(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Xt(t,s)}function Xt(t,s){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,r){return a.__proto__=r,a},Xt(t,s)}function ce(t,s,a){return s=gs(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function gs(t){var s=yn(t,"string");return Xe(s)=="symbol"?s:s+""}function yn(t,s){if(Xe(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s);if(Xe(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ae=(function(t){function s(a){var r;return mn(this,s),r=hn(this,s,[a]),ce(r,"pieRef",null),ce(r,"sectorRefs",[]),ce(r,"id",is("recharts-pie-")),ce(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),X(i)&&i()}),ce(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),X(i)&&i()}),r.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},r}return gn(s,t),un(s,[{key:"isActiveIndex",value:function(a){var r=this.props.activeIndex;return Array.isArray(r)?r.indexOf(a)!==-1:a===r}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var i=this.props,n=i.label,l=i.labelLine,o=i.dataKey,u=i.valueKey,m=L(this.props,!1),f=L(n,!1),d=L(l,!1),h=n&&n.offsetRadius||20,y=a.map(function(j,c){var x=(j.startAngle+j.endAngle)/2,g=se(j.cx,j.cy,j.outerRadius+h,x),w=q(q(q(q({},m),j),{},{stroke:"none"},f),{},{index:c,textAnchor:s.getTextAnchor(g.x,j.cx)},g),_=q(q(q(q({},m),j),{},{fill:"none",stroke:j.fill},d),{},{index:c,points:[se(j.cx,j.cy,j.outerRadius,x),g]}),A=o;return ye(o)&&ye(u)?A="value":ye(o)&&(A=u),v.createElement(H,{key:"label-".concat(j.startAngle,"-").concat(j.endAngle,"-").concat(j.midAngle,"-").concat(c)},l&&s.renderLabelLineItem(l,_,"line"),s.renderLabelItem(n,w,xe(j,A)))});return v.createElement(H,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(a){var r=this,i=this.props,n=i.activeShape,l=i.blendStroke,o=i.inactiveShape;return a.map(function(u,m){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&a.length!==1)return null;var f=r.isActiveIndex(m),d=o&&r.hasActiveIndex()?o:null,h=f?n:d,y=q(q({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return v.createElement(H,ze({ref:function(j){j&&!r.sectorRefs.includes(j)&&r.sectorRefs.push(j)},tabIndex:-1,className:"recharts-pie-sector"},ua(r.props,u,m),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(m)}),v.createElement(Zs,ze({option:h,isActive:f,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,r=this.props,i=r.sectors,n=r.isAnimationActive,l=r.animationBegin,o=r.animationDuration,u=r.animationEasing,m=r.animationId,f=this.state,d=f.prevSectors,h=f.prevIsAnimationActive;return v.createElement(pa,{begin:l,duration:o,isActive:n,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(m,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var j=y.t,c=[],x=i&&i[0],g=x.startAngle;return i.forEach(function(w,_){var A=d&&d[_],D=_>0?Xs(w,"paddingAngle",0):0;if(A){var b=ie(A.endAngle-A.startAngle,w.endAngle-w.startAngle),N=q(q({},w),{},{startAngle:g+D,endAngle:g+b(j)+D});c.push(N),g=N.endAngle}else{var p=w.endAngle,C=w.startAngle,T=ie(0,p-C),z=T(j),k=q(q({},w),{},{startAngle:g+D,endAngle:g+z+D});c.push(k),g=k.endAngle}}),v.createElement(H,null,a.renderSectorsStatically(c))})}},{key:"attachKeyboardHandlers",value:function(a){var r=this;a.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var n=++r.state.sectorToFocus%r.sectorRefs.length;r.sectorRefs[n].focus(),r.setState({sectorToFocus:n});break}case"ArrowRight":{var l=--r.state.sectorToFocus<0?r.sectorRefs.length-1:r.state.sectorToFocus%r.sectorRefs.length;r.sectorRefs[l].focus(),r.setState({sectorToFocus:l});break}case"Escape":{r.sectorRefs[r.state.sectorToFocus].blur(),r.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,r=a.sectors,i=a.isAnimationActive,n=this.state.prevSectors;return i&&r&&r.length&&(!n||!_t(n,r))?this.renderSectorsWithAnimation():this.renderSectorsStatically(r)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,r=this.props,i=r.hide,n=r.sectors,l=r.className,o=r.label,u=r.cx,m=r.cy,f=r.innerRadius,d=r.outerRadius,h=r.isAnimationActive,y=this.state.isAnimationFinished;if(i||!n||!n.length||!le(u)||!le(m)||!le(f)||!le(d))return null;var j=ae("recharts-pie",l);return v.createElement(H,{tabIndex:this.props.rootTabIndex,className:j,ref:function(c){a.pieRef=c}},this.renderSectors(),o&&this.renderLabels(n),ss.renderCallByParent(this.props,null,!1),(!h||y)&&xa.renderCallByParent(this.props,n,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,r){return r.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==r.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:r.curSectors,isAnimationFinished:!0}:a.sectors!==r.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,r){return a>r?"start":a<r?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,r,i){if(v.isValidElement(a))return v.cloneElement(a,r);if(X(a))return a(r);var n=ae("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return v.createElement(gt,ze({},r,{key:i,type:"linear",className:n}))}},{key:"renderLabelItem",value:function(a,r,i){if(v.isValidElement(a))return v.cloneElement(a,r);var n=i;if(X(a)&&(n=a(r),v.isValidElement(n)))return n;var l=ae("recharts-pie-label-text",typeof a!="boolean"&&!X(a)?a.className:"");return v.createElement(ma,ze({},r,{alignmentBaseline:"middle",className:l}),n)}}])})(P.PureComponent);ft=Ae;ce(Ae,"displayName","Pie");ce(Ae,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ga.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ce(Ae,"parseDeltaAngle",function(t,s){var a=yt(s-t),r=Math.min(Math.abs(s-t),360);return a*r});ce(Ae,"getRealPieData",function(t){var s=t.data,a=t.children,r=L(t,!1),i=rr(a,Xa);return s&&s.length?s.map(function(n,l){return q(q(q({payload:n},r),n),i&&i[l]&&i[l].props)}):i&&i.length?i.map(function(n){return q(q({},r),n.props)}):[]});ce(Ae,"parseCoordinateOfPie",function(t,s){var a=s.top,r=s.left,i=s.width,n=s.height,l=nr(i,n),o=r+ht(t.cx,i,i/2),u=a+ht(t.cy,n,n/2),m=ht(t.innerRadius,l,0),f=ht(t.outerRadius,l,l*.8),d=t.maxRadius||Math.sqrt(i*i+n*n)/2;return{cx:o,cy:u,innerRadius:m,outerRadius:f,maxRadius:d}});ce(Ae,"getComposedData",function(t){var s=t.item,a=t.offset,r=s.type.defaultProps!==void 0?q(q({},s.type.defaultProps),s.props):s.props,i=ft.getRealPieData(r);if(!i||!i.length)return null;var n=r.cornerRadius,l=r.startAngle,o=r.endAngle,u=r.paddingAngle,m=r.dataKey,f=r.nameKey,d=r.valueKey,h=r.tooltipType,y=Math.abs(r.minAngle),j=ft.parseCoordinateOfPie(r,a),c=ft.parseDeltaAngle(l,o),x=Math.abs(c),g=m;ye(m)&&ye(d)?(va(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),g="value"):ye(m)&&(va(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),g=d);var w=i.filter(function(p){return xe(p,g,0)!==0}).length,_=(x>=360?w:w-1)*u,A=x-w*y-_,D=i.reduce(function(p,C){var T=xe(C,g,0);return p+(le(T)?T:0)},0),b;if(D>0){var N;b=i.map(function(p,C){var T=xe(p,g,0),z=xe(p,f,C),k=(le(T)?T:0)/D,$;C?$=N.endAngle+yt(c)*u*(T!==0?1:0):$=l;var Z=$+yt(c)*((T!==0?y:0)+k*A),K=($+Z)/2,V=(j.innerRadius+j.outerRadius)/2,Is=[{name:z,value:T,payload:p,dataKey:g,type:h}],Ls=se(j.cx,j.cy,V,K);return N=q(q(q({percent:k,cornerRadius:n,name:z,tooltipPayload:Is,midAngle:K,middleRadius:V,tooltipPosition:Ls},p),j),{},{value:xe(p,g),startAngle:$,endAngle:Z,payload:p,paddingAngle:yt(c)*u}),N})}return q(q({},j),{},{sectors:b,data:i})});var Vt,Ia;function fn(){if(Ia)return Vt;Ia=1;function t(s){return s&&s.length?s[0]:void 0}return Vt=t,Vt}var La,$a;function jn(){return $a||($a=1,La=fn()),La}var bn=jn();const vn=ia(bn);var Nn=["key"];function et(t){"@babel/helpers - typeof";return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},et(t)}function wn(t,s){if(t==null)return{};var a=_n(t,s),r,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(i=0;i<n.length;i++)r=n[i],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function _n(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Ot(){return Ot=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ot.apply(this,arguments)}function qa(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function W(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?qa(Object(a),!0).forEach(function(r){fe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):qa(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function kn(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Ka(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fs(r.key),r)}}function An(t,s,a){return s&&Ka(t.prototype,s),a&&Ka(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cn(t,s,a){return s=St(s),On(t,ys()?Reflect.construct(s,a||[],St(t).constructor):s.apply(t,a))}function On(t,s){if(s&&(et(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sn(t)}function Sn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ys(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ys=function(){return!!t})()}function St(t){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},St(t)}function Pn(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&ea(t,s)}function ea(t,s){return ea=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,r){return a.__proto__=r,a},ea(t,s)}function fe(t,s,a){return s=fs(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function fs(t){var s=En(t,"string");return et(s)=="symbol"?s:s+""}function En(t,s){if(et(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s);if(et(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dt=(function(t){function s(){var a;kn(this,s);for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return a=Cn(this,s,[].concat(i)),fe(a,"state",{isAnimationFinished:!1}),fe(a,"handleAnimationEnd",function(){var l=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),X(l)&&l()}),fe(a,"handleAnimationStart",function(){var l=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),X(l)&&l()}),fe(a,"handleMouseEnter",function(l){var o=a.props.onMouseEnter;o&&o(a.props,l)}),fe(a,"handleMouseLeave",function(l){var o=a.props.onMouseLeave;o&&o(a.props,l)}),a}return Pn(s,t),An(s,[{key:"renderDots",value:function(a){var r=this.props,i=r.dot,n=r.dataKey,l=L(this.props,!1),o=L(i,!0),u=a.map(function(m,f){var d=W(W(W({key:"dot-".concat(f),r:3},l),o),{},{dataKey:n,cx:m.x,cy:m.y,index:f,payload:m});return s.renderDotItem(i,d)});return v.createElement(H,{className:"recharts-radar-dots"},u)}},{key:"renderPolygonStatically",value:function(a){var r=this.props,i=r.shape,n=r.dot,l=r.isRange,o=r.baseLinePoints,u=r.connectNulls,m;return v.isValidElement(i)?m=v.cloneElement(i,W(W({},this.props),{},{points:a})):X(i)?m=i(W(W({},this.props),{},{points:a})):m=v.createElement(os,Ot({},L(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:a,baseLinePoints:l?o:null,connectNulls:u})),v.createElement(H,{className:"recharts-radar-polygon"},m,n?this.renderDots(a):null)}},{key:"renderPolygonWithAnimation",value:function(){var a=this,r=this.props,i=r.points,n=r.isAnimationActive,l=r.animationBegin,o=r.animationDuration,u=r.animationEasing,m=r.animationId,f=this.state.prevPoints;return v.createElement(pa,{begin:l,duration:o,isActive:n,easing:u,from:{t:0},to:{t:1},key:"radar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(d){var h=d.t,y=f&&f.length/i.length,j=i.map(function(c,x){var g=f&&f[Math.floor(x*y)];if(g){var w=ie(g.x,c.x),_=ie(g.y,c.y);return W(W({},c),{},{x:w(h),y:_(h)})}var A=ie(c.cx,c.x),D=ie(c.cy,c.y);return W(W({},c),{},{x:A(h),y:D(h)})});return a.renderPolygonStatically(j)})}},{key:"renderPolygon",value:function(){var a=this.props,r=a.points,i=a.isAnimationActive,n=a.isRange,l=this.state.prevPoints;return i&&r&&r.length&&!n&&(!l||!_t(l,r))?this.renderPolygonWithAnimation():this.renderPolygonStatically(r)}},{key:"render",value:function(){var a=this.props,r=a.hide,i=a.className,n=a.points,l=a.isAnimationActive;if(r||!n||!n.length)return null;var o=this.state.isAnimationFinished,u=ae("recharts-radar",i);return v.createElement(H,{className:u},this.renderPolygon(),(!l||o)&&xa.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(a,r){return a.animationId!==r.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:r.curPoints}:a.points!==r.curPoints?{curPoints:a.points}:null}},{key:"renderDotItem",value:function(a,r){var i;if(v.isValidElement(a))i=v.cloneElement(a,r);else if(X(a))i=a(r);else{var n=r.key,l=wn(r,Nn);i=v.createElement(ha,Ot({},l,{key:n,className:ae("recharts-radar-dot",typeof a!="boolean"?a.className:"")}))}return i}}])})(P.PureComponent);fe(dt,"displayName","Radar");fe(dt,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!ga.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});fe(dt,"getComposedData",function(t){var s=t.radiusAxis,a=t.angleAxis,r=t.displayedData,i=t.dataKey,n=t.bandSize,l=a.cx,o=a.cy,u=!1,m=[],f=a.type!=="number"?n??0:0;r.forEach(function(h,y){var j=xe(h,a.dataKey,y),c=xe(h,i),x=a.scale(j)+f,g=Array.isArray(c)?ir(c):c,w=ye(g)?void 0:s.scale(g);Array.isArray(c)&&c.length>=2&&(u=!0),m.push(W(W({},se(l,o,w,x)),{},{name:j,value:c,cx:l,cy:o,radius:w,angle:x,payload:h}))});var d=[];return u&&m.forEach(function(h){if(Array.isArray(h.value)){var y=vn(h.value),j=ye(y)?void 0:s.scale(y);d.push(W(W({},h),{},{radius:j},se(l,o,j,h.angle)))}else d.push(h)}),{points:m,isRange:u,baseLinePoints:d}});var Dn=["layout","type","stroke","connectNulls","isRange","ref"],Mn=["key"],js;function tt(t){"@babel/helpers - typeof";return tt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},tt(t)}function bs(t,s){if(t==null)return{};var a=Tn(t,s),r,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(i=0;i<n.length;i++)r=n[i],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Tn(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function $e(){return $e=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},$e.apply(this,arguments)}function Ga(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Ce(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Ga(Object(a),!0).forEach(function(r){ge(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ga(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Rn(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Ba(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ns(r.key),r)}}function Fn(t,s,a){return s&&Ba(t.prototype,s),a&&Ba(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function In(t,s,a){return s=Pt(s),Ln(t,vs()?Reflect.construct(s,a||[],Pt(t).constructor):s.apply(t,a))}function Ln(t,s){if(s&&(tt(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $n(t)}function $n(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vs=function(){return!!t})()}function Pt(t){return Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Pt(t)}function qn(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&ta(t,s)}function ta(t,s){return ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,r){return a.__proto__=r,a},ta(t,s)}function ge(t,s,a){return s=Ns(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function Ns(t){var s=Kn(t,"string");return tt(s)=="symbol"?s:s+""}function Kn(t,s){if(tt(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s);if(tt(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ke=(function(t){function s(){var a;Rn(this,s);for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return a=In(this,s,[].concat(i)),ge(a,"state",{isAnimationFinished:!0}),ge(a,"id",is("recharts-area-")),ge(a,"handleAnimationEnd",function(){var l=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),X(l)&&l()}),ge(a,"handleAnimationStart",function(){var l=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),X(l)&&l()}),a}return qn(s,t),Fn(s,[{key:"renderDots",value:function(a,r,i){var n=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(n&&!l)return null;var o=this.props,u=o.dot,m=o.points,f=o.dataKey,d=L(this.props,!1),h=L(u,!0),y=m.map(function(c,x){var g=Ce(Ce(Ce({key:"dot-".concat(x),r:3},d),h),{},{index:x,cx:c.x,cy:c.y,dataKey:f,value:c.value,payload:c.payload,points:m});return s.renderDotItem(u,g)}),j={clipPath:a?"url(#clipPath-".concat(r?"":"dots-").concat(i,")"):null};return v.createElement(H,$e({className:"recharts-area-dots"},j),y)}},{key:"renderHorizontalRect",value:function(a){var r=this.props,i=r.baseLine,n=r.points,l=r.strokeWidth,o=n[0].x,u=n[n.length-1].x,m=a*Math.abs(o-u),f=ut(n.map(function(d){return d.y||0}));return le(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(ut(i.map(function(d){return d.y||0})),f)),le(f)?v.createElement("rect",{x:o<u?o:o-m,y:0,width:m,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var r=this.props,i=r.baseLine,n=r.points,l=r.strokeWidth,o=n[0].y,u=n[n.length-1].y,m=a*Math.abs(o-u),f=ut(n.map(function(d){return d.x||0}));return le(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(ut(i.map(function(d){return d.x||0})),f)),le(f)?v.createElement("rect",{x:0,y:o<u?o:o-m,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(m)}):null}},{key:"renderClipRect",value:function(a){var r=this.props.layout;return r==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,r,i,n){var l=this.props,o=l.layout,u=l.type,m=l.stroke,f=l.connectNulls,d=l.isRange;l.ref;var h=bs(l,Dn);return v.createElement(H,{clipPath:i?"url(#clipPath-".concat(n,")"):null},v.createElement(gt,$e({},L(h,!0),{points:a,connectNulls:f,type:u,baseLine:r,layout:o,stroke:"none",className:"recharts-area-area"})),m!=="none"&&v.createElement(gt,$e({},L(this.props,!1),{className:"recharts-area-curve",layout:o,type:u,connectNulls:f,fill:"none",points:a})),m!=="none"&&d&&v.createElement(gt,$e({},L(this.props,!1),{className:"recharts-area-curve",layout:o,type:u,connectNulls:f,fill:"none",points:r})))}},{key:"renderAreaWithAnimation",value:function(a,r){var i=this,n=this.props,l=n.points,o=n.baseLine,u=n.isAnimationActive,m=n.animationBegin,f=n.animationDuration,d=n.animationEasing,h=n.animationId,y=this.state,j=y.prevPoints,c=y.prevBaseLine;return v.createElement(pa,{begin:m,duration:f,isActive:u,easing:d,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var g=x.t;if(j){var w=j.length/l.length,_=l.map(function(N,p){var C=Math.floor(p*w);if(j[C]){var T=j[C],z=ie(T.x,N.x),k=ie(T.y,N.y);return Ce(Ce({},N),{},{x:z(g),y:k(g)})}return N}),A;if(le(o)&&typeof o=="number"){var D=ie(c,o);A=D(g)}else if(ye(o)||er(o)){var b=ie(c,0);A=b(g)}else A=o.map(function(N,p){var C=Math.floor(p*w);if(c[C]){var T=c[C],z=ie(T.x,N.x),k=ie(T.y,N.y);return Ce(Ce({},N),{},{x:z(g),y:k(g)})}return N});return i.renderAreaStatically(_,A,a,r)}return v.createElement(H,null,v.createElement("defs",null,v.createElement("clipPath",{id:"animationClipPath-".concat(r)},i.renderClipRect(g))),v.createElement(H,{clipPath:"url(#animationClipPath-".concat(r,")")},i.renderAreaStatically(l,o,a,r)))})}},{key:"renderArea",value:function(a,r){var i=this.props,n=i.points,l=i.baseLine,o=i.isAnimationActive,u=this.state,m=u.prevPoints,f=u.prevBaseLine,d=u.totalLength;return o&&n&&n.length&&(!m&&d>0||!_t(m,n)||!_t(f,l))?this.renderAreaWithAnimation(a,r):this.renderAreaStatically(n,l,a,r)}},{key:"render",value:function(){var a,r=this.props,i=r.hide,n=r.dot,l=r.points,o=r.className,u=r.top,m=r.left,f=r.xAxis,d=r.yAxis,h=r.width,y=r.height,j=r.isAnimationActive,c=r.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,g=l.length===1,w=ae("recharts-area",o),_=f&&f.allowDataOverflow,A=d&&d.allowDataOverflow,D=_||A,b=ye(c)?this.id:c,N=(a=L(n,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},p=N.r,C=p===void 0?3:p,T=N.strokeWidth,z=T===void 0?2:T,k=tr(n)?n:{},$=k.clipDot,Z=$===void 0?!0:$,K=C*2+z;return v.createElement(H,{className:w},_||A?v.createElement("defs",null,v.createElement("clipPath",{id:"clipPath-".concat(b)},v.createElement("rect",{x:_?m:m-h/2,y:A?u:u-y/2,width:_?h:h*2,height:A?y:y*2})),!Z&&v.createElement("clipPath",{id:"clipPath-dots-".concat(b)},v.createElement("rect",{x:m-K/2,y:u-K/2,width:h+K,height:y+K}))):null,g?null:this.renderArea(D,b),(n||g)&&this.renderDots(D,Z,b),(!j||x)&&xa.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,r){return a.animationId!==r.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:r.curPoints,prevBaseLine:r.curBaseLine}:a.points!==r.curPoints||a.baseLine!==r.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])})(P.PureComponent);js=ke;ge(ke,"displayName","Area");ge(ke,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!ga.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ge(ke,"getBaseValue",function(t,s,a,r){var i=t.layout,n=t.baseValue,l=s.props.baseValue,o=l??n;if(le(o)&&typeof o=="number")return o;var u=i==="horizontal"?r:a,m=u.scale.domain();if(u.type==="number"){var f=Math.max(m[0],m[1]),d=Math.min(m[0],m[1]);return o==="dataMin"?d:o==="dataMax"||f<0?f:Math.max(Math.min(m[0],m[1]),0)}return o==="dataMin"?m[0]:o==="dataMax"?m[1]:m[0]});ge(ke,"getComposedData",function(t){var s=t.props,a=t.item,r=t.xAxis,i=t.yAxis,n=t.xAxisTicks,l=t.yAxisTicks,o=t.bandSize,u=t.dataKey,m=t.stackedData,f=t.dataStartIndex,d=t.displayedData,h=t.offset,y=s.layout,j=m&&m.length,c=js.getBaseValue(s,a,r,i),x=y==="horizontal",g=!1,w=d.map(function(A,D){var b;j?b=m[f+D]:(b=xe(A,u),Array.isArray(b)?g=!0:b=[c,b]);var N=b[1]==null||j&&xe(A,u)==null;return x?{x:Na({axis:r,ticks:n,bandSize:o,entry:A,index:D}),y:N?null:i.scale(b[1]),value:b,payload:A}:{x:N?null:r.scale(b[1]),y:Na({axis:i,ticks:l,bandSize:o,entry:A,index:D}),value:b,payload:A}}),_;return j||g?_=w.map(function(A){var D=Array.isArray(A.value)?A.value[0]:null;return x?{x:A.x,y:D!=null&&A.y!=null?i.scale(D):null}:{x:D!=null?r.scale(D):null,y:A.y}}):_=x?i.scale(c):r.scale(c),Ce({points:w,baseLine:_,layout:y,isRange:g},h)});ge(ke,"renderDotItem",function(t,s){var a;if(v.isValidElement(t))a=v.cloneElement(t,s);else if(X(t))a=t(s);else{var r=ae("recharts-area-dot",typeof t!="boolean"?t.className:""),i=s.key,n=bs(s,Mn);a=v.createElement(ha,$e({},n,{key:i,className:r}))}return a});var aa=Dt({chartName:"BarChart",GraphicalChild:Ge,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Me},{axisType:"yAxis",AxisComp:pe}],formatAxisMap:es}),Gn=Dt({chartName:"PieChart",GraphicalChild:Ae,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:st},{axisType:"radiusAxis",AxisComp:at}],formatAxisMap:ts,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Bn=Dt({chartName:"RadarChart",GraphicalChild:dt,axisComponents:[{axisType:"angleAxis",AxisComp:st},{axisType:"radiusAxis",AxisComp:at}],formatAxisMap:ts,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),zn=Dt({chartName:"AreaChart",GraphicalChild:ke,axisComponents:[{axisType:"xAxis",AxisComp:Me},{axisType:"yAxis",AxisComp:pe}],formatAxisMap:es});function Vn({myChildren:t,selectedChildEmail:s,onSelectChild:a,currentUserEmail:r}){return e.jsx(O,{className:"border-2 border-purple-200 shadow-lg",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Va,{className:"w-6 h-6 text-purple-500"}),"Select Child"]}),t.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-gray-600",children:"No children linked to your account yet."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Children can link their account to yours in their settings."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(i=>{const n=i.email===s,l={avatar_skin_tone:i.avatar_skin_tone||"medium",avatar_hair_style:i.avatar_hair_style||"short",avatar_hair_color:i.avatar_hair_color||"brown",avatar_eyes:i.avatar_eyes||"normal",avatar_outfit:i.avatar_outfit||"casual",avatar_accessory:i.avatar_accessory||"none"};return e.jsxs("button",{onClick:()=>a(i.email),className:`p-4 rounded-xl border-2 transition-all text-center ${n?"border-purple-500 bg-purple-50 shadow-lg scale-105":"border-gray-200 bg-white hover:border-purple-300 hover:bg-purple-50"}`,children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx(Wa,{avatarData:l,size:"medium"})}),e.jsx("h3",{className:"font-bold text-lg truncate",children:i.child_name||i.full_name||i.email.split("@")[0]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:i.email}),n&&e.jsxs("div",{className:"mt-2 flex items-center justify-center gap-1 text-purple-600 text-sm font-medium",children:["Selected ",e.jsx(Gs,{className:"w-4 h-4"})]})]},i.email)})})]})})}function Hn({childProgress:t,childDailyChallenges:s,selectedChild:a}){const{data:r}=he({queryKey:["currentUser"],queryFn:async()=>{const h=Y(J),y=await Js(we(h,"users","USER_ID"));return y.exists()?y.data():null}}),{data:i=0}=he({queryKey:["unreadChildReplies",a==null?void 0:a.email],queryFn:async()=>{const h=Y(J),y=la(Ne(h,"messages"),Ee("parent_email","==",r==null?void 0:r.email),Ee("child_email","==",a==null?void 0:a.email),Ee("message_type","==","response"),Ee("parent_read","==",!1));return(await We(y)).size},initialData:0,enabled:!!(r!=null&&r.email)&&!!(a!=null&&a.email)}),n=t.length,l=t.reduce((h,y)=>h+(y.stars_earned||0),0),o=t.reduce((h,y)=>h+(y.correct_answers||0),0),u=t.reduce((h,y)=>h+(y.total_questions||0),0),m=u>0?(o/u*100).toFixed(1):0,f=s.length,d=t.length>0?t[0].created_date:null;return e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(O,{className:"border-2 border-blue-200",children:[e.jsx(F,{className:"bg-blue-50",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5 text-blue-600"}),"Total Games"]})}),e.jsxs(S,{className:"p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:n}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d&&`Last: ${je(new Date(d),"MMM d")}`})]})]}),e.jsxs(O,{className:"border-2 border-yellow-200",children:[e.jsx(F,{className:"bg-yellow-50",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5 text-yellow-600"}),"Total Stars"]})}),e.jsxs(S,{className:"p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:l}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Avg: ",n>0?(l/n).toFixed(1):0," per game"]})]})]}),e.jsxs(O,{className:"border-2 border-green-200",children:[e.jsx(F,{className:"bg-green-50",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(ve,{className:"w-5 h-5 text-green-600"}),"Accuracy"]})}),e.jsxs(S,{className:"p-4",children:[e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[m,"%"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o," / ",u," correct"]})]})]}),e.jsxs(O,{className:"border-2 border-purple-200",children:[e.jsx(F,{className:"bg-purple-50",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5 text-purple-600"}),"Daily Challenges"]})}),e.jsxs(S,{className:"p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:f}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"completed"})]})]}),e.jsxs(O,{className:"border-2 border-pink-200 md:col-span-2 lg:col-span-1",children:[e.jsx(F,{className:"bg-pink-50",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5 text-pink-600"}),"Messages",i>0&&e.jsxs(B,{className:"bg-pink-500 text-white animate-pulse ml-auto",children:[i," New"]})]})}),e.jsxs(S,{className:"p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-pink-600",children:i}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"unread replies"})]})]})]})}function Qn({childProgress:t,childDailyChallenges:s}){const a=()=>{const d={addition:{total:0,correct:0,games:0},subtraction:{total:0,correct:0,games:0},multiplication:{total:0,correct:0,games:0},division:{total:0,correct:0,games:0}};return t.forEach(h=>{d[h.operation]&&(d[h.operation].games++,d[h.operation].total+=h.total_questions,d[h.operation].correct+=h.correct_answers)}),Object.entries(d).map(([h,y])=>({operation:h.charAt(0).toUpperCase()+h.slice(1),accuracy:y.total>0?Math.round(y.correct/y.total*100):0,games:y.games}))},r=()=>{const d={easy:{total:0,correct:0,games:0},medium:{total:0,correct:0,games:0},hard:{total:0,correct:0,games:0}};return t.forEach(h=>{d[h.level]&&(d[h.level].games++,d[h.level].total+=h.total_questions,d[h.level].correct+=h.correct_answers)}),Object.entries(d).map(([h,y])=>({level:h.charAt(0).toUpperCase()+h.slice(1),accuracy:y.total>0?Math.round(y.correct/y.total*100):0,games:y.games}))},i=()=>t.slice(0,10).reverse().map((d,h)=>({game:`Game ${h+1}`,accuracy:Math.round(d.correct_answers/d.total_questions*100),score:d.score})),n=()=>{const d=[...a()].sort((j,c)=>c.accuracy-j.accuracy),h=d.slice(0,2).filter(j=>j.accuracy>=70),y=d.slice(-2).filter(j=>j.accuracy<70&&j.games>0);return{strengths:h,weaknesses:y}},l=a(),o=r(),u=i(),{strengths:m,weaknesses:f}=n();return t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(jt,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-xl text-gray-600",children:"No performance data available yet"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Data will appear once the child starts playing games"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(O,{className:"border-2 border-green-200 bg-green-50",children:[e.jsx(F,{children:e.jsxs(I,{className:"flex items-center gap-2 text-green-700",children:[e.jsx(ve,{className:"w-6 h-6"}),"Strengths"]})}),e.jsx(S,{children:m.length>0?e.jsx("div",{className:"space-y-3",children:m.map((d,h)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[e.jsx("span",{className:"font-medium",children:d.operation}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(B,{className:"bg-green-500",children:[d.accuracy,"%"]}),e.jsx(Nt,{className:"w-5 h-5 text-green-600"})]})]},h))}):e.jsx("p",{className:"text-gray-600 text-center py-4",children:"Keep practicing to identify strengths!"})})]}),e.jsxs(O,{className:"border-2 border-orange-200 bg-orange-50",children:[e.jsx(F,{children:e.jsxs(I,{className:"flex items-center gap-2 text-orange-700",children:[e.jsx(da,{className:"w-6 h-6"}),"Areas for Improvement"]})}),e.jsx(S,{children:f.length>0?e.jsx("div",{className:"space-y-3",children:f.map((d,h)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[e.jsx("span",{className:"font-medium",children:d.operation}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(B,{variant:"outline",className:"border-orange-400",children:[d.accuracy,"%"]}),e.jsx(Ja,{className:"w-5 h-5 text-orange-600"})]})]},h))}):e.jsx("p",{className:"text-gray-600 text-center py-4",children:"Great job! No weak areas identified."})})]})]}),e.jsxs(O,{children:[e.jsx(F,{children:e.jsx(I,{children:"Performance by Operation"})}),e.jsx(S,{children:e.jsx(Se,{width:"100%",height:300,children:e.jsxs(aa,{data:l,children:[e.jsx(He,{strokeDasharray:"3 3"}),e.jsx(Me,{dataKey:"operation"}),e.jsx(pe,{}),e.jsx(Pe,{}),e.jsx(Qe,{}),e.jsx(Ge,{dataKey:"accuracy",fill:"#8b5cf6",name:"Accuracy %"}),e.jsx(Ge,{dataKey:"games",fill:"#ec4899",name:"Games Played"})]})})})]}),e.jsxs(O,{children:[e.jsx(F,{children:e.jsx(I,{children:"Performance by Difficulty Level"})}),e.jsx(S,{children:e.jsx(Se,{width:"100%",height:300,children:e.jsxs(aa,{data:o,children:[e.jsx(He,{strokeDasharray:"3 3"}),e.jsx(Me,{dataKey:"level"}),e.jsx(pe,{}),e.jsx(Pe,{}),e.jsx(Qe,{}),e.jsx(Ge,{dataKey:"accuracy",fill:"#10b981",name:"Accuracy %"}),e.jsx(Ge,{dataKey:"games",fill:"#f59e0b",name:"Games Played"})]})})})]}),u.length>0&&e.jsxs(O,{children:[e.jsx(F,{children:e.jsx(I,{children:"Recent Performance Trend"})}),e.jsx(S,{children:e.jsx(Se,{width:"100%",height:300,children:e.jsxs(Za,{data:u,children:[e.jsx(He,{strokeDasharray:"3 3"}),e.jsx(Me,{dataKey:"game"}),e.jsx(pe,{}),e.jsx(Pe,{}),e.jsx(Qe,{}),e.jsx(wt,{type:"monotone",dataKey:"accuracy",stroke:"#8b5cf6",strokeWidth:3,name:"Accuracy %"}),e.jsx(wt,{type:"monotone",dataKey:"score",stroke:"#10b981",strokeWidth:3,name:"Score"})]})})})]})]})}function Un({childEmail:t,childGoals:s,childProgress:a,childDailyChallenges:r}){const i=Ke(),[n,l]=P.useState(!1),[o,u]=P.useState({goal_type:"total_stars",target_value:10,title:"",description:"",reward_message:"",operation:"",level:"",due_date:""}),m=ne({mutationFn:async x=>{const g=Y(J);await ra(Ne(g,"customGoals"),{...x,child_email:t})},onSuccess:()=>{i.invalidateQueries({queryKey:["childGoals"]}),l(!1),u({goal_type:"total_stars",target_value:10,title:"",description:"",reward_message:"",operation:"",level:"",due_date:""})}}),f=ne({mutationFn:async x=>{const g=Y(J);await na(we(g,"customGoals",x))},onSuccess:()=>{i.invalidateQueries({queryKey:["childGoals"]})}}),d=ne({mutationFn:async({goalId:x,data:g})=>{const w=Y(J);await bt(we(w,"customGoals",x),g,{merge:!0})},onSuccess:()=>{i.invalidateQueries({queryKey:["childGoals"]})}}),h=x=>{let g=0;switch(x.goal_type){case"total_stars":g=a.reduce((w,_)=>w+(_.stars_earned||0),0);break;case"games_played":g=a.length;break;case"accuracy":if(a.length>0){const w=a.reduce((_,A)=>_+A.correct_answers/A.total_questions*100,0);g=Math.round(w/a.length)}break;case"daily_streak":g=y();break;case"specific_operation":g=a.filter(w=>w.operation===x.operation&&(!x.level||w.level===x.level)).length;break}return g!==x.current_value&&d.mutate({goalId:x.id,data:{current_value:g}}),g>=x.target_value&&!x.is_completed&&d.mutate({goalId:x.id,data:{is_completed:!0}}),g},y=()=>{if(r.length===0)return 0;const x=[...r].sort((_,A)=>new Date(A.challenge_date)-new Date(_.challenge_date));let g=0,w=new Date;for(const _ of x){const A=new Date(_.challenge_date);if(Math.floor((w-A)/(1e3*60*60*24))===g)g++;else break}return g},j=()=>{o.title&&m.mutate(o)},c={total_stars:"Total Stars",games_played:"Games Played",accuracy:"Average Accuracy",daily_streak:"Daily Streak",specific_operation:"Practice Specific Operation"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(re,{className:"w-6 h-6 text-purple-500"}),"Custom Goals & Challenges"]}),e.jsxs(R,{onClick:()=>l(!n),className:"bg-purple-500 hover:bg-purple-600",children:[e.jsx(Mt,{className:"w-4 h-4 mr-2"}),"Add Goal"]})]}),n&&e.jsxs(O,{className:"border-2 border-purple-300",children:[e.jsx(F,{className:"bg-purple-50",children:e.jsx(I,{children:"Create New Goal"})}),e.jsxs(S,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"title",children:"Goal Title"}),e.jsx(G,{id:"title",value:o.title,onChange:x=>u({...o,title:x.target.value}),placeholder:"e.g., Master Multiplication"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"goal_type",children:"Goal Type"}),e.jsxs(oe,{value:o.goal_type,onValueChange:x=>u({...o,goal_type:x}),children:[e.jsx(de,{children:e.jsx(me,{})}),e.jsx(ue,{children:Object.entries(c).map(([x,g])=>e.jsx(M,{value:x,children:g},x))})]})]}),o.goal_type==="specific_operation"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"operation",children:"Operation"}),e.jsxs(oe,{value:o.operation,onValueChange:x=>u({...o,operation:x}),children:[e.jsx(de,{children:e.jsx(me,{placeholder:"Select operation"})}),e.jsxs(ue,{children:[e.jsx(M,{value:"addition",children:"Addition"}),e.jsx(M,{value:"subtraction",children:"Subtraction"}),e.jsx(M,{value:"multiplication",children:"Multiplication"}),e.jsx(M,{value:"division",children:"Division"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"level",children:"Level (Optional)"}),e.jsxs(oe,{value:o.level,onValueChange:x=>u({...o,level:x}),children:[e.jsx(de,{children:e.jsx(me,{placeholder:"Any level"})}),e.jsxs(ue,{children:[e.jsx(M,{value:null,children:"Any Level"}),e.jsx(M,{value:"easy",children:"Easy"}),e.jsx(M,{value:"medium",children:"Medium"}),e.jsx(M,{value:"hard",children:"Hard"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"target",children:"Target Value"}),e.jsx(G,{id:"target",type:"number",min:"1",value:o.target_value,onChange:x=>u({...o,target_value:parseInt(x.target.value)})}),e.jsx("p",{className:"text-sm text-gray-500",children:o.goal_type==="accuracy"?"Target percentage (e.g., 80 for 80%)":"Target number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(Ye,{id:"description",value:o.description,onChange:x=>u({...o,description:x.target.value}),placeholder:"Additional details about this goal..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"reward",children:"Reward Message (Optional)"}),e.jsx(G,{id:"reward",value:o.reward_message,onChange:x=>u({...o,reward_message:x.target.value}),placeholder:"e.g., Great job! You're a multiplication master!"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"due_date",children:"Due Date (Optional)"}),e.jsx(G,{id:"due_date",type:"date",value:o.due_date,onChange:x=>u({...o,due_date:x.target.value})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{onClick:j,className:"flex-1 bg-purple-500 hover:bg-purple-600",disabled:!o.title||m.isPending,children:m.isPending?"Creating...":"Create Goal"}),e.jsx(R,{variant:"outline",onClick:()=>l(!1),children:"Cancel"})]})]})]}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsx(O,{className:"border-2 border-gray-200",children:e.jsxs(S,{className:"p-12 text-center",children:[e.jsx(re,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"No goals set yet"}),e.jsx("p",{className:"text-gray-500",children:"Create custom goals to motivate and track progress"})]})}):s.map(x=>{const g=h(x),w=Math.min(g/x.target_value*100,100),_=x.is_completed||g>=x.target_value;return e.jsxs(O,{className:`border-2 ${_?"border-green-300 bg-green-50":"border-purple-200"}`,children:[e.jsx(F,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs(I,{className:"flex items-center gap-2",children:[_?e.jsx(ve,{className:"w-6 h-6 text-green-600"}):e.jsx(re,{className:"w-6 h-6 text-purple-500"}),x.title]}),e.jsx(B,{variant:"outline",children:c[x.goal_type]}),_&&e.jsx(B,{className:"bg-green-500",children:"Completed!"})]}),x.description&&e.jsx("p",{className:"text-sm text-gray-600",children:x.description}),x.due_date&&e.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1 mt-1",children:[e.jsx(De,{className:"w-4 h-4"}),"Due: ",je(new Date(x.due_date),"MMM d, yyyy")]})]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>f.mutate(x.id),className:"text-gray-400 hover:text-red-600",children:e.jsx(Tt,{className:"w-5 h-5"})})]})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:"Progress"}),e.jsxs("span",{className:"font-bold",children:[g," / ",x.target_value,x.goal_type==="accuracy"&&"%"]})]}),e.jsx(ls,{value:w,className:"h-3"}),_&&x.reward_message&&e.jsx("div",{className:"bg-green-100 border-2 border-green-300 rounded-lg p-3 text-center",children:e.jsxs("p",{className:"text-sm font-medium text-green-800",children:[" ",x.reward_message]})})]})})]},x.id)})})]})}function Wn({childProgress:t,childDailyChallenges:s}){const a=[...t.map(n=>({...n,type:"game"})),...s.map(n=>({...n,type:"daily"}))].sort((n,l)=>new Date(l.created_date)-new Date(n.created_date)).slice(0,20),r={addition:"",subtraction:"",multiplication:"",division:""},i={easy:"bg-green-500",medium:"bg-yellow-500",hard:"bg-red-500"};return a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(De,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-xl text-gray-600",children:"No activity recorded yet"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Activities will appear here as the child plays"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(De,{className:"w-6 h-6 text-purple-500"}),"Recent Activity Timeline"]}),e.jsx("div",{className:"space-y-3",children:a.map((n,l)=>{const o=Math.round(n.correct_answers/n.total_questions*100);return e.jsx(O,{className:"border-2 border-gray-200 hover:shadow-md transition-shadow",children:e.jsx(S,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl flex items-center justify-center flex-shrink-0",children:n.type==="daily"?e.jsx(De,{className:"w-6 h-6 text-purple-600"}):e.jsx("span",{className:"text-2xl",children:r[n.operation]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[n.type==="daily"?e.jsx("h4",{className:"font-bold text-lg",children:"Daily Challenge"}):e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-lg capitalize",children:n.operation}),e.jsx(B,{className:i[n.level]+" text-white",children:n.level})]}),e.jsx("span",{className:"text-sm text-gray-500",children:je(new Date(n.created_date),"MMM d, h:mm a")})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4 text-purple-500"}),e.jsxs("span",{className:"font-medium",children:[n.score," pts"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"font-medium",children:[n.correct_answers,"/",n.total_questions," (",o,"%)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-blue-500"}),e.jsxs("span",{className:"font-medium",children:[n.time_taken,"s"]})]}),n.stars_earned!==void 0&&e.jsx("div",{className:"flex items-center gap-1",children:[...Array(3)].map((u,m)=>e.jsx(be,{className:`w-4 h-4 ${m<n.stars_earned?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},m))}),n.bonus_stars!==void 0&&n.bonus_stars>0&&e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs(B,{className:"bg-yellow-500 text-white",children:["+",n.bonus_stars," Bonus "]})})]})]})]})})})},l)})})]})}var It="Checkbox",[Yn]=Ha(It),[Jn,ya]=Yn(It);function Zn(t){const{__scopeCheckbox:s,checked:a,children:r,defaultChecked:i,disabled:n,form:l,name:o,onCheckedChange:u,required:m,value:f="on",internal_do_not_use_render:d}=t,[h,y]=Qa({prop:a,defaultProp:i??!1,onChange:u,caller:It}),[j,c]=P.useState(null),[x,g]=P.useState(null),w=P.useRef(!1),_=j?!!l||!!j.closest("form"):!0,A={checked:h,disabled:n,setChecked:y,control:j,setControl:c,name:o,form:l,value:f,hasConsumerStoppedPropagationRef:w,required:m,defaultChecked:Re(i)?!1:i,isFormControl:_,bubbleInput:x,setBubbleInput:g};return e.jsx(Jn,{scope:s,...A,children:Xn(d)?d(A):r})}var ws="CheckboxTrigger",_s=P.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:a,...r},i)=>{const{control:n,value:l,disabled:o,checked:u,required:m,setControl:f,setChecked:d,hasConsumerStoppedPropagationRef:h,isFormControl:y,bubbleInput:j}=ya(ws,t),c=Et(i,f),x=P.useRef(u);return P.useEffect(()=>{const g=n==null?void 0:n.form;if(g){const w=()=>d(x.current);return g.addEventListener("reset",w),()=>g.removeEventListener("reset",w)}},[n,d]),e.jsx(ot.button,{type:"button",role:"checkbox","aria-checked":Re(u)?"mixed":u,"aria-required":m,"data-state":Ss(u),"data-disabled":o?"":void 0,disabled:o,value:l,...r,ref:c,onKeyDown:Ht(s,g=>{g.key==="Enter"&&g.preventDefault()}),onClick:Ht(a,g=>{d(w=>Re(w)?!0:!w),j&&y&&(h.current=g.isPropagationStopped(),h.current||g.stopPropagation())})})});_s.displayName=ws;var fa=P.forwardRef((t,s)=>{const{__scopeCheckbox:a,name:r,checked:i,defaultChecked:n,required:l,disabled:o,value:u,onCheckedChange:m,form:f,...d}=t;return e.jsx(Zn,{__scopeCheckbox:a,checked:i,defaultChecked:n,disabled:o,required:l,onCheckedChange:m,name:r,form:f,value:u,internal_do_not_use_render:({isFormControl:h})=>e.jsxs(e.Fragment,{children:[e.jsx(_s,{...d,ref:s,__scopeCheckbox:a}),h&&e.jsx(Os,{__scopeCheckbox:a})]})})});fa.displayName=It;var ks="CheckboxIndicator",As=P.forwardRef((t,s)=>{const{__scopeCheckbox:a,forceMount:r,...i}=t,n=ya(ks,a);return e.jsx(Ys,{present:r||Re(n.checked)||n.checked===!0,children:e.jsx(ot.span,{"data-state":Ss(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:s,style:{pointerEvents:"none",...t.style}})})});As.displayName=ks;var Cs="CheckboxBubbleInput",Os=P.forwardRef(({__scopeCheckbox:t,...s},a)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:n,defaultChecked:l,required:o,disabled:u,name:m,value:f,form:d,bubbleInput:h,setBubbleInput:y}=ya(Cs,t),j=Et(a,y),c=cs(n),x=Ua(r);P.useEffect(()=>{const w=h;if(!w)return;const _=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(_,"checked").set,D=!i.current;if(c!==n&&A){const b=new Event("click",{bubbles:D});w.indeterminate=Re(n),A.call(w,Re(n)?!1:n),w.dispatchEvent(b)}},[h,c,n,i]);const g=P.useRef(Re(n)?!1:n);return e.jsx(ot.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??g.current,required:o,disabled:u,name:m,value:f,form:d,...s,tabIndex:-1,ref:j,style:{...s.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Os.displayName=Cs;function Xn(t){return typeof t=="function"}function Re(t){return t==="indeterminate"}function Ss(t){return Re(t)?"indeterminate":t?"checked":"unchecked"}const Ps=P.forwardRef(({className:t,...s},a)=>e.jsx(fa,{ref:a,className:vt("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(As,{className:vt("flex items-center justify-center text-current"),children:e.jsx(Qs,{className:"h-4 w-4"})})}));Ps.displayName=fa.displayName;function ei(){var t;const s=Ke(),[a,r]=P.useState(!1),[i,n]=P.useState([]),[l,o]=P.useState({challenge_name:"",challenge_type:"team_score",target_value:1e3,description:"",start_date:new Date().toISOString().split("T")[0],end_date:"",reward_stars:10,reward_coins:50,reward_message:"",specific_operation:"any",specific_level:"any"}),{data:u}=he({queryKey:["currentUser"],queryFn:async()=>({email:"parent@example.com"}),initialData:{email:"parent@example.com"}}),{data:m=[]}=he({queryKey:["allUsers"],queryFn:async()=>[],initialData:[]}),f=m.filter(c=>c.parent_email===(u==null?void 0:u.email)),d=ne({mutationFn:async c=>{throw console.log("Team challenge created (placeholder):",c),alert("Team challenge creation is currently being migrated to Firebase. This feature will be available soon!"),new Error("Challenge creation pending implementation")},onSuccess:()=>{s.invalidateQueries({queryKey:["teamChallenges"]}),s.invalidateQueries({queryKey:["myTeamChallenges"]}),r(!1),n([]),o({challenge_name:"",challenge_type:"team_score",target_value:1e3,description:"",start_date:new Date().toISOString().split("T")[0],end_date:"",reward_stars:10,reward_coins:50,reward_message:"",specific_operation:"any",specific_level:"any"})}}),h=()=>{!l.challenge_name||i.length===0||d.mutate({...l,creator_email:u.email,team_members:i})},y=c=>{i.includes(c)?n(i.filter(x=>x!==c)):n([...i,c])},j=[{value:"team_score",label:"Team Score Challenge",description:"Combine all team members' scores"},{value:"combined_accuracy",label:"Combined Accuracy Goal",description:"Average accuracy across all members"},{value:"total_games",label:"Total Games Challenge",description:"Total number of games played by the team"},{value:"total_stars",label:"Star Collection Challenge",description:"Collect stars together as a team"},{value:"daily_streak_sum",label:"Daily Challenge Streak",description:"Combined daily challenge completions"},{value:"speed_challenge",label:"Speed Challenge",description:"Best (fastest) time from any team member"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(xt,{className:"w-6 h-6 text-purple-500"}),"Team Challenges"]}),e.jsxs(R,{onClick:()=>r(!a),className:"bg-purple-500 hover:bg-purple-600",children:[e.jsx(Mt,{className:"w-4 h-4 mr-2"}),"Create Team Challenge"]})]}),a&&e.jsxs(O,{className:"border-2 border-purple-300",children:[e.jsx(F,{className:"bg-purple-50",children:e.jsx(I,{children:"Create New Team Challenge"})}),e.jsxs(S,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"challenge_name",children:"Challenge Name"}),e.jsx(G,{id:"challenge_name",value:l.challenge_name,onChange:c=>o({...l,challenge_name:c.target.value}),placeholder:"e.g., Family Math Marathon"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"challenge_type",children:"Challenge Type"}),e.jsxs(oe,{value:l.challenge_type,onValueChange:c=>o({...l,challenge_type:c}),children:[e.jsx(de,{children:e.jsx(me,{})}),e.jsx(ue,{children:j.map(c=>e.jsx(M,{value:c.value,children:c.label},c.value))})]}),e.jsx("p",{className:"text-sm text-gray-600",children:(t=j.find(c=>c.value===l.challenge_type))==null?void 0:t.description})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"specific_operation",children:"Specific Operation (Optional)"}),e.jsxs(oe,{value:l.specific_operation,onValueChange:c=>o({...l,specific_operation:c}),children:[e.jsx(de,{children:e.jsx(me,{})}),e.jsxs(ue,{children:[e.jsx(M,{value:"any",children:"Any Operation"}),e.jsx(M,{value:"addition",children:"Addition Only"}),e.jsx(M,{value:"subtraction",children:"Subtraction Only"}),e.jsx(M,{value:"multiplication",children:"Multiplication Only"}),e.jsx(M,{value:"division",children:"Division Only"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"specific_level",children:"Specific Level (Optional)"}),e.jsxs(oe,{value:l.specific_level,onValueChange:c=>o({...l,specific_level:c}),children:[e.jsx(de,{children:e.jsx(me,{})}),e.jsxs(ue,{children:[e.jsx(M,{value:"any",children:"Any Level"}),e.jsx(M,{value:"easy",children:"Easy Only"}),e.jsx(M,{value:"medium",children:"Medium Only"}),e.jsx(M,{value:"hard",children:"Hard Only"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"target_value",children:"Target Value"}),e.jsx(G,{id:"target_value",type:"number",min:"1",value:l.target_value,onChange:c=>o({...l,target_value:parseInt(c.target.value)})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"start_date",children:"Start Date"}),e.jsx(G,{id:"start_date",type:"date",value:l.start_date,onChange:c=>o({...l,start_date:c.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"end_date",children:"End Date (Optional)"}),e.jsx(G,{id:"end_date",type:"date",value:l.end_date,onChange:c=>o({...l,end_date:c.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(Ye,{id:"description",value:l.description,onChange:c=>o({...l,description:c.target.value}),placeholder:"Describe the challenge..."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"reward_stars",children:"Reward Stars (per member)"}),e.jsx(G,{id:"reward_stars",type:"number",min:"0",value:l.reward_stars,onChange:c=>o({...l,reward_stars:parseInt(c.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"reward_coins",children:"Reward Coins (per member)"}),e.jsx(G,{id:"reward_coins",type:"number",min:"0",value:l.reward_coins,onChange:c=>o({...l,reward_coins:parseInt(c.target.value)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"reward_message",children:"Reward Message (Optional)"}),e.jsx(G,{id:"reward_message",value:l.reward_message,onChange:c=>o({...l,reward_message:c.target.value}),placeholder:"e.g., Amazing teamwork! You did it together!"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Select Team Members"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2 max-h-60 overflow-y-auto",children:f.length===0?e.jsx("p",{className:"text-gray-600 text-sm",children:"No children linked to your account"}):f.map(c=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ps,{id:c.email,checked:i.includes(c.email),onCheckedChange:()=>y(c.email)}),e.jsx(E,{htmlFor:c.email,className:"cursor-pointer flex-1",children:c.child_name||c.full_name||c.email})]},c.email))}),i.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:i.map(c=>{const x=f.find(g=>g.email===c);return e.jsxs(B,{className:"bg-purple-500 text-white",children:[(x==null?void 0:x.child_name)||(x==null?void 0:x.full_name)||c,e.jsx("button",{onClick:()=>y(c),className:"ml-2 hover:bg-purple-600 rounded-full",children:e.jsx(Vs,{className:"w-3 h-3"})})]},c)})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{onClick:h,className:"flex-1 bg-purple-500 hover:bg-purple-600",disabled:!l.challenge_name||i.length===0||d.isPending,children:d.isPending?"Creating...":"Create Challenge"}),e.jsx(R,{variant:"outline",onClick:()=>r(!1),children:"Cancel"})]})]})]})]})}var Lt="Switch",[ti]=Ha(Lt),[ai,si]=ti(Lt),Es=P.forwardRef((t,s)=>{const{__scopeSwitch:a,name:r,checked:i,defaultChecked:n,required:l,disabled:o,value:u="on",onCheckedChange:m,form:f,...d}=t,[h,y]=P.useState(null),j=Et(s,_=>y(_)),c=P.useRef(!1),x=h?f||!!h.closest("form"):!0,[g,w]=Qa({prop:i,defaultProp:n??!1,onChange:m,caller:Lt});return e.jsxs(ai,{scope:a,checked:g,disabled:o,children:[e.jsx(ot.button,{type:"button",role:"switch","aria-checked":g,"aria-required":l,"data-state":Rs(g),"data-disabled":o?"":void 0,disabled:o,value:u,...d,ref:j,onClick:Ht(t.onClick,_=>{w(A=>!A),x&&(c.current=_.isPropagationStopped(),c.current||_.stopPropagation())})}),x&&e.jsx(Ts,{control:h,bubbles:!c.current,name:r,value:u,checked:g,required:l,disabled:o,form:f,style:{transform:"translateX(-100%)"}})]})});Es.displayName=Lt;var Ds="SwitchThumb",Ms=P.forwardRef((t,s)=>{const{__scopeSwitch:a,...r}=t,i=si(Ds,a);return e.jsx(ot.span,{"data-state":Rs(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:s})});Ms.displayName=Ds;var ri="SwitchBubbleInput",Ts=P.forwardRef(({__scopeSwitch:t,control:s,checked:a,bubbles:r=!0,...i},n)=>{const l=P.useRef(null),o=Et(l,n),u=cs(a),m=Ua(s);return P.useEffect(()=>{const f=l.current;if(!f)return;const d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(u!==a&&h){const y=new Event("click",{bubbles:r});h.call(f,a),f.dispatchEvent(y)}},[u,a,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...i,tabIndex:-1,ref:o,style:{...i.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ts.displayName=ri;function Rs(t){return t?"checked":"unchecked"}var Fs=Es,ni=Ms;const sa=P.forwardRef(({className:t,...s},a)=>e.jsx(Fs,{className:vt("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:a,children:e.jsx(ni,{className:vt("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));sa.displayName=Fs.displayName;function ii({childEmail:t,currentControls:s}){const a=Ke(),[r,i]=P.useState(!1),[n,l]=P.useState({daily_time_limit_minutes:0,time_limits_by_operation:{},enforce_time_limits:!0,time_limit_warning_minutes:5,allowed_operations:["addition","subtraction","multiplication","division"],allowed_levels:["easy","medium","hard"],blocked_features:[],focus_operations:[],focus_priority:"suggest",focus_reminder_frequency:"daily",weekly_goal_games:0,weekly_goal_stars:0,monthly_goal_games:0,monthly_goal_accuracy:0}),[o,u]=P.useState([]),[m,f]=P.useState(!1),[d,h]=P.useState({title:"",description:"",target_type:"games_completed",target_value:10,operation:"any",level:"any",deadline:""});P.useEffect(()=>{s&&(l({...n,...s}),s.custom_learning_goals&&u(s.custom_learning_goals))},[s]);const y=ne({mutationFn:async()=>{const p=Y(J),C=(await We(Ne(p,"users"))).docs.find(T=>T.data().email===t);if(!C)throw new Error("Child not found");await bt(we(p,"users",C.id),{parental_controls:{...n,custom_learning_goals:o}},{merge:!0})},onSuccess:()=>{a.invalidateQueries({queryKey:["allUsers"]}),i(!0),setTimeout(()=>i(!1),3e3)}}),j=()=>{y.mutate()},c=[{id:"addition",name:"Addition",emoji:""},{id:"subtraction",name:"Subtraction",emoji:""},{id:"multiplication",name:"Multiplication",emoji:""},{id:"division",name:"Division",emoji:""},{id:"fractions",name:"Fractions",emoji:""},{id:"decimals",name:"Decimals",emoji:"0.5"},{id:"percentages",name:"Percentages",emoji:"%"},{id:"word_problems",name:"Word Problems",emoji:""},{id:"money",name:"Money Math",emoji:""},{id:"time",name:"Time",emoji:""},{id:"geometry",name:"Geometry",emoji:""},{id:"mixed",name:"Mixed",emoji:""}],x=[{id:"easy",name:"Easy"},{id:"medium",name:"Medium"},{id:"hard",name:"Hard"},{id:"expert",name:"Expert"}],g=[{id:"shop",name:"Shop",description:"Disable access to the rewards shop"},{id:"leaderboards",name:"Leaderboards",description:"Hide competitive leaderboards"},{id:"team_challenges",name:"Team Challenges",description:"Disable team-based challenges"},{id:"daily_challenge",name:"Daily Challenge",description:"Disable daily challenges"},{id:"power_ups",name:"Power-Ups",description:"Prevent using power-ups in games"}],w=(p,C)=>{const T=C==="allowed"?"allowed_operations":"focus_operations",z=n[T];z.includes(p)?l({...n,[T]:z.filter(k=>k!==p)}):l({...n,[T]:[...z,p]})},_=p=>{const C=n.allowed_levels;C.includes(p)?l({...n,allowed_levels:C.filter(T=>T!==p)}):l({...n,allowed_levels:[...C,p]})},A=p=>{const C=n.blocked_features||[];C.includes(p)?l({...n,blocked_features:C.filter(T=>T!==p)}):l({...n,blocked_features:[...C,p]})},D=(p,C)=>{l({...n,time_limits_by_operation:{...n.time_limits_by_operation||{},[p]:parseInt(C)||0}})},b=()=>{d.title&&(u([...o,{...d,id:Date.now().toString()}]),h({title:"",description:"",target_type:"games_completed",target_value:10,operation:"any",level:"any",deadline:""}),f(!1))},N=p=>{u(o.filter(C=>C.id!==p))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Ve,{className:"w-6 h-6 text-blue-600"}),"Advanced Parental Controls"]})}),r&&e.jsxs(ee,{className:"bg-green-50 border-green-200",children:[e.jsx(wa,{className:"w-4 h-4 text-green-600"}),e.jsxs(te,{className:"text-green-800",children:[e.jsx(ve,{className:"w-4 h-4 inline mr-2"}),"Settings saved successfully! Changes are now active."]})]}),e.jsxs(ca,{defaultValue:"time-limits",className:"w-full",children:[e.jsxs(oa,{className:"grid w-full grid-cols-4",children:[e.jsxs(Q,{value:"time-limits",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Time Limits"]}),e.jsxs(Q,{value:"content",children:[e.jsx(pt,{className:"w-4 h-4 mr-2"}),"Content Filter"]}),e.jsxs(Q,{value:"focus",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Focus Topics"]}),e.jsxs(Q,{value:"goals",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Custom Goals"]})]}),e.jsx(U,{value:"time-limits",className:"space-y-6",children:e.jsxs(O,{className:"border-2 border-blue-200",children:[e.jsx(F,{className:"bg-blue-50",children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-blue-600"}),"Daily Time Limits"]})}),e.jsxs(S,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{htmlFor:"daily_limit",className:"text-base font-bold",children:"Overall Daily Time Limit"}),e.jsx(sa,{checked:n.enforce_time_limits,onCheckedChange:p=>l({...n,enforce_time_limits:p})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(G,{id:"daily_limit",type:"number",min:"0",max:"480",value:n.daily_time_limit_minutes,onChange:p=>l({...n,daily_time_limit_minutes:parseInt(p.target.value)||0}),className:"max-w-xs",disabled:!n.enforce_time_limits}),e.jsx("span",{className:"text-gray-600",children:"minutes per day"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:n.daily_time_limit_minutes===0?"Set to 0 for unlimited time":`Child can use the app for ${n.daily_time_limit_minutes} minutes per day`})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[e.jsx(E,{htmlFor:"warning_time",className:"text-base font-bold",children:"Time Limit Warning"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(G,{id:"warning_time",type:"number",min:"1",max:"30",value:n.time_limit_warning_minutes,onChange:p=>l({...n,time_limit_warning_minutes:parseInt(p.target.value)||5}),className:"max-w-xs",disabled:!n.enforce_time_limits||n.daily_time_limit_minutes===0}),e.jsx("span",{className:"text-gray-600",children:"minutes before limit"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Show a warning when this many minutes remain"})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[e.jsx(E,{className:"text-base font-bold",children:"Time Limits by Math Concept (Optional)"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Set specific time limits for individual math concepts. Leave at 0 for no limit."}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:c.map(p=>{var C;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-2xl",children:p.emoji}),e.jsx("div",{className:"flex-1",children:e.jsx(E,{className:"text-sm font-medium",children:p.name})}),e.jsx(G,{type:"number",min:"0",max:"120",value:((C=n.time_limits_by_operation)==null?void 0:C[p.id])||0,onChange:T=>D(p.id,T.target.value),className:"w-20",disabled:!n.enforce_time_limits}),e.jsx("span",{className:"text-xs text-gray-500",children:"min"})]},p.id)})})]}),e.jsxs(ee,{className:"bg-yellow-50 border-yellow-200",children:[e.jsx(Qt,{className:"w-4 h-4 text-yellow-600"}),e.jsxs(te,{className:"text-yellow-800 text-sm",children:[e.jsx("strong",{children:"How it works:"})," Time limits are enforced per calendar day. When time runs out, your child will be notified and games will be locked until the next day."]})]})]})]})}),e.jsxs(U,{value:"content",className:"space-y-6",children:[e.jsxs(O,{className:"border-2 border-green-200",children:[e.jsx(F,{className:"bg-green-50",children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(pt,{className:"w-5 h-5 text-green-600"}),"Allowed Math Concepts"]})}),e.jsxs(S,{className:"p-6 space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select which math concepts your child can access. At least one must be selected."}),e.jsx("div",{className:"grid md:grid-cols-3 gap-3",children:c.map(p=>e.jsx("div",{className:`p-4 rounded-lg border-2 transition-all cursor-pointer ${n.allowed_operations.includes(p.id)?"border-green-500 bg-green-50":"border-gray-200 bg-gray-50"}`,onClick:()=>w(p.id,"allowed"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:p.emoji}),e.jsx("div",{className:"text-sm font-medium",children:p.name})]})},p.id))}),e.jsxs(ee,{className:"bg-yellow-50 border-yellow-200 mt-4",children:[e.jsx(Qt,{className:"w-4 h-4 text-yellow-600"}),e.jsx(te,{className:"text-yellow-800 text-sm",children:"At least one operation must be allowed for your child to play games."})]})]})]}),e.jsxs(O,{className:"border-2 border-purple-200",children:[e.jsx(F,{className:"bg-purple-50",children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(pt,{className:"w-5 h-5 text-purple-600"}),"Allowed Difficulty Levels"]})}),e.jsxs(S,{className:"p-6 space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Control which difficulty levels your child can play."}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:x.map(p=>e.jsx("div",{className:`p-4 rounded-lg border-2 transition-all cursor-pointer ${n.allowed_levels.includes(p.id)?"border-purple-500 bg-purple-50":"border-gray-200 bg-gray-50"}`,onClick:()=>_(p.id),children:e.jsx("div",{className:"text-center font-medium",children:p.name})},p.id))})]})]}),e.jsxs(O,{className:"border-2 border-orange-200",children:[e.jsx(F,{className:"bg-orange-50",children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(pt,{className:"w-5 h-5 text-orange-600"}),"Feature Access Control"]})}),e.jsxs(S,{className:"p-6 space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Control which app features your child can access."}),g.map(p=>{var C;return e.jsxs("div",{className:"flex items-start justify-between p-4 bg-gray-50 rounded-lg border-2 border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold mb-1",children:p.name}),e.jsx("p",{className:"text-sm text-gray-600",children:p.description})]}),e.jsx(sa,{checked:!((C=n.blocked_features)!=null&&C.includes(p.id)),onCheckedChange:()=>A(p.id)})]},p.id)})]})]})]}),e.jsx(U,{value:"focus",className:"space-y-6",children:e.jsxs(O,{className:"border-2 border-indigo-200",children:[e.jsx(F,{className:"bg-indigo-50",children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5 text-indigo-600"}),"Focus Topics & Recommendations"]})}),e.jsx(S,{className:"p-6 space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-base font-bold mb-3 block",children:"Select Focus Operations"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Highlight specific math concepts for your child to practice more."}),e.jsx("div",{className:"grid md:grid-cols-3 gap-3",children:c.map(p=>e.jsx("div",{className:`p-4 rounded-lg border-2 transition-all cursor-pointer ${n.focus_operations.includes(p.id)?"border-indigo-500 bg-indigo-50 ring-2 ring-indigo-200":"border-gray-200 bg-gray-50"}`,onClick:()=>w(p.id,"focus"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:p.emoji}),e.jsx("div",{className:"text-sm font-medium",children:p.name}),n.focus_operations.includes(p.id)&&e.jsx(Badge,{className:"mt-2 bg-indigo-500 text-white text-xs",children:"Focus"})]})},p.id))})]}),n.focus_operations.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pt-4 border-t space-y-3",children:[e.jsx(E,{className:"text-base font-bold",children:"Focus Priority Mode"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${n.focus_priority==="suggest"?"border-indigo-500 bg-indigo-50":"border-gray-200 bg-white"}`,onClick:()=>l({...n,focus_priority:"suggest"}),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${n.focus_priority==="suggest"?"border-indigo-500":"border-gray-300"}`,children:n.focus_priority==="suggest"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-500"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:"Suggest (Recommended)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Show reminders and highlight focus topics, but allow access to all enabled content"})]})]})}),e.jsx("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${n.focus_priority==="enforce"?"border-indigo-500 bg-indigo-50":"border-gray-200 bg-white"}`,onClick:()=>l({...n,focus_priority:"enforce"}),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${n.focus_priority==="enforce"?"border-indigo-500":"border-gray-300"}`,children:n.focus_priority==="enforce"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-500"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:"Enforce (Strict)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Only allow focus topics - other content will be locked"})]})]})})]})]}),e.jsxs("div",{className:"pt-4 border-t space-y-3",children:[e.jsx(E,{className:"text-base font-bold",children:"Reminder Frequency"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["never","daily","every_session"].map(p=>e.jsx("div",{className:`p-3 rounded-lg border-2 cursor-pointer text-center transition-all ${n.focus_reminder_frequency===p?"border-indigo-500 bg-indigo-50":"border-gray-200 bg-white"}`,onClick:()=>l({...n,focus_reminder_frequency:p}),children:e.jsx("div",{className:"font-medium capitalize",children:p==="every_session"?"Every Game":p})},p))})]})]}),n.focus_operations.length===0&&e.jsxs(ee,{className:"bg-blue-50 border-blue-200",children:[e.jsx(re,{className:"w-4 h-4 text-blue-600"}),e.jsx(te,{className:"text-blue-800 text-sm",children:"Select at least one operation above to set it as a focus topic for your child."})]})]})})]})}),e.jsxs(U,{value:"goals",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"Custom Learning Goals"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create personalized goals tailored to your child's needs"})]}),e.jsxs(R,{onClick:()=>f(!m),className:"bg-indigo-500 hover:bg-indigo-600",children:[e.jsx(Mt,{className:"w-4 h-4 mr-2"}),"Add Goal"]})]}),m&&e.jsxs(O,{className:"border-2 border-indigo-300",children:[e.jsx(F,{className:"bg-indigo-50",children:e.jsx(I,{children:"Create New Learning Goal"})}),e.jsxs(S,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"goal_title",children:"Goal Title"}),e.jsx(G,{id:"goal_title",value:d.title,onChange:p=>h({...d,title:p.target.value}),placeholder:"e.g., Master Multiplication Tables"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"goal_description",children:"Description (Optional)"}),e.jsx(Ye,{id:"goal_description",value:d.description,onChange:p=>h({...d,description:p.target.value}),placeholder:"Add more details about this goal...",rows:2})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"target_type",children:"Goal Type"}),e.jsxs("select",{id:"target_type",value:d.target_type,onChange:p=>h({...d,target_type:p.target.value}),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"games_completed",children:"Games Completed"}),e.jsx("option",{value:"stars_earned",children:"Stars Earned"}),e.jsx("option",{value:"accuracy",children:"Accuracy (%)"}),e.jsx("option",{value:"time_spent",children:"Time Spent (minutes)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"target_value",children:"Target Value"}),e.jsx(G,{id:"target_value",type:"number",min:"1",value:d.target_value,onChange:p=>h({...d,target_value:parseInt(p.target.value)||1})})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"goal_operation",children:"Operation"}),e.jsxs("select",{id:"goal_operation",value:d.operation,onChange:p=>h({...d,operation:p.target.value}),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"any",children:"Any Operation"}),c.map(p=>e.jsxs("option",{value:p.id,children:[p.emoji," ",p.name]},p.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"goal_level",children:"Difficulty Level"}),e.jsxs("select",{id:"goal_level",value:d.level,onChange:p=>h({...d,level:p.target.value}),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"any",children:"Any Level"}),x.map(p=>e.jsx("option",{value:p.id,children:p.name},p.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"goal_deadline",children:"Deadline (Optional)"}),e.jsx(G,{id:"goal_deadline",type:"date",value:d.deadline,onChange:p=>h({...d,deadline:p.target.value})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{onClick:b,className:"flex-1 bg-indigo-500 hover:bg-indigo-600",disabled:!d.title,children:"Add Goal"}),e.jsx(R,{variant:"outline",onClick:()=>f(!1),children:"Cancel"})]})]})]}),e.jsx("div",{className:"space-y-4",children:o.length===0?e.jsx(O,{className:"border-2 border-gray-200",children:e.jsxs(S,{className:"p-12 text-center",children:[e.jsx(be,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"No custom goals yet"}),e.jsx("p",{className:"text-gray-500",children:"Create goals to motivate and guide your child's learning"})]})}):o.map(p=>e.jsxs(O,{className:"border-2 border-indigo-200",children:[e.jsx(F,{className:"bg-indigo-50",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5 text-indigo-600"}),p.title]}),p.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:p.description})]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>N(p.id),className:"text-gray-400 hover:text-red-600",children:e.jsx(Tt,{className:"w-5 h-5"})})]})}),e.jsxs(S,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Type:"})," ",p.target_type.replace("_"," ")]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Target:"})," ",p.target_value]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Operation:"})," ",p.operation]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Level:"})," ",p.level]})]}),p.deadline&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsxs("span",{children:["Deadline: ",p.deadline]})]})]})]},p.id))})]})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t",children:e.jsxs(R,{onClick:j,disabled:y.isPending,className:"h-12 px-8 bg-gradient-to-r from-blue-500 to-purple-500",children:[e.jsx(wa,{className:"w-5 h-5 mr-2"}),y.isPending?"Saving...":"Save All Settings"]})})]})}function li({childEmail:t,childProgress:s}){const a=Ke(),[r,i]=P.useState(!1),[n,l]=P.useState({title:"",description:"",operation:"addition",level:"easy",target_games:5,target_accuracy:80,due_date:"",instructions:""}),{data:o=[]}=he({queryKey:["lessonAssignments",t],queryFn:async()=>{const c=Y(J),x=la(Ne(c,"customGoals"),Ee("child_email","==",t),Ee("goal_type","==","specific_operation"));return(await We(x)).docs.map(g=>({id:g.id,...g.data()}))},initialData:[],enabled:!!t}),u=ne({mutationFn:async c=>{const x=Y(J);await ra(Ne(x,"customGoals"),{...c,child_email:t,goal_type:"specific_operation",target_value:c.target_games})},onSuccess:()=>{a.invalidateQueries({queryKey:["lessonAssignments"]}),a.invalidateQueries({queryKey:["childGoals"]}),i(!1),l({title:"",description:"",operation:"addition",level:"easy",target_games:5,target_accuracy:80,due_date:"",instructions:""})}}),m=ne({mutationFn:async c=>{const x=Y(J);await na(we(x,"customGoals",c))},onSuccess:()=>{a.invalidateQueries({queryKey:["lessonAssignments"]}),a.invalidateQueries({queryKey:["childGoals"]})}}),f=()=>{n.title&&u.mutate(n)},d=c=>{const x=s.filter(_=>_.operation===c.operation&&_.level===c.level&&new Date(_.created_date)>=new Date(c.created_date)),g=x.length,w=x.length>0?x.reduce((_,A)=>_+A.correct_answers/A.total_questions*100,0)/x.length:0;return{gamesCompleted:g,avgAccuracy:Math.round(w),isComplete:g>=c.target_value&&w>=(c.target_accuracy||70)}},h=(()=>{const c={addition:{total:0,correct:0},subtraction:{total:0,correct:0},multiplication:{total:0,correct:0},division:{total:0,correct:0}};s.forEach(g=>{c[g.operation]&&(c[g.operation].total+=g.total_questions,c[g.operation].correct+=g.correct_answers)});const x=[];return Object.entries(c).forEach(([g,w])=>{if(w.total>0){const _=w.correct/w.total*100;_<70&&x.push({operation:g,level:_<50?"easy":"medium",reason:`Low accuracy: ${Math.round(_)}%`})}}),x})(),y={addition:"",subtraction:"",multiplication:"",division:""},j={easy:"bg-green-500",medium:"bg-yellow-500",hard:"bg-red-500"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Ut,{className:"w-6 h-6 text-blue-600"}),"Lesson Assignments"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create custom practice lessons tailored to your child's needs"})]}),e.jsxs(R,{onClick:()=>i(!r),className:"bg-blue-500 hover:bg-blue-600",children:[e.jsx(Mt,{className:"w-4 h-4 mr-2"}),"New Lesson"]})]}),h.length>0&&e.jsxs(ee,{className:"bg-yellow-50 border-yellow-300",children:[e.jsx(da,{className:"w-5 h-5 text-yellow-600"}),e.jsxs(te,{className:"text-yellow-800",children:[e.jsx("strong",{children:"Suggested Focus Areas:"}),e.jsx("div",{className:"mt-2 space-y-2",children:h.map((c,x)=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:y[c.operation]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium capitalize",children:[c.operation," - ",c.level]}),e.jsx("p",{className:"text-sm text-gray-600",children:c.reason})]})]}),e.jsx(R,{size:"sm",onClick:()=>{l({...n,operation:c.operation,level:c.level,title:`Practice ${c.operation.charAt(0).toUpperCase()+c.operation.slice(1)}`}),i(!0)},children:"Create Lesson"})]},x))})]})]}),r&&e.jsxs(O,{className:"border-2 border-blue-300",children:[e.jsx(F,{className:"bg-blue-50",children:e.jsx(I,{children:"Create New Lesson Assignment"})}),e.jsxs(S,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"title",children:"Lesson Title"}),e.jsx(G,{id:"title",value:n.title,onChange:c=>l({...n,title:c.target.value}),placeholder:"e.g., Master Two-Digit Addition"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"description",children:"Description"}),e.jsx(Ye,{id:"description",value:n.description,onChange:c=>l({...n,description:c.target.value}),placeholder:"What should the student learn from this lesson?",rows:3})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"operation",children:"Operation"}),e.jsxs(oe,{value:n.operation,onValueChange:c=>l({...n,operation:c}),children:[e.jsx(de,{children:e.jsx(me,{})}),e.jsxs(ue,{children:[e.jsx(M,{value:"addition",children:" Addition"}),e.jsx(M,{value:"subtraction",children:" Subtraction"}),e.jsx(M,{value:"multiplication",children:" Multiplication"}),e.jsx(M,{value:"division",children:" Division"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"level",children:"Difficulty Level"}),e.jsxs(oe,{value:n.level,onValueChange:c=>l({...n,level:c}),children:[e.jsx(de,{children:e.jsx(me,{})}),e.jsxs(ue,{children:[e.jsx(M,{value:"easy",children:"Easy"}),e.jsx(M,{value:"medium",children:"Medium"}),e.jsx(M,{value:"hard",children:"Hard"})]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"target_games",children:"Target Games"}),e.jsx(G,{id:"target_games",type:"number",min:"1",max:"50",value:n.target_games,onChange:c=>l({...n,target_games:parseInt(c.target.value)})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Number of games to complete"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"target_accuracy",children:"Target Accuracy (%)"}),e.jsx(G,{id:"target_accuracy",type:"number",min:"50",max:"100",value:n.target_accuracy,onChange:c=>l({...n,target_accuracy:parseInt(c.target.value)})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Minimum accuracy to complete"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"due_date",children:"Due Date (Optional)"}),e.jsx(G,{id:"due_date",type:"date",value:n.due_date,onChange:c=>l({...n,due_date:c.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"instructions",children:"Instructions for Student"}),e.jsx(Ye,{id:"instructions",value:n.instructions,onChange:c=>l({...n,instructions:c.target.value}),placeholder:"Any specific tips or guidance?",rows:3})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(R,{onClick:f,className:"flex-1 bg-blue-500 hover:bg-blue-600",disabled:!n.title||u.isPending,children:[e.jsx(Ya,{className:"w-4 h-4 mr-2"}),u.isPending?"Assigning...":"Assign Lesson"]}),e.jsx(R,{variant:"outline",onClick:()=>i(!1),children:"Cancel"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-bold text-lg",children:"Active Assignments"}),o.length===0?e.jsx(O,{className:"border-2 border-gray-200",children:e.jsxs(S,{className:"p-12 text-center",children:[e.jsx(Ut,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"No lessons assigned yet"}),e.jsx("p",{className:"text-gray-500",children:"Create custom lessons to guide your child's learning"})]})}):o.map(c=>{const x=d(c),g=Math.min(x.gamesCompleted/c.target_value*100,100);return e.jsxs(O,{className:`border-2 ${x.isComplete?"border-green-300 bg-green-50":"border-blue-200"}`,children:[e.jsx(F,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-3xl",children:y[c.operation]}),e.jsxs("div",{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[c.title,x.isComplete&&e.jsxs(B,{className:"bg-green-500",children:[e.jsx(ve,{className:"w-3 h-3 mr-1"}),"Completed"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(B,{className:j[c.level]+" text-white",children:c.level}),c.due_date&&e.jsxs(B,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(De,{className:"w-3 h-3"}),"Due: ",je(new Date(c.due_date),"MMM d")]})]})]})]}),c.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:c.description}),c.instructions&&e.jsx(ee,{className:"mt-2",children:e.jsxs(te,{className:"text-sm",children:[e.jsx("strong",{children:"Instructions:"})," ",c.instructions]})})]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>m.mutate(c.id),className:"text-gray-400 hover:text-red-600",children:e.jsx(Tt,{className:"w-5 h-5"})})]})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(re,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Games"})]}),e.jsxs("p",{className:"text-2xl font-bold",children:[x.gamesCompleted," / ",c.target_value]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ve,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Accuracy"})]}),e.jsxs("p",{className:"text-2xl font-bold",children:[x.avgAccuracy,"%",e.jsxs("span",{className:"text-sm text-gray-500",children:[" / ",c.target_accuracy||70,"%"]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Overall Progress"}),e.jsxs("span",{className:"font-bold",children:[Math.round(g),"%"]})]}),e.jsx(ls,{value:g,className:"h-3"})]}),x.isComplete&&e.jsxs(ee,{className:"bg-green-100 border-green-300",children:[e.jsx(ve,{className:"w-4 h-4 text-green-600"}),e.jsxs(te,{className:"text-green-800",children:[e.jsx("strong",{children:"Great job!"})," This lesson has been completed successfully."]})]})]})})]},c.id)})]})]})}function ci({childEmail:t,parentEmail:s}){var a;const r=Ke(),[i,n]=P.useState("encouragement"),[l,o]=P.useState(""),[u,m]=P.useState(""),[f,d]=P.useState(""),[h,y]=P.useState(null),[j,c]=P.useState("normal"),{data:x=[]}=he({queryKey:["messages",t,s],queryFn:async()=>{const k=Y(J),$=la(Ne(k,"messages"),Ee("parent_email","==",s),Ee("child_email","==",t));return(await We($)).docs.map(Z=>Z.data()).sort((Z,K)=>new Date(K.created_date)-new Date(Z.created_date))},initialData:[],enabled:!!t&&!!s}),g=x.filter(k=>k.child_email===s&&!k.parent_read).length,w=ne({mutationFn:async k=>{const $=Y(J);await ra(Ne($,"messages"),{parent_email:s,child_email:t,message_type:k.type,subject:k.subject,message_text:k.text,priority:k.priority,reply_to_message_id:k.replyTo||null,is_read:!1,parent_read:!0,created_date:new Date().toISOString()})},onSuccess:()=>{r.invalidateQueries({queryKey:["messages"]}),r.invalidateQueries({queryKey:["unreadMessages"]}),o(""),m(""),d(""),y(null),c("normal")}}),_=ne({mutationFn:async k=>{const $=Y(J);await zs(we($,"messages",k),{parent_read:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["messages"]}),r.invalidateQueries({queryKey:["unreadMessages"]})}}),A=ne({mutationFn:async k=>{const $=Y(J);await na(we($,"messages",k))},onSuccess:()=>{r.invalidateQueries({queryKey:["messages"]})}}),D={encouragement:[{subject:"You're Doing Great!",text:"I'm so proud of how hard you're working! Keep it up! "},{subject:"Amazing Progress!",text:"You're doing an amazing job! Your effort really shows! "},{subject:"Math Superstar",text:"Great progress today! You're a math superstar! "},{subject:"Keep Going!",text:"I love seeing you tackle these challenges! Keep going! "},{subject:"So Proud of You",text:"Your determination is inspiring! Way to go! "}],feedback:[{subject:"Nice Improvement!",text:"I noticed you're improving in addition. Excellent work!"},{subject:"Great Accuracy",text:"Your accuracy is getting better every day!"},{subject:"Love Your Effort",text:"I can see you're putting in great effort. Keep it up!"},{subject:"Wonderful Progress",text:"You're making wonderful progress. I'm proud of you!"}],reminder:[{subject:"Daily Challenge",text:"Don't forget to complete your daily challenge today! "},{subject:"Practice Time",text:"Remember to practice your multiplication today!"},{subject:"Almost There",text:"You're close to reaching your goal! Keep practicing! "},{subject:"Lesson Time",text:"Time to work on your assigned lesson! You've got this! "}],celebration:[{subject:"Congratulations!",text:"Congratulations on completing your goal! "},{subject:"Three Stars!",text:"You earned all 3 stars! Amazing! "},{subject:"Incredible Achievement",text:"What an incredible achievement! So proud! "},{subject:"Math Champion",text:"You're a math champion! Great job! "}],question:[{subject:"How's Math Going?",text:"How are you finding the math challenges? Any topics you'd like more help with?"},{subject:"Need Help?",text:"Is there anything you're struggling with? I'm here to help!"},{subject:"What's Your Favorite?",text:"What's your favorite math topic so far?"}]},b={encouragement:Kt,feedback:be,reminder:Te,celebration:qe,question:Oe,response:mt},N={encouragement:"from-pink-400 to-rose-500",feedback:"from-blue-400 to-purple-500",reminder:"from-yellow-400 to-orange-500",celebration:"from-green-400 to-emerald-500",question:"from-indigo-400 to-blue-500",response:"from-gray-400 to-slate-500"},p={low:"text-gray-500",normal:"text-blue-500",high:"text-red-500"},C=()=>{var k,$;l.trim()&&w.mutate({type:h?"response":i,text:l,subject:u||(($=(k=D[i])==null?void 0:k[0])==null?void 0:$.subject)||"Message from Parent",priority:j,replyTo:h==null?void 0:h.id})},T=k=>{d(k),o(k.text),m(k.subject)},z=k=>{y(k),n("response"),m(`Re: ${k.subject}`),o(""),window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Oe,{className:"w-6 h-6 text-green-600"}),"Communication Center",g>0&&e.jsxs(B,{className:"bg-red-500 text-white animate-pulse",children:[g," New"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Send messages and receive responses from your child"})]})}),e.jsxs(ee,{className:"bg-blue-50 border-blue-200",children:[e.jsx(Te,{className:"w-5 h-5 text-blue-600"}),e.jsxs(te,{className:"text-blue-800",children:[e.jsx("strong",{children:"Real-time messaging with your child!"})," Messages appear instantly in their inbox, and they can respond directly. Both of you will see notifications for new messages."]})]}),h&&e.jsxs(ee,{className:"bg-purple-50 border-purple-300",children:[e.jsx(mt,{className:"w-5 h-5 text-purple-600"}),e.jsx(te,{className:"text-purple-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Replying to:"})," ",h.subject,e.jsxs("p",{className:"text-sm mt-1 italic",children:['"',h.message_text,'"']})]}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>y(null),className:"text-purple-600",children:"Cancel"})]})})]}),e.jsxs(O,{className:"border-2 border-green-300",children:[e.jsx(F,{className:"bg-green-50",children:e.jsx(I,{children:h?"Send Reply":"Send a Message"})}),e.jsxs(S,{className:"p-6 space-y-4",children:[!h&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"message_type",children:"Message Type"}),e.jsxs(oe,{value:i,onValueChange:n,children:[e.jsx(de,{children:e.jsx(me,{})}),e.jsxs(ue,{children:[e.jsx(M,{value:"encouragement",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-4 h-4"}),"Encouragement"]})}),e.jsx(M,{value:"feedback",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"Feedback"]})}),e.jsx(M,{value:"reminder",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4"}),"Reminder"]})}),e.jsx(M,{value:"celebration",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4"}),"Celebration"]})}),e.jsx(M,{value:"question",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"}),"Question"]})})]})]})]}),!h&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Quick Templates"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-40 overflow-y-auto",children:(a=D[i])==null?void 0:a.map((k,$)=>e.jsx(R,{variant:"outline",className:"justify-start text-left h-auto py-3 px-4",onClick:()=>T(k),children:e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm",children:k.subject}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:k.text})]})},$))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"subject",children:"Subject"}),e.jsx(G,{id:"subject",value:u,onChange:k=>m(k.target.value),placeholder:"Message subject..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"message_text",children:"Message"}),e.jsx(Ye,{id:"message_text",value:l,onChange:k=>o(k.target.value),placeholder:"Write your message...",rows:4,className:"resize-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"priority",children:"Priority"}),e.jsxs(oe,{value:j,onValueChange:c,children:[e.jsx(de,{children:e.jsx(me,{})}),e.jsxs(ue,{children:[e.jsx(M,{value:"low",children:"Low Priority"}),e.jsx(M,{value:"normal",children:"Normal"}),e.jsx(M,{value:"high",children:"High Priority"})]})]})]}),e.jsxs(R,{onClick:C,disabled:!l.trim()||w.isPending,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600",children:[e.jsx(Ya,{className:"w-4 h-4 mr-2"}),w.isPending?"Sending...":"Send Message"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-bold text-lg",children:"Message History"}),e.jsxs(B,{variant:"outline",children:[x.length," Messages"]})]}),x.length===0?e.jsx(O,{className:"border-2 border-gray-200",children:e.jsxs(S,{className:"p-12 text-center",children:[e.jsx(Oe,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"No messages yet"}),e.jsx("p",{className:"text-gray-500",children:"Start a conversation with your child!"})]})}):x.map(k=>{const $=b[k.message_type]||Oe,Z=N[k.message_type]||"from-gray-400 to-gray-500",K=k.child_email===s,V=K&&!k.parent_read;return e.jsx(O,{className:`border-2 transition-all ${V?"border-blue-400 bg-blue-50 shadow-lg":"border-gray-200 hover:shadow-md"}`,children:e.jsx(S,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br ${Z} flex items-center justify-center flex-shrink-0`,children:e.jsx($,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx(B,{className:`bg-gradient-to-r ${Z} text-white`,children:k.message_type}),K&&e.jsxs(B,{className:"bg-purple-500 text-white",children:[e.jsx(mt,{className:"w-3 h-3 mr-1"}),"Reply from child"]}),k.priority!=="normal"&&e.jsxs(B,{variant:"outline",className:p[k.priority],children:[e.jsx(da,{className:"w-3 h-3 mr-1"}),k.priority]}),V&&e.jsx(B,{className:"bg-blue-500 text-white animate-pulse",children:"NEW"}),e.jsx("span",{className:"text-sm text-gray-500 ml-auto",children:je(new Date(k.created_date),"MMM d, h:mm a")})]}),e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:k.subject}),e.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:k.message_text}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[K&&e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>z(k),className:"text-purple-600 border-purple-300",children:[e.jsx(mt,{className:"w-4 h-4 mr-1"}),"Reply"]}),V&&e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>_.mutate(k.id),className:"text-blue-600 border-blue-300",children:[e.jsx(ve,{className:"w-4 h-4 mr-1"}),"Mark as Read"]}),e.jsxs(R,{size:"sm",variant:"ghost",onClick:()=>{confirm("Delete this message?")&&A.mutate(k.id)},className:"text-red-600",children:[e.jsx(Tt,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]})]})})},k.id)})]}),e.jsxs(O,{className:"border-2 border-purple-200 bg-purple-50",children:[e.jsx(F,{children:e.jsx(I,{className:"text-lg",children:"Quick Praise Buttons"})}),e.jsxs(S,{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs(R,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>{n("encouragement"),m("Great job today!"),o("Great job today! "),C()},children:[e.jsx(be,{className:"w-6 h-6 text-yellow-500"}),e.jsx("span",{className:"text-xs",children:"Great Job!"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>{n("encouragement"),m("I'm proud of you!"),o("I'm proud of you! "),C()},children:[e.jsx(Kt,{className:"w-6 h-6 text-pink-500"}),e.jsx("span",{className:"text-xs",children:"Proud!"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>{n("encouragement"),m("Keep it up!"),o("Keep it up! "),C()},children:[e.jsx(yr,{className:"w-6 h-6 text-blue-500"}),e.jsx("span",{className:"text-xs",children:"Keep Going!"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>{n("celebration"),m("Amazing work!"),o("Amazing work! "),C()},children:[e.jsx(qe,{className:"w-6 h-6 text-green-500"}),e.jsx("span",{className:"text-xs",children:"Amazing!"})]})]})]})]})}function oi({myChildren:t,parentEmail:s}){const a=Ke(),[r,i]=P.useState(null),[n,l]=P.useState(""),o=ne({mutationFn:async({childEmail:d,newName:h})=>{const y=Y(J),j=(await We(Ne(y,"users"))).docs.find(c=>c.data().email===d);if(!j)throw new Error("Child not found");await bt(we(y,"users",j.id),{child_name:h},{merge:!0})},onSuccess:()=>{a.invalidateQueries({queryKey:["allUsers"]}),i(null),l("")}}),u=ne({mutationFn:async d=>{const h=Y(J),y=(await We(Ne(h,"users"))).docs.find(j=>j.data().email===d);if(!y)throw new Error("Child not found");await bt(we(h,"users",y.id),{parental_controls:{daily_time_limit:0,allowed_operations:["addition","subtraction","multiplication","division"],allowed_levels:["easy","medium","hard"],focus_operations:[],disabled_features:[]}},{merge:!0})},onSuccess:()=>{a.invalidateQueries({queryKey:["allUsers"]})}}),m=d=>{n.trim()&&o.mutate({childEmail:d,newName:n})},f=d=>{var h,y;const j=d.parental_controls&&Object.keys(d.parental_controls).length>0,c=j&&(d.parental_controls.daily_time_limit>0||((h=d.parental_controls.disabled_features)==null?void 0:h.length)>0||((y=d.parental_controls.allowed_operations)==null?void 0:y.length)<4);return{hasControls:j,hasRestrictions:c,status:c?"restricted":j?"monitored":"open"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Wt,{className:"w-6 h-6 text-purple-600"}),"Student Account Management"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage linked student accounts and their settings"})]}),e.jsxs(ee,{className:"bg-blue-50 border-blue-200",children:[e.jsx(Te,{className:"w-5 h-5 text-blue-600"}),e.jsxs(te,{className:"text-blue-800",children:[e.jsx("strong",{children:"Managing Multiple Students:"})," You can monitor and control settings for all students linked to your account. Each student maintains their own progress and achievements while you guide their learning journey."]})]}),e.jsxs(O,{className:"border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",children:[e.jsx(F,{children:e.jsxs(I,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Account Overview"}),e.jsxs(B,{className:"bg-purple-500 text-white text-lg px-4 py-2",children:[t.length," ",t.length===1?"Student":"Students"]})]})}),e.jsxs(S,{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Va,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Active Students"})]}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:t.length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ve,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"With Controls"})]}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:t.filter(d=>f(d).hasControls).length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(qe,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Combined Stars"})]}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:t.reduce((d,h)=>d+(h.total_stars_earned||0),0)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-bold text-lg",children:"Student Accounts"}),t.length===0?e.jsx(O,{className:"border-2 border-gray-200",children:e.jsxs(S,{className:"p-12 text-center",children:[e.jsx(Wt,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Students Linked"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Have your students add your email (",s,") as their parent/teacher email in their profile settings."]}),e.jsxs(ee,{className:"bg-blue-50 border-blue-200 text-left",children:[e.jsx(Te,{className:"w-5 h-5 text-blue-600"}),e.jsxs(te,{className:"text-blue-800",children:[e.jsx("strong",{children:"How students can link their account:"}),e.jsxs("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Go to their Avatar/Profile page"}),e.jsx("li",{children:'Scroll to "Parent/Teacher Access" section'}),e.jsxs("li",{children:["Enter your email: ",e.jsx("strong",{children:s})]}),e.jsx("li",{children:"Click Save"})]})]})]})]})}):t.map(d=>{var h,y,j,c,x,g,w,_,A,D;const b=f(d),N={avatar_skin_tone:d.avatar_skin_tone||"medium",avatar_hair_style:d.avatar_hair_style||"short",avatar_hair_color:d.avatar_hair_color||"brown",avatar_eyes:d.avatar_eyes||"normal",avatar_outfit:d.avatar_outfit||"casual",avatar_accessory:d.avatar_accessory||"none"},p={open:"bg-green-100 text-green-700 border-green-300",monitored:"bg-blue-100 text-blue-700 border-blue-300",restricted:"bg-orange-100 text-orange-700 border-orange-300"},C={open:ve,monitored:Ve,restricted:Qt}[b.status];return e.jsx(O,{className:"border-2 border-gray-200 hover:shadow-lg transition-shadow",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Wa,{avatarData:N,size:"medium"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold",children:d.child_name||d.full_name||"Student"}),e.jsxs(B,{className:p[b.status],children:[e.jsx(C,{className:"w-3 h-3 mr-1"}),b.status]})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:d.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsxs("span",{children:["Joined ",je(new Date(d.created_date),"MMM d, yyyy")]})]})]}),r===d.email?e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(G,{placeholder:"Display name",value:n,onChange:T=>l(T.target.value),className:"w-full"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{size:"sm",onClick:()=>m(d.email),disabled:o.isPending,children:"Save"}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>{i(null),l("")},children:"Cancel"})]})]}):e.jsxs(R,{size:"sm",variant:"outline",className:"mt-3",onClick:()=>{i(d.email),l(d.child_name||"")},children:[e.jsx(za,{className:"w-3 h-3 mr-1"}),"Edit Name"]})]})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(be,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Stars"})]}),e.jsx("p",{className:"text-xl font-bold text-yellow-700",children:d.total_stars_earned||0})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(qe,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Coins"})]}),e.jsx("p",{className:"text-xl font-bold text-blue-700",children:d.coins||0})]}),e.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(Ve,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Badges"})]}),e.jsx("p",{className:"text-xl font-bold text-purple-700",children:((h=d.earned_badges)==null?void 0:h.length)||0})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(Ue,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Time Limit"})]}),e.jsxs("p",{className:"text-lg font-bold text-green-700",children:[((y=d.parental_controls)==null?void 0:y.daily_time_limit)||"",((j=d.parental_controls)==null?void 0:j.daily_time_limit)>0&&"m"]})]})]})]}),b.hasControls&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-bold text-sm",children:"Active Controls:"}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>{confirm("Reset all parental controls for this student?")&&u.mutate(d.email)},children:"Reset Controls"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[((c=d.parental_controls)==null?void 0:c.daily_time_limit)>0&&e.jsxs(B,{variant:"outline",className:"justify-start",children:[e.jsx(Ue,{className:"w-3 h-3 mr-1"}),d.parental_controls.daily_time_limit,"m/day"]}),((g=(x=d.parental_controls)==null?void 0:x.allowed_operations)==null?void 0:g.length)<4&&e.jsxs(B,{variant:"outline",className:"justify-start",children:[e.jsx(ba,{className:"w-3 h-3 mr-1"}),4-d.parental_controls.allowed_operations.length," ops blocked"]}),((_=(w=d.parental_controls)==null?void 0:w.focus_operations)==null?void 0:_.length)>0&&e.jsxs(B,{variant:"outline",className:"justify-start bg-purple-50",children:[e.jsx(be,{className:"w-3 h-3 mr-1"}),d.parental_controls.focus_operations.length," focus areas"]}),((D=(A=d.parental_controls)==null?void 0:A.disabled_features)==null?void 0:D.length)>0&&e.jsxs(B,{variant:"outline",className:"justify-start",children:[e.jsx(ba,{className:"w-3 h-3 mr-1"}),d.parental_controls.disabled_features.length," features disabled"]})]})]})]})},d.email)})]}),e.jsxs(O,{className:"border-2 border-blue-200 bg-blue-50",children:[e.jsx(F,{children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5 text-blue-600"}),"Account Management Tips"]})}),e.jsxs(S,{className:"space-y-3 text-sm text-blue-900",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Adding Students:"})," Have each student add your email in their profile settings to link their account to yours."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Display Names:"})," Set custom display names to easily identify students (especially useful for teachers with multiple students)."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Controls:"}),' Each student can have individual parental controls. Configure them in the "Controls" tab.']}),e.jsxs("p",{children:[e.jsx("strong",{children:"Privacy:"})," Students cannot see messages between their account and yours. All communication is one-way (parent to child)."]})]})]})]})}function di({childEmail:t,childProgress:s,childDailyChallenges:a}){var r,i;const[n,l]=P.useState("week"),[o,u]=P.useState("all"),m=(()=>{let b;const N=new Date;switch(n){case"week":b=Bs(N);break;case"month":b=cr(N);break;case"all":b=new Date(0);break;default:b=Gt(N,7)}const p=s.filter(C=>new Date(C.created_date)>=b);return o==="all"?p:p.filter(C=>C.operation===o)})(),f=()=>{const b={};return Array.from({length:7},(N,p)=>{const C=je(Gt(new Date,6-p),"yyyy-MM-dd");return b[C]={date:je(Gt(new Date,6-p),"EEE"),games:0,accuracy:0,totalQuestions:0,correctAnswers:0},C}),m.forEach(N=>{const p=je(new Date(N.created_date),"yyyy-MM-dd");b[p]&&(b[p].games++,b[p].totalQuestions+=N.total_questions,b[p].correctAnswers+=N.correct_answers)}),Object.values(b).map(N=>({...N,accuracy:N.totalQuestions>0?Math.round(N.correctAnswers/N.totalQuestions*100):0}))},d=()=>{const b={addition:0,subtraction:0,multiplication:0,division:0};return m.forEach(N=>{b[N.operation]!==void 0&&b[N.operation]++}),Object.entries(b).map(([N,p])=>({name:N.charAt(0).toUpperCase()+N.slice(1),value:p,color:N==="addition"?"#10b981":N==="subtraction"?"#3b82f6":N==="multiplication"?"#8b5cf6":"#f59e0b"}))},h=()=>{const b={addition:{total:0,correct:0},subtraction:{total:0,correct:0},multiplication:{total:0,correct:0},division:{total:0,correct:0}};return m.forEach(N=>{b[N.operation]&&(b[N.operation].total+=N.total_questions,b[N.operation].correct+=N.correct_answers)}),Object.entries(b).map(([N,p])=>({skill:N.charAt(0).toUpperCase()+N.slice(1),score:p.total>0?Math.round(p.correct/p.total*100):0}))},y=()=>{const b={Morning:0,Afternoon:0,Evening:0,Night:0};return m.forEach(N=>{const p=new Date(N.created_date).getHours();p>=6&&p<12?b.Morning++:p>=12&&p<17?b.Afternoon++:p>=17&&p<21?b.Evening++:b.Night++}),Object.entries(b).map(([N,p])=>({name:N,games:p}))},j=()=>m.slice(-10).reverse().map((b,N)=>({game:`Game ${N+1}`,accuracy:Math.round(b.correct_answers/b.total_questions*100),speed:b.time_taken})),c=()=>{if(m.length===0)return{totalGames:0,avgAccuracy:0,avgSpeed:0,totalStars:0,improvementRate:0};const b=m.length,N=Math.round(m.reduce((K,V)=>K+V.correct_answers/V.total_questions*100,0)/b),p=Math.round(m.reduce((K,V)=>K+V.time_taken,0)/b),C=m.reduce((K,V)=>K+(V.stars_earned||0),0),T=m.slice(0,5),z=m.slice(5,10),k=T.length>0?T.reduce((K,V)=>K+V.correct_answers/V.total_questions*100,0)/T.length:0,$=z.length>0?z.reduce((K,V)=>K+V.correct_answers/V.total_questions*100,0)/z.length:0,Z=$>0?Math.round((k-$)/$*100):0;return{totalGames:b,avgAccuracy:N,avgSpeed:p,totalStars:C,improvementRate:Z}},x=f(),g=d(),w=h(),_=y(),A=j(),D=c();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(jt,{className:"w-6 h-6 text-purple-600"}),"Advanced Analytics Dashboard"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Comprehensive performance insights and trends"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(oe,{value:n,onValueChange:l,children:[e.jsx(de,{className:"w-32",children:e.jsx(me,{})}),e.jsxs(ue,{children:[e.jsx(M,{value:"week",children:"This Week"}),e.jsx(M,{value:"month",children:"This Month"}),e.jsx(M,{value:"all",children:"All Time"})]})]}),e.jsxs(oe,{value:o,onValueChange:u,children:[e.jsx(de,{className:"w-32",children:e.jsx(me,{})}),e.jsxs(ue,{children:[e.jsx(M,{value:"all",children:"All Ops"}),e.jsx(M,{value:"addition",children:"Addition"}),e.jsx(M,{value:"subtraction",children:"Subtraction"}),e.jsx(M,{value:"multiplication",children:"Multiplication"}),e.jsx(M,{value:"division",children:"Division"})]})]}),e.jsx(R,{variant:"outline",size:"icon",children:e.jsx(xr,{className:"w-4 h-4"})}),e.jsxs(R,{variant:"outline",children:[e.jsx(lr,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(O,{className:"border-2 border-blue-200",children:e.jsxs(S,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(re,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Games"})]}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:D.totalGames})]})}),e.jsx(O,{className:"border-2 border-green-200",children:e.jsxs(S,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ja,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Accuracy"})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[D.avgAccuracy,"%"]})]})}),e.jsx(O,{className:"border-2 border-purple-200",children:e.jsxs(S,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Speed"})]}),e.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[D.avgSpeed,"s"]})]})}),e.jsx(O,{className:"border-2 border-yellow-200",children:e.jsxs(S,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ja,{className:"w-5 h-5 text-yellow-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Stars"})]}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:D.totalStars})]})}),e.jsx(O,{className:`border-2 ${D.improvementRate>=0?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:e.jsxs(S,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[D.improvementRate>=0?e.jsx(Nt,{className:"w-5 h-5 text-green-600"}):e.jsx(Ja,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Trend"})]}),e.jsxs("p",{className:`text-3xl font-bold ${D.improvementRate>=0?"text-green-600":"text-red-600"}`,children:[D.improvementRate>0?"+":"",D.improvementRate,"%"]})]})})]}),e.jsx(O,{className:"border-2 border-purple-200",children:e.jsx(S,{className:"p-6",children:e.jsxs(ca,{defaultValue:"activity",className:"w-full",children:[e.jsxs(oa,{className:"grid w-full grid-cols-5 mb-6",children:[e.jsx(Q,{value:"activity",children:"Activity"}),e.jsx(Q,{value:"skills",children:"Skills"}),e.jsx(Q,{value:"distribution",children:"Distribution"}),e.jsx(Q,{value:"trends",children:"Trends"}),e.jsx(Q,{value:"time",children:"Time"})]}),e.jsx(U,{value:"activity",children:e.jsxs(O,{children:[e.jsx(F,{children:e.jsx(I,{children:"Daily Activity (Last 7 Days)"})}),e.jsx(S,{children:e.jsx(Se,{width:"100%",height:350,children:e.jsxs(zn,{data:x,children:[e.jsx(He,{strokeDasharray:"3 3"}),e.jsx(Me,{dataKey:"date"}),e.jsx(pe,{yAxisId:"left"}),e.jsx(pe,{yAxisId:"right",orientation:"right"}),e.jsx(Pe,{}),e.jsx(Qe,{}),e.jsx(ke,{yAxisId:"left",type:"monotone",dataKey:"games",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6,name:"Games Played"}),e.jsx(ke,{yAxisId:"right",type:"monotone",dataKey:"accuracy",stroke:"#10b981",fill:"#10b981",fillOpacity:.6,name:"Accuracy %"})]})})})]})}),e.jsx(U,{value:"skills",children:e.jsxs(O,{children:[e.jsx(F,{children:e.jsx(I,{children:"Skills Assessment"})}),e.jsx(S,{children:e.jsx(Se,{width:"100%",height:400,children:e.jsxs(Bn,{data:w,children:[e.jsx(ds,{}),e.jsx(st,{dataKey:"skill"}),e.jsx(at,{domain:[0,100]}),e.jsx(dt,{name:"Accuracy %",dataKey:"score",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6}),e.jsx(Pe,{})]})})})]})}),e.jsx(U,{value:"distribution",children:e.jsxs(O,{children:[e.jsx(F,{children:e.jsx(I,{children:"Operation Distribution"})}),e.jsx(S,{children:e.jsx(Se,{width:"100%",height:400,children:e.jsxs(Gn,{children:[e.jsx(Ae,{data:g,cx:"50%",cy:"50%",labelLine:!1,label:b=>`${b.name}: ${b.value}`,outerRadius:120,fill:"#8884d8",dataKey:"value",children:g.map((b,N)=>e.jsx(Xa,{fill:b.color},`cell-${N}`))}),e.jsx(Pe,{})]})})})]})}),e.jsx(U,{value:"trends",children:e.jsxs(O,{children:[e.jsx(F,{children:e.jsx(I,{children:"Recent Performance Trend"})}),e.jsx(S,{children:e.jsx(Se,{width:"100%",height:350,children:e.jsxs(Za,{data:A,children:[e.jsx(He,{strokeDasharray:"3 3"}),e.jsx(Me,{dataKey:"game"}),e.jsx(pe,{yAxisId:"left"}),e.jsx(pe,{yAxisId:"right",orientation:"right"}),e.jsx(Pe,{}),e.jsx(Qe,{}),e.jsx(wt,{yAxisId:"left",type:"monotone",dataKey:"accuracy",stroke:"#10b981",strokeWidth:3,name:"Accuracy %"}),e.jsx(wt,{yAxisId:"right",type:"monotone",dataKey:"speed",stroke:"#f59e0b",strokeWidth:3,name:"Speed (seconds)"})]})})})]})}),e.jsx(U,{value:"time",children:e.jsxs(O,{children:[e.jsx(F,{children:e.jsx(I,{children:"Time of Day Analysis"})}),e.jsxs(S,{children:[e.jsx(Se,{width:"100%",height:350,children:e.jsxs(aa,{data:_,children:[e.jsx(He,{strokeDasharray:"3 3"}),e.jsx(Me,{dataKey:"name"}),e.jsx(pe,{}),e.jsx(Pe,{}),e.jsx(Qe,{}),e.jsx(Ge,{dataKey:"games",fill:"#8b5cf6",name:"Games Played"})]})}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-600 mb-1",children:"Most Active Time"}),e.jsx("p",{className:"font-bold text-blue-700",children:((r=_.reduce((b,N)=>N.games>b.games?N:b,_[0]))==null?void 0:r.name)||"N/A"})]}),e.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-600 mb-1",children:"Recommended Practice Time"}),e.jsx("p",{className:"font-bold text-purple-700",children:((i=_.reduce((b,N)=>N.games>b.games?N:b,_[0]))==null?void 0:i.name)||"N/A"})]})]})]})]})})]})})})]})}function Fi(){const t=Ke(),s=$s(),[a,r]=P.useState(null),[i,n]=P.useState("overview"),[l,o]=P.useState(!1),{user:u}=qs(),{data:m}=he({queryKey:["currentUser"],queryFn:async()=>({email:"parent@example.com",is_parent_mode:!0,is_premium_parent:!1,is_family_teacher:!1}),initialData:{email:"parent@example.com",is_parent_mode:!0,is_premium_parent:!1,is_family_teacher:!1}}),{data:f=[]}=he({queryKey:["allUsers"],queryFn:async()=>[],initialData:[]}),d=f.filter(_=>_.parent_email===(m==null?void 0:m.email)),{data:h=[]}=he({queryKey:["childProgress",a],queryFn:async()=>[],initialData:[],enabled:!!a}),{data:y=[]}=he({queryKey:["childDailyChallenges",a],queryFn:async()=>[],initialData:[],enabled:!!a}),{data:j=[]}=he({queryKey:["childGoals",a],queryFn:async()=>[],initialData:[],enabled:!!a}),c=ne({mutationFn:async _=>{throw console.log("Parent mode toggle:",_),alert("Parent mode settings are currently being migrated to Firebase. This feature will be available soon!"),new Error("Parent mode pending implementation")},onSuccess:()=>{t.invalidateQueries({queryKey:["currentUser"]})}}),x=d.find(_=>_.email===a),g=f.find(_=>_.email===a),w=!!(u!=null&&u.hasPremiumAccess);return m!=null&&m.is_parent_mode?w?(v.useEffect(()=>{u&&o(!u.hasPremiumAccess)},[u]),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[l&&e.jsx(or,{featureName:"Parent & Teacher Dashboard",description:"Monitor your child's progress with detailed analytics, set learning goals, manage parental controls, and communicate with AI tutors.",isOpen:l,onClose:()=>o(!1)}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Parent & Teacher Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive learning management & monitoring"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(R,{variant:"outline",onClick:()=>s($t("Subscription")),children:[e.jsx(Ks,{className:"w-4 h-4 mr-2"}),"Manage Subscription"]}),e.jsxs(R,{variant:"outline",onClick:()=>c.mutate(!1),children:[e.jsx(za,{className:"w-4 h-4 mr-2"}),"Exit Parent Mode"]}),e.jsxs(R,{className:"bg-gradient-to-r from-yellow-400 to-orange-500",onClick:()=>s($t("Subscription")),children:[e.jsx(qt,{className:"w-4 h-4 mr-2"}),(m==null?void 0:m.subscription_tier)==="family_teacher"?"Family Plan":"Premium"]})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx(Vn,{myChildren:d,selectedChildEmail:a,onSelectChild:r,currentUserEmail:m==null?void 0:m.email})}),x?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(O,{className:"border-2 border-blue-200 hover:shadow-lg transition-all cursor-pointer hover:scale-105",onClick:()=>n("communication"),children:e.jsxs(S,{className:"p-4 text-center",children:[e.jsx(mr,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),e.jsx("h3",{className:"font-bold text-sm",children:"Quick Message"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Send encouragement"})]})}),e.jsx(O,{className:"border-2 border-green-200 hover:shadow-lg transition-all cursor-pointer hover:scale-105",onClick:()=>n("lessons"),children:e.jsxs(S,{className:"p-4 text-center",children:[e.jsx(hr,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),e.jsx("h3",{className:"font-bold text-sm",children:"New Assignment"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Create lesson"})]})}),e.jsx(O,{className:"border-2 border-purple-200 hover:shadow-lg transition-all cursor-pointer hover:scale-105",onClick:()=>n("analytics"),children:e.jsxs(S,{className:"p-4 text-center",children:[e.jsx(jt,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),e.jsx("h3",{className:"font-bold text-sm",children:"View Report"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Generate PDF"})]})}),e.jsx(O,{className:"border-2 border-orange-200 hover:shadow-lg transition-all cursor-pointer hover:scale-105",onClick:()=>n("goals"),children:e.jsxs(S,{className:"p-4 text-center",children:[e.jsx(re,{className:"w-8 h-8 mx-auto mb-2 text-orange-600"}),e.jsx("h3",{className:"font-bold text-sm",children:"Set Goal"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"New challenge"})]})})]}),e.jsx(Hn,{childProgress:h,childDailyChallenges:y,selectedChild:x}),e.jsx(O,{className:"border-2 border-purple-200 shadow-lg",children:e.jsx(S,{className:"p-6",children:e.jsxs(ca,{value:i,onValueChange:n,className:"w-full",children:[e.jsxs(oa,{className:"grid w-full grid-cols-4 lg:grid-cols-8 mb-6",children:[e.jsxs(Q,{value:"overview",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Overview"]}),e.jsxs(Q,{value:"analytics",children:[e.jsx(Nt,{className:"w-4 h-4 mr-2"}),"Analytics"]}),e.jsxs(Q,{value:"lessons",children:[e.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Lessons"]}),e.jsxs(Q,{value:"goals",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Goals"]}),e.jsxs(Q,{value:"communication",children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Messages"]}),e.jsxs(Q,{value:"team",children:[e.jsx(xt,{className:"w-4 h-4 mr-2"}),"Team"]}),e.jsxs(Q,{value:"controls",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Controls"]}),e.jsxs(Q,{value:"accounts",children:[e.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Accounts"]})]}),e.jsxs(U,{value:"overview",className:"space-y-6",children:[e.jsx(Qn,{childProgress:h,childDailyChallenges:y}),e.jsx(Wn,{childProgress:h,childDailyChallenges:y})]}),e.jsx(U,{value:"analytics",className:"space-y-6",children:e.jsx(di,{childEmail:a,childProgress:h,childDailyChallenges:y})}),e.jsx(U,{value:"lessons",className:"space-y-6",children:e.jsx(li,{childEmail:a,childProgress:h})}),e.jsx(U,{value:"goals",className:"space-y-6",children:e.jsx(Un,{childEmail:a,childGoals:j,childProgress:h,childDailyChallenges:y})}),e.jsx(U,{value:"communication",className:"space-y-6",children:e.jsx(ci,{childEmail:a,parentEmail:m==null?void 0:m.email})}),e.jsx(U,{value:"team",className:"space-y-6",children:e.jsx(ei,{})}),e.jsx(U,{value:"controls",className:"space-y-6",children:e.jsx(ii,{childEmail:a,currentControls:(g==null?void 0:g.parental_controls)||{}})}),e.jsx(U,{value:"accounts",className:"space-y-6",children:e.jsx(oi,{myChildren:d,parentEmail:m==null?void 0:m.email})})]})})})]}):e.jsx(O,{className:"border-2 border-gray-200",children:e.jsxs(S,{className:"p-12 text-center",children:[e.jsx(xt,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Child Selected"}),e.jsx("p",{className:"text-gray-600 mb-6",children:d.length>0?"Select a child from above to view their progress":"Add a child account to start monitoring their progress"}),d.length===0&&e.jsxs(ee,{className:"bg-blue-50 border-blue-200 text-left",children:[e.jsx(Te,{className:"w-5 h-5 text-blue-600"}),e.jsxs(te,{className:"text-blue-800",children:[e.jsx("strong",{children:"How to add a child:"}),e.jsxs("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Have your child create an account"}),e.jsx("li",{children:"In their account settings, they can add your email as their parent"}),e.jsx("li",{children:"Their progress will then appear in your portal"})]})]})]})]})})]})):e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs(O,{className:"border-4 border-yellow-300 shadow-2xl",children:[e.jsxs(F,{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-center py-12",children:[e.jsx(qt,{className:"w-20 h-20 mx-auto mb-4"}),e.jsx(I,{className:"text-4xl mb-2",children:"Unlock Premium Parent Features"}),e.jsx("p",{className:"text-xl opacity-90",children:"Get full access to advanced parental controls and analytics"})]}),e.jsxs(S,{className:"p-8 space-y-6",children:[e.jsxs(ee,{className:"bg-blue-50 border-blue-200",children:[e.jsx(Ve,{className:"w-5 h-5 text-blue-600"}),e.jsxs(te,{className:"text-blue-800",children:[e.jsx("strong",{children:"Premium Parent Subscription Includes:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Advanced parental controls (time limits, content filtering)"}),e.jsx("li",{children:"Detailed progress analytics and performance insights"}),e.jsx("li",{children:"Custom goal setting and weekly/monthly reports"}),e.jsx("li",{children:"Focus topic recommendations"}),e.jsx("li",{children:"Feature access management"}),e.jsx("li",{children:"Lesson assignment capabilities"}),e.jsx("li",{children:"Communication center with your child"}),e.jsx("li",{children:"Student account management tools"})]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs(R,{className:"h-14 px-8 text-lg bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600",onClick:()=>s($t("Subscription")),children:[e.jsx(qt,{className:"w-5 h-5 mr-2"}),"View Subscription Plans"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Starting at $4.99/month  Cancel anytime"})]})]})]})}):e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs(O,{className:"border-4 border-purple-300 shadow-2xl",children:[e.jsxs(F,{className:"bg-gradient-to-r from-purple-500 to-blue-500 text-white text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx(I,{className:"text-4xl mb-2",children:"Parent & Teacher Portal"}),e.jsx("p",{className:"text-xl opacity-90",children:"Monitor and guide your child's learning journey"})]}),e.jsxs(S,{className:"p-8 space-y-6",children:[e.jsxs(ee,{className:"bg-blue-50 border-blue-200",children:[e.jsx(Te,{className:"w-5 h-5 text-blue-600"}),e.jsxs(te,{className:"text-blue-800",children:[e.jsx("strong",{children:"Welcome to the Parent Portal!"})," This feature allows you to:",e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"View detailed progress across all game modes"}),e.jsx("li",{children:"Track performance trends and identify strengths/weaknesses"}),e.jsx("li",{children:"Set custom goals and challenges"}),e.jsx("li",{children:"Monitor daily challenge participation"}),e.jsx("li",{children:"Control app usage and customize learning focus"}),e.jsx("li",{children:"Set time limits and manage feature access"}),e.jsx("li",{children:"Assign specific lessons and practice areas"}),e.jsx("li",{children:"Communicate directly with your child"}),e.jsx("li",{children:"Manage multiple student accounts"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border-2 border-purple-200",children:[e.jsx(Nt,{className:"w-12 h-12 mx-auto mb-3 text-purple-600"}),e.jsx("h3",{className:"font-bold mb-2",children:"Track Progress"}),e.jsx("p",{className:"text-sm text-gray-600",children:"See detailed statistics and performance trends"})]}),e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border-2 border-blue-200",children:[e.jsx(re,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),e.jsx("h3",{className:"font-bold mb-2",children:"Assign Lessons"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create custom lessons and practice goals"})]}),e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border-2 border-green-200",children:[e.jsx(Oe,{className:"w-12 h-12 mx-auto mb-3 text-green-600"}),e.jsx("h3",{className:"font-bold mb-2",children:"Communicate"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send feedback and encouragement"})]})]}),e.jsxs("div",{className:"text-center pt-4",children:[e.jsxs(R,{onClick:()=>c.mutate(!0),className:"h-14 px-8 text-lg bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600",disabled:c.isPending,children:[e.jsx(xt,{className:"w-5 h-5 mr-2"}),c.isPending?"Enabling...":"Enable Parent Mode"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"You can switch back to regular mode anytime"})]})]})]})})}export{Fi as default};
