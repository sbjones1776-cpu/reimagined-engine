import{c as L,r,bc as z,j as e,bd as F,be as $,bf as H,bg as _,bh as B,bi as O,V as W,C as U,d as K,X as V,h as E}from"./index-52tutDqx.js";import{D as X}from"./download-k8BXtbsE.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],R=L("Share",q);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],J=L("Smartphone",G);function M(t,i){if(typeof t=="function")return t(i);t!=null&&(t.current=i)}function Q(...t){return i=>{let s=!1;const l=t.map(o=>{const n=M(o,i);return!s&&typeof n=="function"&&(s=!0),n});if(s)return()=>{for(let o=0;o<l.length;o++){const n=l[o];typeof n=="function"?n():M(t[o],null)}}}}function Y(...t){return r.useCallback(Q(...t),t)}class Z extends r.Component{getSnapshotBeforeUpdate(i){const s=this.props.childRef.current;if(s&&i.isPresent&&!this.props.isPresent){const l=s.offsetParent,o=F(l)&&l.offsetWidth||0,n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft,n.right=o-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ee({children:t,isPresent:i,anchorX:s,root:l}){const o=r.useId(),n=r.useRef(null),f=r.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:g}=r.useContext(z),y=Y(n,t==null?void 0:t.ref);return r.useInsertionEffect(()=>{const{width:a,height:h,top:c,left:d,right:m}=f.current;if(i||!n.current||!a||!h)return;const j=s==="left"?`left: ${d}`:`right: ${m}`;n.current.dataset.motionPopId=o;const u=document.createElement("style");g&&(u.nonce=g);const C=l??document.head;return C.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${h}px !important;
            ${j}px !important;
            top: ${c}px !important;
          }
        `),()=>{C.contains(u)&&C.removeChild(u)}},[i]),e.jsx(Z,{isPresent:i,childRef:n,sizeRef:f,children:r.cloneElement(t,{ref:y})})}const te=({children:t,initial:i,isPresent:s,onExitComplete:l,custom:o,presenceAffectsLayout:n,mode:f,anchorX:g,root:y})=>{const a=$(se),h=r.useId();let c=!0,d=r.useMemo(()=>(c=!1,{id:h,initial:i,isPresent:s,custom:o,onExitComplete:m=>{a.set(m,!0);for(const j of a.values())if(!j)return;l&&l()},register:m=>(a.set(m,!1),()=>a.delete(m))}),[s,a,l]);return n&&c&&(d={...d}),r.useMemo(()=>{a.forEach((m,j)=>a.set(j,!1))},[s]),r.useEffect(()=>{!s&&!a.size&&l&&l()},[s]),f==="popLayout"&&(t=e.jsx(ee,{isPresent:s,anchorX:g,root:y,children:t})),e.jsx(H.Provider,{value:d,children:t})};function se(){return new Map}const N=t=>t.key||"";function D(t){const i=[];return r.Children.forEach(t,s=>{r.isValidElement(s)&&i.push(s)}),i}const ne=({children:t,custom:i,initial:s=!0,onExitComplete:l,presenceAffectsLayout:o=!0,mode:n="sync",propagate:f=!1,anchorX:g="left",root:y})=>{const[a,h]=_(f),c=r.useMemo(()=>D(t),[t]),d=f&&!a?[]:c.map(N),m=r.useRef(!0),j=r.useRef(c),u=$(()=>new Map),[C,A]=r.useState(c),[b,S]=r.useState(c);B(()=>{m.current=!1,j.current=c;for(let x=0;x<b.length;x++){const p=N(b[x]);d.includes(p)?u.delete(p):u.get(p)!==!0&&u.set(p,!1)}},[b,d.length,d.join("-")]);const v=[];if(c!==C){let x=[...c];for(let p=0;p<b.length;p++){const w=b[p],P=N(w);d.includes(P)||(x.splice(p,0,w),v.push(w))}return n==="wait"&&v.length&&(x=v),S(D(x)),A(c),null}const{forceRender:k}=r.useContext(O);return e.jsx(e.Fragment,{children:b.map(x=>{const p=N(x),w=f&&!a?!1:c===b||d.includes(p),P=()=>{if(u.has(p))u.set(p,!0);else return;let I=!0;u.forEach(T=>{T||(I=!1)}),I&&(k==null||k(),S(j.current),f&&(h==null||h()),l&&l())};return e.jsx(te,{isPresent:w,initial:!m.current||s?void 0:!1,custom:i,presenceAffectsLayout:o,mode:n,root:y,onExitComplete:w?void 0:P,anchorX:g,children:x},p)})})};function ie(){const[t,i]=r.useState(null),[s,l]=r.useState(!1),[o,n]=r.useState(!1),[f,g]=r.useState(!1);r.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){g(!0);return}const h=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;n(h);const c=d=>{d.preventDefault(),i(d),setTimeout(()=>{l(!0)},3e3)};return window.addEventListener("beforeinstallprompt",c),h&&setTimeout(()=>{l(!0)},3e3),()=>{window.removeEventListener("beforeinstallprompt",c)}},[]);const y=async()=>{if(!t)return;t.prompt();const{outcome:h}=await t.userChoice;h==="accepted"&&(console.log("User accepted the install prompt"),g(!0)),i(null),l(!1)},a=()=>{l(!1),sessionStorage.setItem("installPromptDismissed","true")};return f||sessionStorage.getItem("installPromptDismissed")?null:e.jsx(ne,{children:s&&e.jsx(W.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"fixed bottom-20 left-4 right-4 z-50 md:left-auto md:right-8 md:max-w-md lg:bottom-8",children:e.jsx(U,{className:"border-4 border-purple-400 shadow-2xl bg-gradient-to-br from-purple-50 to-pink-50",children:e.jsxs(K,{className:"p-4",children:[e.jsx("button",{onClick:a,className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Dismiss",children:e.jsx(V,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0 shadow-lg",children:e.jsx(J,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:"Install Math Adventure"}),o?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Add to your home screen for the best experience!"}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-purple-200 text-sm space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(R,{className:"w-4 h-4 text-blue-600"})}),e.jsx("p",{className:"font-semibold text-purple-700",children:"How to install on iPhone/iPad:"})]}),e.jsxs("ol",{className:"space-y-2 text-gray-700 ml-2",children:[e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"font-bold text-purple-600 flex-shrink-0",children:"1."}),e.jsxs("span",{children:["Tap the ",e.jsx("strong",{children:"Share button"})," ",e.jsx(R,{className:"inline w-4 h-4"})," at the bottom of your screen (or top in Safari)"]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"font-bold text-purple-600 flex-shrink-0",children:"2."}),e.jsxs("span",{children:["Scroll down and tap ",e.jsx("strong",{children:'"Add to Home Screen"'})," ",e.jsx("span",{className:"inline-block bg-gray-100 px-2 py-1 rounded text-xs",children:"ðŸ“±+"})]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"font-bold text-purple-600 flex-shrink-0",children:"3."}),e.jsxs("span",{children:["Tap ",e.jsx("strong",{children:'"Add"'})," in the top right corner"]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"font-bold text-purple-600 flex-shrink-0",children:"4."}),e.jsx("span",{children:"The app icon will appear on your home screen!"})]})]}),e.jsx("div",{className:"bg-blue-50 p-2 rounded mt-3",children:e.jsxs("p",{className:"text-xs text-blue-700",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Once installed, open the app from your home screen for the full-screen experience!"]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Install the app for quick access and offline play!"}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border-2 border-purple-200 mb-3",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"âœ¨ Benefits:"}),e.jsxs("ul",{className:"text-xs text-gray-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Works offline"}),e.jsx("li",{children:"â€¢ Faster loading"}),e.jsx("li",{children:"â€¢ Full-screen experience"}),e.jsx("li",{children:"â€¢ Home screen access"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{onClick:y,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Install App"]}),e.jsx(E,{onClick:a,variant:"outline",children:"Later"})]})]})]})]})]})})})})}export{ie as default};
