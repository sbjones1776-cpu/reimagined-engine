import{c as ot,ar as Fs,as as Ks,at as ae,R as b,au as ia,r as O,j as e,C as P,d as C,am as Va,a0 as qs,u as pe,M as L,N as $,T as qe,f as je,x as be,b as Ne,a as De,B as z,i as Y,k as X,av as Gs,ap as we,q as la,w as Ee,l as _e,m as Ue,F as jt,z as Ge,h as R,an as B,aw as ca,ax as oa,ao as bt,e as Ye,a8 as Wa,ah as Bs,af as dt,ab as Ha,ad as Et,ag as Qt,ay as Qa,o as Nt,t as zs,U as gt,X as Vs,S as We,A as ee,y as te,az as Kt,aA as Ws,aB as Hs,aC as Ua,$ as ba,K as Na,aD as Qs,Q as Us,a1 as Ys,p as qt,g as Gt,J as Xs}from"./index-52tutDqx.js";import{u as ie}from"./useMutation-Dw-sPjxD.js";import{T as da,a as ua,b as W,c as H}from"./tabs-BCUfDdd3.js";import Ya from"./AvatarDisplay-BzkYfhqx.js";import{M as Se,T as Xe,S as Xa,R as mt}from"./textarea-CqrSSpqj.js";import{T as wt}from"./trending-up-DOxCo9I6.js";import{C as ma}from"./circle-alert-D0KxAb-N.js";import{T as Za}from"./trending-down-CtEqn-BB.js";import{f as F,p as se,r as Ja,c as Zs,d as es,e as Js,i as J,g as ha,h as V,j as ts,k as pa,l as as,D as xa,m as ft,n as ye,o as xe,S as er,A as ga,q as tr,s as le,t as _t,u as ce,v as fa,w as ss,G as ya,x as yt,y as ar,z as rs,B as sr,E as ht,F as wa,H as rr,I as pt,J as nr,K as ir,M as _a,N as Dt,O as Be,X as Re,Y as ge,P as ns,Q as is,R as Oe,C as He,T as Te,a as Qe,L as ls,b as At}from"./LineChart-Boznw0oC.js";import{L as T}from"./label-ClTmKTiT.js";import{S as de,a as ue,b as me,c as he,d as D}from"./select-CEEjSQMd.js";import{P as cs}from"./progress-DswiN-jt.js";import{T as ne}from"./target-1p2ICMDN.js";import{P as Rt}from"./plus-CzE6Y-vE.js";import{T as Mt}from"./trash-2-jwsEREBw.js";import{u as os}from"./index-K24GeIQO.js";import{S as Aa}from"./save-WpcaPzdX.js";import{L as xt}from"./lock-DVJmOJtR.js";import{T as Ut}from"./triangle-alert-BF04o9wv.js";import{B as Yt}from"./book-open-CsZLkRie.js";import{I as Me}from"./info-BwmiXNr9.js";import{D as lr}from"./download-k8BXtbsE.js";import{s as cr}from"./startOfMonth-D3h4jTlt.js";import{P as or}from"./PremiumFeatureLock-DUuDI_YH.js";import"./index-DytiPzxp.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ur=ot("Bell",dr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],hr=ot("ClipboardList",mr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],xr=ot("RefreshCw",pr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],fr=ot("ThumbsUp",gr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],Xt=ot("UserCog",yr);function vr(a,t){const r=Fs(a);return isNaN(t)?Ks(a,NaN):(t&&r.setDate(r.getDate()+t),r)}function Bt(a,t){return vr(a,-t)}var jr=["points","className","baseLinePoints","connectNulls"];function ze(){return ze=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},ze.apply(this,arguments)}function br(a,t){if(a==null)return{};var r=Nr(a,t),s,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(n=0;n<i.length;n++)s=i[n],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(a,s)&&(r[s]=a[s])}return r}function Nr(a,t){if(a==null)return{};var r={};for(var s in a)if(Object.prototype.hasOwnProperty.call(a,s)){if(t.indexOf(s)>=0)continue;r[s]=a[s]}return r}function ka(a){return kr(a)||Ar(a)||_r(a)||wr()}function wr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _r(a,t){if(a){if(typeof a=="string")return Zt(a,t);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zt(a,t)}}function Ar(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function kr(a){if(Array.isArray(a))return Zt(a)}function Zt(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=a[r];return s}var Pa=function(t){return t&&t.x===+t.x&&t.y===+t.y},Pr=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(s){Pa(s)?r[r.length-1].push(s):r[r.length-1].length>0&&r.push([])}),Pa(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},nt=function(t,r){var s=Pr(t);r&&(s=[s.reduce(function(i,l){return[].concat(ka(i),ka(l))},[])]);var n=s.map(function(i){return i.reduce(function(l,d,m){return"".concat(l).concat(m===0?"M":"L").concat(d.x,",").concat(d.y)},"")}).join("");return s.length===1?"".concat(n,"Z"):n},Cr=function(t,r,s){var n=nt(t,s);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(nt(r.reverse(),s).slice(1))},ds=function(t){var r=t.points,s=t.className,n=t.baseLinePoints,i=t.connectNulls,l=br(t,jr);if(!r||!r.length)return null;var d=ae("recharts-polygon",s);if(n&&n.length){var m=l.stroke&&l.stroke!=="none",x=Cr(r,n,i);return b.createElement("g",{className:d},b.createElement("path",ze({},F(l,!0),{fill:x.slice(-1)==="Z"?l.fill:"none",stroke:"none",d:x})),m?b.createElement("path",ze({},F(l,!0),{fill:"none",d:nt(r,i)})):null,m?b.createElement("path",ze({},F(l,!0),{fill:"none",d:nt(n,i)})):null)}var g=nt(r,i);return b.createElement("path",ze({},F(l,!0),{fill:g.slice(-1)==="Z"?l.fill:"none",className:d,d:g}))},Sr=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function lt(a){"@babel/helpers - typeof";return lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(a)}function Or(a,t){if(a==null)return{};var r=Tr(a,t),s,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(n=0;n<i.length;n++)s=i[n],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(a,s)&&(r[s]=a[s])}return r}function Tr(a,t){if(a==null)return{};var r={};for(var s in a)if(Object.prototype.hasOwnProperty.call(a,s)){if(t.indexOf(s)>=0)continue;r[s]=a[s]}return r}function Ae(){return Ae=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Ae.apply(this,arguments)}function Ca(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),r.push.apply(r,s)}return r}function ct(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ca(Object(r),!0).forEach(function(s){Er(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Ca(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function Er(a,t,r){return t=Dr(t),t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}function Dr(a){var t=Rr(a,"string");return lt(t)=="symbol"?t:t+""}function Rr(a,t){if(lt(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,t);if(lt(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}var Mr=function(t,r,s,n){var i="";return n.forEach(function(l,d){var m=se(r,s,t,l);d?i+="L ".concat(m.x,",").concat(m.y):i+="M ".concat(m.x,",").concat(m.y)}),i+="Z",i},Lr=function(t){var r=t.cx,s=t.cy,n=t.innerRadius,i=t.outerRadius,l=t.polarAngles,d=t.radialLines;if(!l||!l.length||!d)return null;var m=ct({stroke:"#ccc"},F(t,!1));return b.createElement("g",{className:"recharts-polar-grid-angle"},l.map(function(x){var g=se(r,s,n,x),c=se(r,s,i,x);return b.createElement("line",Ae({},m,{key:"line-".concat(x),x1:g.x,y1:g.y,x2:c.x,y2:c.y}))}))},$r=function(t){var r=t.cx,s=t.cy,n=t.radius,i=t.index,l=ct(ct({stroke:"#ccc"},F(t,!1)),{},{fill:"none"});return b.createElement("circle",Ae({},l,{className:ae("recharts-polar-grid-concentric-circle",t.className),key:"circle-".concat(i),cx:r,cy:s,r:n}))},Ir=function(t){var r=t.radius,s=t.index,n=ct(ct({stroke:"#ccc"},F(t,!1)),{},{fill:"none"});return b.createElement("path",Ae({},n,{className:ae("recharts-polar-grid-concentric-polygon",t.className),key:"path-".concat(s),d:Mr(r,t.cx,t.cy,t.polarAngles)}))},Fr=function(t){var r=t.polarRadius,s=t.gridType;return!r||!r.length?null:b.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(n,i){var l=i;return s==="circle"?b.createElement($r,Ae({key:l},t,{radius:n,index:i})):b.createElement(Ir,Ae({key:l},t,{radius:n,index:i}))}))},us=function(t){var r=t.cx,s=r===void 0?0:r,n=t.cy,i=n===void 0?0:n,l=t.innerRadius,d=l===void 0?0:l,m=t.outerRadius,x=m===void 0?0:m,g=t.gridType,c=g===void 0?"polygon":g,p=t.radialLines,y=p===void 0?!0:p,j=Or(t,Sr);return x<=0?null:b.createElement("g",{className:"recharts-polar-grid"},b.createElement(Lr,Ae({cx:s,cy:i,innerRadius:d,outerRadius:x,gridType:c,radialLines:y},j)),b.createElement(Fr,Ae({cx:s,cy:i,innerRadius:d,outerRadius:x,gridType:c,radialLines:y},j)))};us.displayName="PolarGrid";var zt,Sa;function Kr(){if(Sa)return zt;Sa=1;var a=Ja(),t=Zs(),r=es();function s(n,i){return n&&n.length?a(n,r(i,2),t):void 0}return zt=s,zt}var qr=Kr();const Gr=ia(qr);var Vt,Oa;function Br(){if(Oa)return Vt;Oa=1;var a=Ja(),t=es(),r=Js();function s(n,i){return n&&n.length?a(n,t(i,2),r):void 0}return Vt=s,Vt}var zr=Br();const Vr=ia(zr);var Wr=["cx","cy","angle","ticks","axisLine"],Hr=["ticks","tick","angle","tickFormatter","stroke"];function Ze(a){"@babel/helpers - typeof";return Ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ze(a)}function it(){return it=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},it.apply(this,arguments)}function Ta(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),r.push.apply(r,s)}return r}function $e(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ta(Object(r),!0).forEach(function(s){Lt(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Ta(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function Ea(a,t){if(a==null)return{};var r=Qr(a,t),s,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(n=0;n<i.length;n++)s=i[n],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(a,s)&&(r[s]=a[s])}return r}function Qr(a,t){if(a==null)return{};var r={};for(var s in a)if(Object.prototype.hasOwnProperty.call(a,s)){if(t.indexOf(s)>=0)continue;r[s]=a[s]}return r}function Ur(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Da(a,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,hs(s.key),s)}}function Yr(a,t,r){return t&&Da(a.prototype,t),r&&Da(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a}function Xr(a,t,r){return t=kt(t),Zr(a,ms()?Reflect.construct(t,r||[],kt(a).constructor):t.apply(a,r))}function Zr(a,t){if(t&&(Ze(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jr(a)}function Jr(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ms(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ms=function(){return!!a})()}function kt(a){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kt(a)}function en(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&Jt(a,t)}function Jt(a,t){return Jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},Jt(a,t)}function Lt(a,t,r){return t=hs(t),t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}function hs(a){var t=tn(a,"string");return Ze(t)=="symbol"?t:t+""}function tn(a,t){if(Ze(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,t);if(Ze(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var st=(function(a){function t(){return Ur(this,t),Xr(this,t,arguments)}return en(t,a),Yr(t,[{key:"getTickValueCoord",value:function(s){var n=s.coordinate,i=this.props,l=i.angle,d=i.cx,m=i.cy;return se(d,m,n,l)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,n;switch(s){case"left":n="end";break;case"right":n="start";break;default:n="middle";break}return n}},{key:"getViewBox",value:function(){var s=this.props,n=s.cx,i=s.cy,l=s.angle,d=s.ticks,m=Gr(d,function(g){return g.coordinate||0}),x=Vr(d,function(g){return g.coordinate||0});return{cx:n,cy:i,startAngle:l,endAngle:l,innerRadius:x.coordinate||0,outerRadius:m.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,n=s.cx,i=s.cy,l=s.angle,d=s.ticks,m=s.axisLine,x=Ea(s,Wr),g=d.reduce(function(j,h){return[Math.min(j[0],h.coordinate),Math.max(j[1],h.coordinate)]},[1/0,-1/0]),c=se(n,i,g[0],l),p=se(n,i,g[1],l),y=$e($e($e({},F(x,!1)),{},{fill:"none"},F(m,!1)),{},{x1:c.x,y1:c.y,x2:p.x,y2:p.y});return b.createElement("line",it({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var s=this,n=this.props,i=n.ticks,l=n.tick,d=n.angle,m=n.tickFormatter,x=n.stroke,g=Ea(n,Hr),c=this.getTickTextAnchor(),p=F(g,!1),y=F(l,!1),j=i.map(function(h,o){var f=s.getTickValueCoord(h),v=$e($e($e($e({textAnchor:c,transform:"rotate(".concat(90-d,", ").concat(f.x,", ").concat(f.y,")")},p),{},{stroke:"none",fill:x},y),{},{index:o},f),{},{payload:h});return b.createElement(V,it({className:ae("recharts-polar-radius-axis-tick",ts(l)),key:"tick-".concat(h.coordinate)},pa(s.props,h,o)),t.renderTickItem(l,v,m?m(h.value,o):h.value))});return b.createElement(V,{className:"recharts-polar-radius-axis-ticks"},j)}},{key:"render",value:function(){var s=this.props,n=s.ticks,i=s.axisLine,l=s.tick;return!n||!n.length?null:b.createElement(V,{className:ae("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),l&&this.renderTicks(),as.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,n,i){var l;return b.isValidElement(s)?l=b.cloneElement(s,n):J(s)?l=s(n):l=b.createElement(ha,it({},n,{className:"recharts-polar-radius-axis-tick-value"}),i),l}}])})(O.PureComponent);Lt(st,"displayName","PolarRadiusAxis");Lt(st,"axisType","radiusAxis");Lt(st,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Je(a){"@babel/helpers - typeof";return Je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je(a)}function Fe(){return Fe=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Fe.apply(this,arguments)}function Ra(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),r.push.apply(r,s)}return r}function Ie(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ra(Object(r),!0).forEach(function(s){$t(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Ra(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function an(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Ma(a,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,xs(s.key),s)}}function sn(a,t,r){return t&&Ma(a.prototype,t),r&&Ma(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a}function rn(a,t,r){return t=Pt(t),nn(a,ps()?Reflect.construct(t,r||[],Pt(a).constructor):t.apply(a,r))}function nn(a,t){if(t&&(Je(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ln(a)}function ln(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ps(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ps=function(){return!!a})()}function Pt(a){return Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pt(a)}function cn(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&ea(a,t)}function ea(a,t){return ea=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},ea(a,t)}function $t(a,t,r){return t=xs(t),t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}function xs(a){var t=on(a,"string");return Je(t)=="symbol"?t:t+""}function on(a,t){if(Je(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,t);if(Je(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var dn=Math.PI/180,La=1e-5,rt=(function(a){function t(){return an(this,t),rn(this,t,arguments)}return cn(t,a),sn(t,[{key:"getTickLineCoord",value:function(s){var n=this.props,i=n.cx,l=n.cy,d=n.radius,m=n.orientation,x=n.tickSize,g=x||8,c=se(i,l,d,s.coordinate),p=se(i,l,d+(m==="inner"?-1:1)*g,s.coordinate);return{x1:c.x,y1:c.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(s){var n=this.props.orientation,i=Math.cos(-s.coordinate*dn),l;return i>La?l=n==="outer"?"start":"end":i<-La?l=n==="outer"?"end":"start":l="middle",l}},{key:"renderAxisLine",value:function(){var s=this.props,n=s.cx,i=s.cy,l=s.radius,d=s.axisLine,m=s.axisLineType,x=Ie(Ie({},F(this.props,!1)),{},{fill:"none"},F(d,!1));if(m==="circle")return b.createElement(xa,Fe({className:"recharts-polar-angle-axis-line"},x,{cx:n,cy:i,r:l}));var g=this.props.ticks,c=g.map(function(p){return se(n,i,l,p.coordinate)});return b.createElement(ds,Fe({className:"recharts-polar-angle-axis-line"},x,{points:c}))}},{key:"renderTicks",value:function(){var s=this,n=this.props,i=n.ticks,l=n.tick,d=n.tickLine,m=n.tickFormatter,x=n.stroke,g=F(this.props,!1),c=F(l,!1),p=Ie(Ie({},g),{},{fill:"none"},F(d,!1)),y=i.map(function(j,h){var o=s.getTickLineCoord(j),f=s.getTickTextAnchor(j),v=Ie(Ie(Ie({textAnchor:f},g),{},{stroke:"none",fill:x},c),{},{index:h,payload:j,x:o.x2,y:o.y2});return b.createElement(V,Fe({className:ae("recharts-polar-angle-axis-tick",ts(l)),key:"tick-".concat(j.coordinate)},pa(s.props,j,h)),d&&b.createElement("line",Fe({className:"recharts-polar-angle-axis-tick-line"},p,o)),l&&t.renderTickItem(l,v,m?m(j.value,h):j.value))});return b.createElement(V,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var s=this.props,n=s.ticks,i=s.radius,l=s.axisLine;return i<=0||!n||!n.length?null:b.createElement(V,{className:ae("recharts-polar-angle-axis",this.props.className)},l&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,n,i){var l;return b.isValidElement(s)?l=b.cloneElement(s,n):J(s)?l=s(n):l=b.createElement(ha,Fe({},n,{className:"recharts-polar-angle-axis-tick-value"}),i),l}}])})(O.PureComponent);$t(rt,"displayName","PolarAngleAxis");$t(rt,"axisType","angleAxis");$t(rt,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var vt;function et(a){"@babel/helpers - typeof";return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(a)}function Ve(){return Ve=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Ve.apply(this,arguments)}function $a(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),r.push.apply(r,s)}return r}function q(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$a(Object(r),!0).forEach(function(s){oe(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):$a(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function un(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Ia(a,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,fs(s.key),s)}}function mn(a,t,r){return t&&Ia(a.prototype,t),r&&Ia(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a}function hn(a,t,r){return t=Ct(t),pn(a,gs()?Reflect.construct(t,r||[],Ct(a).constructor):t.apply(a,r))}function pn(a,t){if(t&&(et(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xn(a)}function xn(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function gs(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gs=function(){return!!a})()}function Ct(a){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ct(a)}function gn(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&ta(a,t)}function ta(a,t){return ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},ta(a,t)}function oe(a,t,r){return t=fs(t),t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}function fs(a){var t=fn(a,"string");return et(t)=="symbol"?t:t+""}function fn(a,t){if(et(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,t);if(et(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var Pe=(function(a){function t(r){var s;return un(this,t),s=hn(this,t,[r]),oe(s,"pieRef",null),oe(s,"sectorRefs",[]),oe(s,"id",ss("recharts-pie-")),oe(s,"handleAnimationEnd",function(){var n=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),J(n)&&n()}),oe(s,"handleAnimationStart",function(){var n=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),J(n)&&n()}),s.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},s}return gn(t,a),mn(t,[{key:"isActiveIndex",value:function(s){var n=this.props.activeIndex;return Array.isArray(n)?n.indexOf(s)!==-1:s===n}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.label,d=i.labelLine,m=i.dataKey,x=i.valueKey,g=F(this.props,!1),c=F(l,!1),p=F(d,!1),y=l&&l.offsetRadius||20,j=s.map(function(h,o){var f=(h.startAngle+h.endAngle)/2,v=se(h.cx,h.cy,h.outerRadius+y,f),N=q(q(q(q({},g),h),{},{stroke:"none"},c),{},{index:o,textAnchor:t.getTextAnchor(v.x,h.cx)},v),w=q(q(q(q({},g),h),{},{fill:"none",stroke:h.fill},p),{},{index:o,points:[se(h.cx,h.cy,h.outerRadius,f),v]}),S=m;return ye(m)&&ye(x)?S="value":ye(m)&&(S=x),b.createElement(V,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(o)},d&&t.renderLabelLineItem(d,w,"line"),t.renderLabelItem(l,N,xe(h,S)))});return b.createElement(V,{className:"recharts-pie-labels"},j)}},{key:"renderSectorsStatically",value:function(s){var n=this,i=this.props,l=i.activeShape,d=i.blendStroke,m=i.inactiveShape;return s.map(function(x,g){if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&s.length!==1)return null;var c=n.isActiveIndex(g),p=m&&n.hasActiveIndex()?m:null,y=c?l:p,j=q(q({},x),{},{stroke:d?x.fill:x.stroke,tabIndex:-1});return b.createElement(V,Ve({ref:function(o){o&&!n.sectorRefs.includes(o)&&n.sectorRefs.push(o)},tabIndex:-1,className:"recharts-pie-sector"},pa(n.props,x,g),{key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(g)}),b.createElement(er,Ve({option:y,isActive:c,shapeType:"sector"},j)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,n=this.props,i=n.sectors,l=n.isAnimationActive,d=n.animationBegin,m=n.animationDuration,x=n.animationEasing,g=n.animationId,c=this.state,p=c.prevSectors,y=c.prevIsAnimationActive;return b.createElement(ga,{begin:d,duration:m,isActive:l,easing:x,from:{t:0},to:{t:1},key:"pie-".concat(g,"-").concat(y),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(j){var h=j.t,o=[],f=i&&i[0],v=f.startAngle;return i.forEach(function(N,w){var S=p&&p[w],M=w>0?tr(N,"paddingAngle",0):0;if(S){var A=le(S.endAngle-S.startAngle,N.endAngle-N.startAngle),u=q(q({},N),{},{startAngle:v+M,endAngle:v+A(h)+M});o.push(u),v=u.endAngle}else{var _=N.endAngle,E=N.startAngle,K=le(0,_-E),k=K(h),I=q(q({},N),{},{startAngle:v+M,endAngle:v+k+M});o.push(I),v=I.endAngle}}),b.createElement(V,null,s.renderSectorsStatically(o))})}},{key:"attachKeyboardHandlers",value:function(s){var n=this;s.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var l=++n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[l].focus(),n.setState({sectorToFocus:l});break}case"ArrowRight":{var d=--n.state.sectorToFocus<0?n.sectorRefs.length-1:n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[d].focus(),n.setState({sectorToFocus:d});break}case"Escape":{n.sectorRefs[n.state.sectorToFocus].blur(),n.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,n=s.sectors,i=s.isAnimationActive,l=this.state.prevSectors;return i&&n&&n.length&&(!l||!_t(l,n))?this.renderSectorsWithAnimation():this.renderSectorsStatically(n)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,n=this.props,i=n.hide,l=n.sectors,d=n.className,m=n.label,x=n.cx,g=n.cy,c=n.innerRadius,p=n.outerRadius,y=n.isAnimationActive,j=this.state.isAnimationFinished;if(i||!l||!l.length||!ce(x)||!ce(g)||!ce(c)||!ce(p))return null;var h=ae("recharts-pie",d);return b.createElement(V,{tabIndex:this.props.rootTabIndex,className:h,ref:function(f){s.pieRef=f}},this.renderSectors(),m&&this.renderLabels(l),as.renderCallByParent(this.props,null,!1),(!y||j)&&fa.renderCallByParent(this.props,l,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,n){return n.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==n.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:n.curSectors,isAnimationFinished:!0}:s.sectors!==n.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,n){return s>n?"start":s<n?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,n,i){if(b.isValidElement(s))return b.cloneElement(s,n);if(J(s))return s(n);var l=ae("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return b.createElement(ft,Ve({},n,{key:i,type:"linear",className:l}))}},{key:"renderLabelItem",value:function(s,n,i){if(b.isValidElement(s))return b.cloneElement(s,n);var l=i;if(J(s)&&(l=s(n),b.isValidElement(l)))return l;var d=ae("recharts-pie-label-text",typeof s!="boolean"&&!J(s)?s.className:"");return b.createElement(ha,Ve({},n,{alignmentBaseline:"middle",className:d}),l)}}])})(O.PureComponent);vt=Pe;oe(Pe,"displayName","Pie");oe(Pe,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ya.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});oe(Pe,"parseDeltaAngle",function(a,t){var r=yt(t-a),s=Math.min(Math.abs(t-a),360);return r*s});oe(Pe,"getRealPieData",function(a){var t=a.data,r=a.children,s=F(a,!1),n=ar(r,rs);return t&&t.length?t.map(function(i,l){return q(q(q({payload:i},s),i),n&&n[l]&&n[l].props)}):n&&n.length?n.map(function(i){return q(q({},s),i.props)}):[]});oe(Pe,"parseCoordinateOfPie",function(a,t){var r=t.top,s=t.left,n=t.width,i=t.height,l=sr(n,i),d=s+ht(a.cx,n,n/2),m=r+ht(a.cy,i,i/2),x=ht(a.innerRadius,l,0),g=ht(a.outerRadius,l,l*.8),c=a.maxRadius||Math.sqrt(n*n+i*i)/2;return{cx:d,cy:m,innerRadius:x,outerRadius:g,maxRadius:c}});oe(Pe,"getComposedData",function(a){var t=a.item,r=a.offset,s=t.type.defaultProps!==void 0?q(q({},t.type.defaultProps),t.props):t.props,n=vt.getRealPieData(s);if(!n||!n.length)return null;var i=s.cornerRadius,l=s.startAngle,d=s.endAngle,m=s.paddingAngle,x=s.dataKey,g=s.nameKey,c=s.valueKey,p=s.tooltipType,y=Math.abs(s.minAngle),j=vt.parseCoordinateOfPie(s,r),h=vt.parseDeltaAngle(l,d),o=Math.abs(h),f=x;ye(x)&&ye(c)?(wa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),f="value"):ye(x)&&(wa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),f=c);var v=n.filter(function(u){return xe(u,f,0)!==0}).length,N=(o>=360?v:v-1)*m,w=o-v*y-N,S=n.reduce(function(u,_){var E=xe(_,f,0);return u+(ce(E)?E:0)},0),M;if(S>0){var A;M=n.map(function(u,_){var E=xe(u,f,0),K=xe(u,g,_),k=(ce(E)?E:0)/S,I;_?I=A.endAngle+yt(h)*m*(E!==0?1:0):I=l;var re=I+yt(h)*((E!==0?y:0)+k*w),Q=(I+re)/2,G=(j.innerRadius+j.outerRadius)/2,Z=[{name:K,value:E,payload:u,dataKey:f,type:p}],Is=se(j.cx,j.cy,G,Q);return A=q(q(q({percent:k,cornerRadius:i,name:K,tooltipPayload:Z,midAngle:Q,middleRadius:G,tooltipPosition:Is},u),j),{},{value:xe(u,f),startAngle:I,endAngle:re,payload:u,paddingAngle:yt(h)*m}),A})}return q(q({},j),{},{sectors:M,data:n})});var Wt,Fa;function yn(){if(Fa)return Wt;Fa=1;function a(t){return t&&t.length?t[0]:void 0}return Wt=a,Wt}var Ht,Ka;function vn(){return Ka||(Ka=1,Ht=yn()),Ht}var jn=vn();const bn=ia(jn);var Nn=["key"];function tt(a){"@babel/helpers - typeof";return tt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(a)}function wn(a,t){if(a==null)return{};var r=_n(a,t),s,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(n=0;n<i.length;n++)s=i[n],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(a,s)&&(r[s]=a[s])}return r}function _n(a,t){if(a==null)return{};var r={};for(var s in a)if(Object.prototype.hasOwnProperty.call(a,s)){if(t.indexOf(s)>=0)continue;r[s]=a[s]}return r}function St(){return St=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},St.apply(this,arguments)}function qa(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),r.push.apply(r,s)}return r}function U(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qa(Object(r),!0).forEach(function(s){ve(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):qa(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function An(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Ga(a,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,vs(s.key),s)}}function kn(a,t,r){return t&&Ga(a.prototype,t),r&&Ga(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a}function Pn(a,t,r){return t=Ot(t),Cn(a,ys()?Reflect.construct(t,r||[],Ot(a).constructor):t.apply(a,r))}function Cn(a,t){if(t&&(tt(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sn(a)}function Sn(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ys(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ys=function(){return!!a})()}function Ot(a){return Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ot(a)}function On(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&aa(a,t)}function aa(a,t){return aa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},aa(a,t)}function ve(a,t,r){return t=vs(t),t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}function vs(a){var t=Tn(a,"string");return tt(t)=="symbol"?t:t+""}function Tn(a,t){if(tt(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,t);if(tt(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var ut=(function(a){function t(){var r;An(this,t);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return r=Pn(this,t,[].concat(n)),ve(r,"state",{isAnimationFinished:!1}),ve(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),J(l)&&l()}),ve(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),J(l)&&l()}),ve(r,"handleMouseEnter",function(l){var d=r.props.onMouseEnter;d&&d(r.props,l)}),ve(r,"handleMouseLeave",function(l){var d=r.props.onMouseLeave;d&&d(r.props,l)}),r}return On(t,a),kn(t,[{key:"renderDots",value:function(s){var n=this.props,i=n.dot,l=n.dataKey,d=F(this.props,!1),m=F(i,!0),x=s.map(function(g,c){var p=U(U(U({key:"dot-".concat(c),r:3},d),m),{},{dataKey:l,cx:g.x,cy:g.y,index:c,payload:g});return t.renderDotItem(i,p)});return b.createElement(V,{className:"recharts-radar-dots"},x)}},{key:"renderPolygonStatically",value:function(s){var n=this.props,i=n.shape,l=n.dot,d=n.isRange,m=n.baseLinePoints,x=n.connectNulls,g;return b.isValidElement(i)?g=b.cloneElement(i,U(U({},this.props),{},{points:s})):J(i)?g=i(U(U({},this.props),{},{points:s})):g=b.createElement(ds,St({},F(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:s,baseLinePoints:d?m:null,connectNulls:x})),b.createElement(V,{className:"recharts-radar-polygon"},g,l?this.renderDots(s):null)}},{key:"renderPolygonWithAnimation",value:function(){var s=this,n=this.props,i=n.points,l=n.isAnimationActive,d=n.animationBegin,m=n.animationDuration,x=n.animationEasing,g=n.animationId,c=this.state.prevPoints;return b.createElement(ga,{begin:d,duration:m,isActive:l,easing:x,from:{t:0},to:{t:1},key:"radar-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,j=c&&c.length/i.length,h=i.map(function(o,f){var v=c&&c[Math.floor(f*j)];if(v){var N=le(v.x,o.x),w=le(v.y,o.y);return U(U({},o),{},{x:N(y),y:w(y)})}var S=le(o.cx,o.x),M=le(o.cy,o.y);return U(U({},o),{},{x:S(y),y:M(y)})});return s.renderPolygonStatically(h)})}},{key:"renderPolygon",value:function(){var s=this.props,n=s.points,i=s.isAnimationActive,l=s.isRange,d=this.state.prevPoints;return i&&n&&n.length&&!l&&(!d||!_t(d,n))?this.renderPolygonWithAnimation():this.renderPolygonStatically(n)}},{key:"render",value:function(){var s=this.props,n=s.hide,i=s.className,l=s.points,d=s.isAnimationActive;if(n||!l||!l.length)return null;var m=this.state.isAnimationFinished,x=ae("recharts-radar",i);return b.createElement(V,{className:x},this.renderPolygon(),(!d||m)&&fa.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,n){return s.animationId!==n.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:n.curPoints}:s.points!==n.curPoints?{curPoints:s.points}:null}},{key:"renderDotItem",value:function(s,n){var i;if(b.isValidElement(s))i=b.cloneElement(s,n);else if(J(s))i=s(n);else{var l=n.key,d=wn(n,Nn);i=b.createElement(xa,St({},d,{key:l,className:ae("recharts-radar-dot",typeof s!="boolean"?s.className:"")}))}return i}}])})(O.PureComponent);ve(ut,"displayName","Radar");ve(ut,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!ya.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ve(ut,"getComposedData",function(a){var t=a.radiusAxis,r=a.angleAxis,s=a.displayedData,n=a.dataKey,i=a.bandSize,l=r.cx,d=r.cy,m=!1,x=[],g=r.type!=="number"?i??0:0;s.forEach(function(p,y){var j=xe(p,r.dataKey,y),h=xe(p,n),o=r.scale(j)+g,f=Array.isArray(h)?rr(h):h,v=ye(f)?void 0:t.scale(f);Array.isArray(h)&&h.length>=2&&(m=!0),x.push(U(U({},se(l,d,v,o)),{},{name:j,value:h,cx:l,cy:d,radius:v,angle:o,payload:p}))});var c=[];return m&&x.forEach(function(p){if(Array.isArray(p.value)){var y=bn(p.value),j=ye(y)?void 0:t.scale(y);c.push(U(U({},p),{},{radius:j},se(l,d,j,p.angle)))}else c.push(p)}),{points:x,isRange:m,baseLinePoints:c}});var En=["layout","type","stroke","connectNulls","isRange","ref"],Dn=["key"],js;function at(a){"@babel/helpers - typeof";return at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at(a)}function bs(a,t){if(a==null)return{};var r=Rn(a,t),s,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(n=0;n<i.length;n++)s=i[n],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(a,s)&&(r[s]=a[s])}return r}function Rn(a,t){if(a==null)return{};var r={};for(var s in a)if(Object.prototype.hasOwnProperty.call(a,s)){if(t.indexOf(s)>=0)continue;r[s]=a[s]}return r}function Ke(){return Ke=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Ke.apply(this,arguments)}function Ba(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),r.push.apply(r,s)}return r}function Ce(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ba(Object(r),!0).forEach(function(s){fe(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Ba(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function Mn(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function za(a,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,ws(s.key),s)}}function Ln(a,t,r){return t&&za(a.prototype,t),r&&za(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a}function $n(a,t,r){return t=Tt(t),In(a,Ns()?Reflect.construct(t,r||[],Tt(a).constructor):t.apply(a,r))}function In(a,t){if(t&&(at(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fn(a)}function Fn(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ns(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ns=function(){return!!a})()}function Tt(a){return Tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tt(a)}function Kn(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&sa(a,t)}function sa(a,t){return sa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},sa(a,t)}function fe(a,t,r){return t=ws(t),t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}function ws(a){var t=qn(a,"string");return at(t)=="symbol"?t:t+""}function qn(a,t){if(at(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,t);if(at(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var ke=(function(a){function t(){var r;Mn(this,t);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return r=$n(this,t,[].concat(n)),fe(r,"state",{isAnimationFinished:!0}),fe(r,"id",ss("recharts-area-")),fe(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),J(l)&&l()}),fe(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),J(l)&&l()}),r}return Kn(t,a),Ln(t,[{key:"renderDots",value:function(s,n,i){var l=this.props.isAnimationActive,d=this.state.isAnimationFinished;if(l&&!d)return null;var m=this.props,x=m.dot,g=m.points,c=m.dataKey,p=F(this.props,!1),y=F(x,!0),j=g.map(function(o,f){var v=Ce(Ce(Ce({key:"dot-".concat(f),r:3},p),y),{},{index:f,cx:o.x,cy:o.y,dataKey:c,value:o.value,payload:o.payload,points:g});return t.renderDotItem(x,v)}),h={clipPath:s?"url(#clipPath-".concat(n?"":"dots-").concat(i,")"):null};return b.createElement(V,Ke({className:"recharts-area-dots"},h),j)}},{key:"renderHorizontalRect",value:function(s){var n=this.props,i=n.baseLine,l=n.points,d=n.strokeWidth,m=l[0].x,x=l[l.length-1].x,g=s*Math.abs(m-x),c=pt(l.map(function(p){return p.y||0}));return ce(i)&&typeof i=="number"?c=Math.max(i,c):i&&Array.isArray(i)&&i.length&&(c=Math.max(pt(i.map(function(p){return p.y||0})),c)),ce(c)?b.createElement("rect",{x:m<x?m:m-g,y:0,width:g,height:Math.floor(c+(d?parseInt("".concat(d),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var n=this.props,i=n.baseLine,l=n.points,d=n.strokeWidth,m=l[0].y,x=l[l.length-1].y,g=s*Math.abs(m-x),c=pt(l.map(function(p){return p.x||0}));return ce(i)&&typeof i=="number"?c=Math.max(i,c):i&&Array.isArray(i)&&i.length&&(c=Math.max(pt(i.map(function(p){return p.x||0})),c)),ce(c)?b.createElement("rect",{x:0,y:m<x?m:m-g,width:c+(d?parseInt("".concat(d),10):1),height:Math.floor(g)}):null}},{key:"renderClipRect",value:function(s){var n=this.props.layout;return n==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,n,i,l){var d=this.props,m=d.layout,x=d.type,g=d.stroke,c=d.connectNulls,p=d.isRange;d.ref;var y=bs(d,En);return b.createElement(V,{clipPath:i?"url(#clipPath-".concat(l,")"):null},b.createElement(ft,Ke({},F(y,!0),{points:s,connectNulls:c,type:x,baseLine:n,layout:m,stroke:"none",className:"recharts-area-area"})),g!=="none"&&b.createElement(ft,Ke({},F(this.props,!1),{className:"recharts-area-curve",layout:m,type:x,connectNulls:c,fill:"none",points:s})),g!=="none"&&p&&b.createElement(ft,Ke({},F(this.props,!1),{className:"recharts-area-curve",layout:m,type:x,connectNulls:c,fill:"none",points:n})))}},{key:"renderAreaWithAnimation",value:function(s,n){var i=this,l=this.props,d=l.points,m=l.baseLine,x=l.isAnimationActive,g=l.animationBegin,c=l.animationDuration,p=l.animationEasing,y=l.animationId,j=this.state,h=j.prevPoints,o=j.prevBaseLine;return b.createElement(ga,{begin:g,duration:c,isActive:x,easing:p,from:{t:0},to:{t:1},key:"area-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var v=f.t;if(h){var N=h.length/d.length,w=d.map(function(u,_){var E=Math.floor(_*N);if(h[E]){var K=h[E],k=le(K.x,u.x),I=le(K.y,u.y);return Ce(Ce({},u),{},{x:k(v),y:I(v)})}return u}),S;if(ce(m)&&typeof m=="number"){var M=le(o,m);S=M(v)}else if(ye(m)||nr(m)){var A=le(o,0);S=A(v)}else S=m.map(function(u,_){var E=Math.floor(_*N);if(o[E]){var K=o[E],k=le(K.x,u.x),I=le(K.y,u.y);return Ce(Ce({},u),{},{x:k(v),y:I(v)})}return u});return i.renderAreaStatically(w,S,s,n)}return b.createElement(V,null,b.createElement("defs",null,b.createElement("clipPath",{id:"animationClipPath-".concat(n)},i.renderClipRect(v))),b.createElement(V,{clipPath:"url(#animationClipPath-".concat(n,")")},i.renderAreaStatically(d,m,s,n)))})}},{key:"renderArea",value:function(s,n){var i=this.props,l=i.points,d=i.baseLine,m=i.isAnimationActive,x=this.state,g=x.prevPoints,c=x.prevBaseLine,p=x.totalLength;return m&&l&&l.length&&(!g&&p>0||!_t(g,l)||!_t(c,d))?this.renderAreaWithAnimation(s,n):this.renderAreaStatically(l,d,s,n)}},{key:"render",value:function(){var s,n=this.props,i=n.hide,l=n.dot,d=n.points,m=n.className,x=n.top,g=n.left,c=n.xAxis,p=n.yAxis,y=n.width,j=n.height,h=n.isAnimationActive,o=n.id;if(i||!d||!d.length)return null;var f=this.state.isAnimationFinished,v=d.length===1,N=ae("recharts-area",m),w=c&&c.allowDataOverflow,S=p&&p.allowDataOverflow,M=w||S,A=ye(o)?this.id:o,u=(s=F(l,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},_=u.r,E=_===void 0?3:_,K=u.strokeWidth,k=K===void 0?2:K,I=ir(l)?l:{},re=I.clipDot,Q=re===void 0?!0:re,G=E*2+k;return b.createElement(V,{className:N},w||S?b.createElement("defs",null,b.createElement("clipPath",{id:"clipPath-".concat(A)},b.createElement("rect",{x:w?g:g-y/2,y:S?x:x-j/2,width:w?y:y*2,height:S?j:j*2})),!Q&&b.createElement("clipPath",{id:"clipPath-dots-".concat(A)},b.createElement("rect",{x:g-G/2,y:x-G/2,width:y+G,height:j+G}))):null,v?null:this.renderArea(M,A),(l||v)&&this.renderDots(M,Q,A),(!h||f)&&fa.renderCallByParent(this.props,d))}}],[{key:"getDerivedStateFromProps",value:function(s,n){return s.animationId!==n.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:n.curPoints,prevBaseLine:n.curBaseLine}:s.points!==n.curPoints||s.baseLine!==n.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])})(O.PureComponent);js=ke;fe(ke,"displayName","Area");fe(ke,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!ya.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});fe(ke,"getBaseValue",function(a,t,r,s){var n=a.layout,i=a.baseValue,l=t.props.baseValue,d=l??i;if(ce(d)&&typeof d=="number")return d;var m=n==="horizontal"?s:r,x=m.scale.domain();if(m.type==="number"){var g=Math.max(x[0],x[1]),c=Math.min(x[0],x[1]);return d==="dataMin"?c:d==="dataMax"||g<0?g:Math.max(Math.min(x[0],x[1]),0)}return d==="dataMin"?x[0]:d==="dataMax"?x[1]:x[0]});fe(ke,"getComposedData",function(a){var t=a.props,r=a.item,s=a.xAxis,n=a.yAxis,i=a.xAxisTicks,l=a.yAxisTicks,d=a.bandSize,m=a.dataKey,x=a.stackedData,g=a.dataStartIndex,c=a.displayedData,p=a.offset,y=t.layout,j=x&&x.length,h=js.getBaseValue(t,r,s,n),o=y==="horizontal",f=!1,v=c.map(function(w,S){var M;j?M=x[g+S]:(M=xe(w,m),Array.isArray(M)?f=!0:M=[h,M]);var A=M[1]==null||j&&xe(w,m)==null;return o?{x:_a({axis:s,ticks:i,bandSize:d,entry:w,index:S}),y:A?null:n.scale(M[1]),value:M,payload:w}:{x:A?null:s.scale(M[1]),y:_a({axis:n,ticks:l,bandSize:d,entry:w,index:S}),value:M,payload:w}}),N;return j||f?N=v.map(function(w){var S=Array.isArray(w.value)?w.value[0]:null;return o?{x:w.x,y:S!=null&&w.y!=null?n.scale(S):null}:{x:S!=null?s.scale(S):null,y:w.y}}):N=o?n.scale(h):s.scale(h),Ce({points:v,baseLine:N,layout:y,isRange:f},p)});fe(ke,"renderDotItem",function(a,t){var r;if(b.isValidElement(a))r=b.cloneElement(a,t);else if(J(a))r=a(t);else{var s=ae("recharts-area-dot",typeof a!="boolean"?a.className:""),n=t.key,i=bs(t,Dn);r=b.createElement(xa,Ke({},i,{key:n,className:s}))}return r});var ra=Dt({chartName:"BarChart",GraphicalChild:Be,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Re},{axisType:"yAxis",AxisComp:ge}],formatAxisMap:ns}),Gn=Dt({chartName:"PieChart",GraphicalChild:Pe,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:rt},{axisType:"radiusAxis",AxisComp:st}],formatAxisMap:is,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Bn=Dt({chartName:"RadarChart",GraphicalChild:ut,axisComponents:[{axisType:"angleAxis",AxisComp:rt},{axisType:"radiusAxis",AxisComp:st}],formatAxisMap:is,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),zn=Dt({chartName:"AreaChart",GraphicalChild:ke,axisComponents:[{axisType:"xAxis",AxisComp:Re},{axisType:"yAxis",AxisComp:ge}],formatAxisMap:ns});function Vn({myChildren:a,selectedChildEmail:t,onSelectChild:r,currentUserEmail:s}){return e.jsx(P,{className:"border-2 border-purple-200 shadow-lg",children:e.jsxs(C,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Va,{className:"w-6 h-6 text-purple-500"}),"Select Child"]}),a.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-gray-600",children:"No children linked to your account yet."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Children can link their account to yours in their settings."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.map(n=>{const i=n.email===t,l={avatar_skin_tone:n.avatar_skin_tone||"medium",avatar_hair_style:n.avatar_hair_style||"short",avatar_hair_color:n.avatar_hair_color||"brown",avatar_eyes:n.avatar_eyes||"normal",avatar_outfit:n.avatar_outfit||"casual",avatar_accessory:n.avatar_accessory||"none"};return e.jsxs("button",{onClick:()=>r(n.email),className:`p-4 rounded-xl border-2 transition-all text-center ${i?"border-purple-500 bg-purple-50 shadow-lg scale-105":"border-gray-200 bg-white hover:border-purple-300 hover:bg-purple-50"}`,children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx(Ya,{avatarData:l,size:"medium"})}),e.jsx("h3",{className:"font-bold text-lg truncate",children:n.child_name||n.full_name||n.email.split("@")[0]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:n.email}),i&&e.jsxs("div",{className:"mt-2 flex items-center justify-center gap-1 text-purple-600 text-sm font-medium",children:["Selected ",e.jsx(qs,{className:"w-4 h-4"})]})]},n.email)})})]})})}function Wn({childProgress:a,childDailyChallenges:t,selectedChild:r}){const{data:s}=pe({queryKey:["currentUser"],queryFn:async()=>{const p=Y(X),y=await Gs(we(p,"users","USER_ID"));return y.exists()?y.data():null}}),{data:n=0}=pe({queryKey:["unreadChildReplies",r==null?void 0:r.email],queryFn:async()=>{const p=Y(X),y=la(_e(p,"messages"),Ee("parent_email","==",s==null?void 0:s.email),Ee("child_email","==",r==null?void 0:r.email),Ee("message_type","==","response"),Ee("parent_read","==",!1));return(await Ue(y)).size},initialData:0,enabled:!!(s!=null&&s.email)&&!!(r!=null&&r.email)}),i=a.length,l=a.reduce((p,y)=>p+(y.stars_earned||0),0),d=a.reduce((p,y)=>p+(y.correct_answers||0),0),m=a.reduce((p,y)=>p+(y.total_questions||0),0),x=m>0?(d/m*100).toFixed(1):0,g=t.length,c=a.length>0?a[0].created_date:null;return e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(P,{className:"border-2 border-blue-200",children:[e.jsx(L,{className:"bg-blue-50",children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5 text-blue-600"}),"Total Games"]})}),e.jsxs(C,{className:"p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:i}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c&&`Last: ${je(new Date(c),"MMM d")}`})]})]}),e.jsxs(P,{className:"border-2 border-yellow-200",children:[e.jsx(L,{className:"bg-yellow-50",children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5 text-yellow-600"}),"Total Stars"]})}),e.jsxs(C,{className:"p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:l}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Avg: ",i>0?(l/i).toFixed(1):0," per game"]})]})]}),e.jsxs(P,{className:"border-2 border-green-200",children:[e.jsx(L,{className:"bg-green-50",children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-green-600"}),"Accuracy"]})}),e.jsxs(C,{className:"p-4",children:[e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[x,"%"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[d," / ",m," correct"]})]})]}),e.jsxs(P,{className:"border-2 border-purple-200",children:[e.jsx(L,{className:"bg-purple-50",children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5 text-purple-600"}),"Daily Challenges"]})}),e.jsxs(C,{className:"p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:g}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"completed"})]})]}),e.jsxs(P,{className:"border-2 border-pink-200 md:col-span-2 lg:col-span-1",children:[e.jsx(L,{className:"bg-pink-50",children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-pink-600"}),"Messages",n>0&&e.jsxs(z,{className:"bg-pink-500 text-white animate-pulse ml-auto",children:[n," New"]})]})}),e.jsxs(C,{className:"p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-pink-600",children:n}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"unread replies"})]})]})]})}function Hn({childProgress:a,childDailyChallenges:t}){const r=()=>{const c={addition:{total:0,correct:0,games:0},subtraction:{total:0,correct:0,games:0},multiplication:{total:0,correct:0,games:0},division:{total:0,correct:0,games:0}};return a.forEach(p=>{c[p.operation]&&(c[p.operation].games++,c[p.operation].total+=p.total_questions,c[p.operation].correct+=p.correct_answers)}),Object.entries(c).map(([p,y])=>({operation:p.charAt(0).toUpperCase()+p.slice(1),accuracy:y.total>0?Math.round(y.correct/y.total*100):0,games:y.games}))},s=()=>{const c={easy:{total:0,correct:0,games:0},medium:{total:0,correct:0,games:0},hard:{total:0,correct:0,games:0}};return a.forEach(p=>{c[p.level]&&(c[p.level].games++,c[p.level].total+=p.total_questions,c[p.level].correct+=p.correct_answers)}),Object.entries(c).map(([p,y])=>({level:p.charAt(0).toUpperCase()+p.slice(1),accuracy:y.total>0?Math.round(y.correct/y.total*100):0,games:y.games}))},n=()=>a.slice(0,10).reverse().map((p,y)=>({game:`Game ${y+1}`,accuracy:Math.round(p.correct_answers/p.total_questions*100),score:p.score})),i=()=>{const p=[...r()].sort((h,o)=>o.accuracy-h.accuracy),y=p.slice(0,2).filter(h=>h.accuracy>=70),j=p.slice(-2).filter(h=>h.accuracy<70&&h.games>0);return{strengths:y,weaknesses:j}},l=r(),d=s(),m=n(),{strengths:x,weaknesses:g}=i();return a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(jt,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-xl text-gray-600",children:"No performance data available yet"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Data will appear once the child starts playing games"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(P,{className:"border-2 border-green-200 bg-green-50",children:[e.jsx(L,{children:e.jsxs($,{className:"flex items-center gap-2 text-green-700",children:[e.jsx(Ne,{className:"w-6 h-6"}),"Strengths"]})}),e.jsx(C,{children:x.length>0?e.jsx("div",{className:"space-y-3",children:x.map((c,p)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[e.jsx("span",{className:"font-medium",children:c.operation}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(z,{className:"bg-green-500",children:[c.accuracy,"%"]}),e.jsx(wt,{className:"w-5 h-5 text-green-600"})]})]},p))}):e.jsx("p",{className:"text-gray-600 text-center py-4",children:"Keep practicing to identify strengths!"})})]}),e.jsxs(P,{className:"border-2 border-orange-200 bg-orange-50",children:[e.jsx(L,{children:e.jsxs($,{className:"flex items-center gap-2 text-orange-700",children:[e.jsx(ma,{className:"w-6 h-6"}),"Areas for Improvement"]})}),e.jsx(C,{children:g.length>0?e.jsx("div",{className:"space-y-3",children:g.map((c,p)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[e.jsx("span",{className:"font-medium",children:c.operation}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(z,{variant:"outline",className:"border-orange-400",children:[c.accuracy,"%"]}),e.jsx(Za,{className:"w-5 h-5 text-orange-600"})]})]},p))}):e.jsx("p",{className:"text-gray-600 text-center py-4",children:"Great job! No weak areas identified."})})]})]}),e.jsxs(P,{children:[e.jsx(L,{children:e.jsx($,{children:"Performance by Operation"})}),e.jsx(C,{children:e.jsx(Oe,{width:"100%",height:300,children:e.jsxs(ra,{data:l,children:[e.jsx(He,{strokeDasharray:"3 3"}),e.jsx(Re,{dataKey:"operation"}),e.jsx(ge,{}),e.jsx(Te,{}),e.jsx(Qe,{}),e.jsx(Be,{dataKey:"accuracy",fill:"#8b5cf6",name:"Accuracy %"}),e.jsx(Be,{dataKey:"games",fill:"#ec4899",name:"Games Played"})]})})})]}),e.jsxs(P,{children:[e.jsx(L,{children:e.jsx($,{children:"Performance by Difficulty Level"})}),e.jsx(C,{children:e.jsx(Oe,{width:"100%",height:300,children:e.jsxs(ra,{data:d,children:[e.jsx(He,{strokeDasharray:"3 3"}),e.jsx(Re,{dataKey:"level"}),e.jsx(ge,{}),e.jsx(Te,{}),e.jsx(Qe,{}),e.jsx(Be,{dataKey:"accuracy",fill:"#10b981",name:"Accuracy %"}),e.jsx(Be,{dataKey:"games",fill:"#f59e0b",name:"Games Played"})]})})})]}),m.length>0&&e.jsxs(P,{children:[e.jsx(L,{children:e.jsx($,{children:"Recent Performance Trend"})}),e.jsx(C,{children:e.jsx(Oe,{width:"100%",height:300,children:e.jsxs(ls,{data:m,children:[e.jsx(He,{strokeDasharray:"3 3"}),e.jsx(Re,{dataKey:"game"}),e.jsx(ge,{}),e.jsx(Te,{}),e.jsx(Qe,{}),e.jsx(At,{type:"monotone",dataKey:"accuracy",stroke:"#8b5cf6",strokeWidth:3,name:"Accuracy %"}),e.jsx(At,{type:"monotone",dataKey:"score",stroke:"#10b981",strokeWidth:3,name:"Score"})]})})})]})]})}function Qn({childEmail:a,childGoals:t,childProgress:r,childDailyChallenges:s}){const n=Ge(),[i,l]=O.useState(!1),[d,m]=O.useState({goal_type:"total_stars",target_value:10,title:"",description:"",reward_message:"",operation:"",level:"",due_date:""}),x=ie({mutationFn:async o=>{const f=Y(X);await ca(_e(f,"customGoals"),{...o,child_email:a})},onSuccess:()=>{n.invalidateQueries({queryKey:["childGoals"]}),l(!1),m({goal_type:"total_stars",target_value:10,title:"",description:"",reward_message:"",operation:"",level:"",due_date:""})}}),g=ie({mutationFn:async o=>{const f=Y(X);await oa(we(f,"customGoals",o))},onSuccess:()=>{n.invalidateQueries({queryKey:["childGoals"]})}}),c=ie({mutationFn:async({goalId:o,data:f})=>{const v=Y(X);await bt(we(v,"customGoals",o),f,{merge:!0})},onSuccess:()=>{n.invalidateQueries({queryKey:["childGoals"]})}}),p=o=>{let f=0;switch(o.goal_type){case"total_stars":f=r.reduce((N,w)=>N+(w.stars_earned||0),0);break;case"games_played":f=r.length;break;case"accuracy":if(r.length>0){const N=r.reduce((w,S)=>w+S.correct_answers/S.total_questions*100,0);f=Math.round(N/r.length)}break;case"daily_streak":f=y();break;case"specific_operation":f=r.filter(N=>N.operation===o.operation&&(!o.level||N.level===o.level)).length;break}return f!==o.current_value&&c.mutate({goalId:o.id,data:{current_value:f}}),f>=o.target_value&&!o.is_completed&&c.mutate({goalId:o.id,data:{is_completed:!0}}),f},y=()=>{if(s.length===0)return 0;const o=[...s].sort((N,w)=>new Date(w.challenge_date)-new Date(N.challenge_date));let f=0,v=new Date;for(const N of o){const w=new Date(N.challenge_date);if(Math.floor((v-w)/(1e3*60*60*24))===f)f++;else break}return f},j=()=>{d.title&&x.mutate(d)},h={total_stars:"Total Stars",games_played:"Games Played",accuracy:"Average Accuracy",daily_streak:"Daily Streak",specific_operation:"Practice Specific Operation"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(ne,{className:"w-6 h-6 text-purple-500"}),"Custom Goals & Challenges"]}),e.jsxs(R,{onClick:()=>l(!i),className:"bg-purple-500 hover:bg-purple-600",children:[e.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Add Goal"]})]}),i&&e.jsxs(P,{className:"border-2 border-purple-300",children:[e.jsx(L,{className:"bg-purple-50",children:e.jsx($,{children:"Create New Goal"})}),e.jsxs(C,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"title",children:"Goal Title"}),e.jsx(B,{id:"title",value:d.title,onChange:o=>m({...d,title:o.target.value}),placeholder:"e.g., Master Multiplication"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"goal_type",children:"Goal Type"}),e.jsxs(de,{value:d.goal_type,onValueChange:o=>m({...d,goal_type:o}),children:[e.jsx(ue,{children:e.jsx(me,{})}),e.jsx(he,{children:Object.entries(h).map(([o,f])=>e.jsx(D,{value:o,children:f},o))})]})]}),d.goal_type==="specific_operation"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"operation",children:"Operation"}),e.jsxs(de,{value:d.operation,onValueChange:o=>m({...d,operation:o}),children:[e.jsx(ue,{children:e.jsx(me,{placeholder:"Select operation"})}),e.jsxs(he,{children:[e.jsx(D,{value:"addition",children:"Addition"}),e.jsx(D,{value:"subtraction",children:"Subtraction"}),e.jsx(D,{value:"multiplication",children:"Multiplication"}),e.jsx(D,{value:"division",children:"Division"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"level",children:"Level (Optional)"}),e.jsxs(de,{value:d.level,onValueChange:o=>m({...d,level:o}),children:[e.jsx(ue,{children:e.jsx(me,{placeholder:"Any level"})}),e.jsxs(he,{children:[e.jsx(D,{value:null,children:"Any Level"}),e.jsx(D,{value:"easy",children:"Easy"}),e.jsx(D,{value:"medium",children:"Medium"}),e.jsx(D,{value:"hard",children:"Hard"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"target",children:"Target Value"}),e.jsx(B,{id:"target",type:"number",min:"1",value:d.target_value,onChange:o=>m({...d,target_value:parseInt(o.target.value)})}),e.jsx("p",{className:"text-sm text-gray-500",children:d.goal_type==="accuracy"?"Target percentage (e.g., 80 for 80%)":"Target number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(Xe,{id:"description",value:d.description,onChange:o=>m({...d,description:o.target.value}),placeholder:"Additional details about this goal..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"reward",children:"Reward Message (Optional)"}),e.jsx(B,{id:"reward",value:d.reward_message,onChange:o=>m({...d,reward_message:o.target.value}),placeholder:"e.g., Great job! You're a multiplication master!"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"due_date",children:"Due Date (Optional)"}),e.jsx(B,{id:"due_date",type:"date",value:d.due_date,onChange:o=>m({...d,due_date:o.target.value})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{onClick:j,className:"flex-1 bg-purple-500 hover:bg-purple-600",disabled:!d.title||x.isPending,children:x.isPending?"Creating...":"Create Goal"}),e.jsx(R,{variant:"outline",onClick:()=>l(!1),children:"Cancel"})]})]})]}),e.jsx("div",{className:"space-y-4",children:t.length===0?e.jsx(P,{className:"border-2 border-gray-200",children:e.jsxs(C,{className:"p-12 text-center",children:[e.jsx(ne,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"No goals set yet"}),e.jsx("p",{className:"text-gray-500",children:"Create custom goals to motivate and track progress"})]})}):t.map(o=>{const f=p(o),v=Math.min(f/o.target_value*100,100),N=o.is_completed||f>=o.target_value;return e.jsxs(P,{className:`border-2 ${N?"border-green-300 bg-green-50":"border-purple-200"}`,children:[e.jsx(L,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs($,{className:"flex items-center gap-2",children:[N?e.jsx(Ne,{className:"w-6 h-6 text-green-600"}):e.jsx(ne,{className:"w-6 h-6 text-purple-500"}),o.title]}),e.jsx(z,{variant:"outline",children:h[o.goal_type]}),N&&e.jsx(z,{className:"bg-green-500",children:"Completed!"})]}),o.description&&e.jsx("p",{className:"text-sm text-gray-600",children:o.description}),o.due_date&&e.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1 mt-1",children:[e.jsx(De,{className:"w-4 h-4"}),"Due: ",je(new Date(o.due_date),"MMM d, yyyy")]})]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>g.mutate(o.id),className:"text-gray-400 hover:text-red-600",children:e.jsx(Mt,{className:"w-5 h-5"})})]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:"Progress"}),e.jsxs("span",{className:"font-bold",children:[f," / ",o.target_value,o.goal_type==="accuracy"&&"%"]})]}),e.jsx(cs,{value:v,className:"h-3"}),N&&o.reward_message&&e.jsx("div",{className:"bg-green-100 border-2 border-green-300 rounded-lg p-3 text-center",children:e.jsxs("p",{className:"text-sm font-medium text-green-800",children:[" ",o.reward_message]})})]})})]},o.id)})})]})}function Un({childProgress:a,childDailyChallenges:t}){const s=[...a.map(l=>({...l,type:"game"})),...t.map(l=>({...l,type:"daily"}))].sort((l,d)=>new Date(d.created_date)-new Date(l.created_date)).slice(0,20),n={addition:"",subtraction:"",multiplication:"",division:""},i={easy:"bg-green-500",medium:"bg-yellow-500",hard:"bg-red-500"};return s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(De,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-xl text-gray-600",children:"No activity recorded yet"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Activities will appear here as the child plays"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(De,{className:"w-6 h-6 text-purple-500"}),"Recent Activity Timeline"]}),e.jsx("div",{className:"space-y-3",children:s.map((l,d)=>{const m=Math.round(l.correct_answers/l.total_questions*100);return e.jsx(P,{className:"border-2 border-gray-200 hover:shadow-md transition-shadow",children:e.jsx(C,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl flex items-center justify-center flex-shrink-0",children:l.type==="daily"?e.jsx(De,{className:"w-6 h-6 text-purple-600"}):e.jsx("span",{className:"text-2xl",children:n[l.operation]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[l.type==="daily"?e.jsx("h4",{className:"font-bold text-lg",children:"Daily Challenge"}):e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-lg capitalize",children:l.operation}),e.jsx(z,{className:i[l.level]+" text-white",children:l.level})]}),e.jsx("span",{className:"text-sm text-gray-500",children:je(new Date(l.created_date),"MMM d, h:mm a")})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4 text-purple-500"}),e.jsxs("span",{className:"font-medium",children:[l.score," pts"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"font-medium",children:[l.correct_answers,"/",l.total_questions," (",m,"%)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-blue-500"}),e.jsxs("span",{className:"font-medium",children:[l.time_taken,"s"]})]}),l.stars_earned!==void 0&&e.jsx("div",{className:"flex items-center gap-1",children:[...Array(3)].map((x,g)=>e.jsx(be,{className:`w-4 h-4 ${g<l.stars_earned?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},g))}),l.bonus_stars!==void 0&&l.bonus_stars>0&&e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs(z,{className:"bg-yellow-500 text-white",children:["+",l.bonus_stars," Bonus "]})})]})]})]})})})},d)})})]})}var It="Checkbox",[Yn]=Wa(It),[Xn,va]=Yn(It);function Zn(a){const{__scopeCheckbox:t,checked:r,children:s,defaultChecked:n,disabled:i,form:l,name:d,onCheckedChange:m,required:x,value:g="on",internal_do_not_use_render:c}=a,[p,y]=Ha({prop:r,defaultProp:n??!1,onChange:m,caller:It}),[j,h]=O.useState(null),[o,f]=O.useState(null),v=O.useRef(!1),N=j?!!l||!!j.closest("form"):!0,w={checked:p,disabled:i,setChecked:y,control:j,setControl:h,name:d,form:l,value:g,hasConsumerStoppedPropagationRef:v,required:x,defaultChecked:Le(n)?!1:n,isFormControl:N,bubbleInput:o,setBubbleInput:f};return e.jsx(Xn,{scope:t,...w,children:Jn(c)?c(w):s})}var _s="CheckboxTrigger",As=O.forwardRef(({__scopeCheckbox:a,onKeyDown:t,onClick:r,...s},n)=>{const{control:i,value:l,disabled:d,checked:m,required:x,setControl:g,setChecked:c,hasConsumerStoppedPropagationRef:p,isFormControl:y,bubbleInput:j}=va(_s,a),h=Et(n,g),o=O.useRef(m);return O.useEffect(()=>{const f=i==null?void 0:i.form;if(f){const v=()=>c(o.current);return f.addEventListener("reset",v),()=>f.removeEventListener("reset",v)}},[i,c]),e.jsx(dt.button,{type:"button",role:"checkbox","aria-checked":Le(m)?"mixed":m,"aria-required":x,"data-state":Os(m),"data-disabled":d?"":void 0,disabled:d,value:l,...s,ref:h,onKeyDown:Qt(t,f=>{f.key==="Enter"&&f.preventDefault()}),onClick:Qt(r,f=>{c(v=>Le(v)?!0:!v),j&&y&&(p.current=f.isPropagationStopped(),p.current||f.stopPropagation())})})});As.displayName=_s;var ja=O.forwardRef((a,t)=>{const{__scopeCheckbox:r,name:s,checked:n,defaultChecked:i,required:l,disabled:d,value:m,onCheckedChange:x,form:g,...c}=a;return e.jsx(Zn,{__scopeCheckbox:r,checked:n,defaultChecked:i,disabled:d,required:l,onCheckedChange:x,name:s,form:g,value:m,internal_do_not_use_render:({isFormControl:p})=>e.jsxs(e.Fragment,{children:[e.jsx(As,{...c,ref:t,__scopeCheckbox:r}),p&&e.jsx(Ss,{__scopeCheckbox:r})]})})});ja.displayName=It;var ks="CheckboxIndicator",Ps=O.forwardRef((a,t)=>{const{__scopeCheckbox:r,forceMount:s,...n}=a,i=va(ks,r);return e.jsx(Bs,{present:s||Le(i.checked)||i.checked===!0,children:e.jsx(dt.span,{"data-state":Os(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...a.style}})})});Ps.displayName=ks;var Cs="CheckboxBubbleInput",Ss=O.forwardRef(({__scopeCheckbox:a,...t},r)=>{const{control:s,hasConsumerStoppedPropagationRef:n,checked:i,defaultChecked:l,required:d,disabled:m,name:x,value:g,form:c,bubbleInput:p,setBubbleInput:y}=va(Cs,a),j=Et(r,y),h=os(i),o=Qa(s);O.useEffect(()=>{const v=p;if(!v)return;const N=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(N,"checked").set,M=!n.current;if(h!==i&&S){const A=new Event("click",{bubbles:M});v.indeterminate=Le(i),S.call(v,Le(i)?!1:i),v.dispatchEvent(A)}},[p,h,i,n]);const f=O.useRef(Le(i)?!1:i);return e.jsx(dt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??f.current,required:d,disabled:m,name:x,value:g,form:c,...t,tabIndex:-1,ref:j,style:{...t.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Ss.displayName=Cs;function Jn(a){return typeof a=="function"}function Le(a){return a==="indeterminate"}function Os(a){return Le(a)?"indeterminate":a?"checked":"unchecked"}const Ts=O.forwardRef(({className:a,...t},r)=>e.jsx(ja,{ref:r,className:Nt("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...t,children:e.jsx(Ps,{className:Nt("flex items-center justify-center text-current"),children:e.jsx(zs,{className:"h-4 w-4"})})}));Ts.displayName=ja.displayName;function ei(){var j;const a=Ge(),[t,r]=O.useState(!1),[s,n]=O.useState([]),[i,l]=O.useState({challenge_name:"",challenge_type:"team_score",target_value:1e3,description:"",start_date:new Date().toISOString().split("T")[0],end_date:"",reward_stars:10,reward_coins:50,reward_message:"",specific_operation:"any",specific_level:"any"}),{data:d}=pe({queryKey:["currentUser"],queryFn:async()=>({email:"parent@example.com"}),initialData:{email:"parent@example.com"}}),{data:m=[]}=pe({queryKey:["allUsers"],queryFn:async()=>[],initialData:[]}),x=m.filter(h=>h.parent_email===(d==null?void 0:d.email)),g=ie({mutationFn:async h=>{throw console.log("Team challenge created (placeholder):",h),alert("Team challenge creation is currently being migrated to Firebase. This feature will be available soon!"),new Error("Challenge creation pending implementation")},onSuccess:()=>{a.invalidateQueries({queryKey:["teamChallenges"]}),a.invalidateQueries({queryKey:["myTeamChallenges"]}),r(!1),n([]),l({challenge_name:"",challenge_type:"team_score",target_value:1e3,description:"",start_date:new Date().toISOString().split("T")[0],end_date:"",reward_stars:10,reward_coins:50,reward_message:"",specific_operation:"any",specific_level:"any"})}}),c=()=>{!i.challenge_name||s.length===0||g.mutate({...i,creator_email:d.email,team_members:s})},p=h=>{s.includes(h)?n(s.filter(o=>o!==h)):n([...s,h])},y=[{value:"team_score",label:"Team Score Challenge",description:"Combine all team members' scores"},{value:"combined_accuracy",label:"Combined Accuracy Goal",description:"Average accuracy across all members"},{value:"total_games",label:"Total Games Challenge",description:"Total number of games played by the team"},{value:"total_stars",label:"Star Collection Challenge",description:"Collect stars together as a team"},{value:"daily_streak_sum",label:"Daily Challenge Streak",description:"Combined daily challenge completions"},{value:"speed_challenge",label:"Speed Challenge",description:"Best (fastest) time from any team member"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(gt,{className:"w-6 h-6 text-purple-500"}),"Team Challenges"]}),e.jsxs(R,{onClick:()=>r(!t),className:"bg-purple-500 hover:bg-purple-600",children:[e.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Create Team Challenge"]})]}),t&&e.jsxs(P,{className:"border-2 border-purple-300",children:[e.jsx(L,{className:"bg-purple-50",children:e.jsx($,{children:"Create New Team Challenge"})}),e.jsxs(C,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"challenge_name",children:"Challenge Name"}),e.jsx(B,{id:"challenge_name",value:i.challenge_name,onChange:h=>l({...i,challenge_name:h.target.value}),placeholder:"e.g., Family Math Marathon"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"challenge_type",children:"Challenge Type"}),e.jsxs(de,{value:i.challenge_type,onValueChange:h=>l({...i,challenge_type:h}),children:[e.jsx(ue,{children:e.jsx(me,{})}),e.jsx(he,{children:y.map(h=>e.jsx(D,{value:h.value,children:h.label},h.value))})]}),e.jsx("p",{className:"text-sm text-gray-600",children:(j=y.find(h=>h.value===i.challenge_type))==null?void 0:j.description})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"specific_operation",children:"Specific Operation (Optional)"}),e.jsxs(de,{value:i.specific_operation,onValueChange:h=>l({...i,specific_operation:h}),children:[e.jsx(ue,{children:e.jsx(me,{})}),e.jsxs(he,{children:[e.jsx(D,{value:"any",children:"Any Operation"}),e.jsx(D,{value:"addition",children:"Addition Only"}),e.jsx(D,{value:"subtraction",children:"Subtraction Only"}),e.jsx(D,{value:"multiplication",children:"Multiplication Only"}),e.jsx(D,{value:"division",children:"Division Only"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"specific_level",children:"Specific Level (Optional)"}),e.jsxs(de,{value:i.specific_level,onValueChange:h=>l({...i,specific_level:h}),children:[e.jsx(ue,{children:e.jsx(me,{})}),e.jsxs(he,{children:[e.jsx(D,{value:"any",children:"Any Level"}),e.jsx(D,{value:"easy",children:"Easy Only"}),e.jsx(D,{value:"medium",children:"Medium Only"}),e.jsx(D,{value:"hard",children:"Hard Only"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"target_value",children:"Target Value"}),e.jsx(B,{id:"target_value",type:"number",min:"1",value:i.target_value,onChange:h=>l({...i,target_value:parseInt(h.target.value)})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"start_date",children:"Start Date"}),e.jsx(B,{id:"start_date",type:"date",value:i.start_date,onChange:h=>l({...i,start_date:h.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"end_date",children:"End Date (Optional)"}),e.jsx(B,{id:"end_date",type:"date",value:i.end_date,onChange:h=>l({...i,end_date:h.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(Xe,{id:"description",value:i.description,onChange:h=>l({...i,description:h.target.value}),placeholder:"Describe the challenge..."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"reward_stars",children:"Reward Stars (per member)"}),e.jsx(B,{id:"reward_stars",type:"number",min:"0",value:i.reward_stars,onChange:h=>l({...i,reward_stars:parseInt(h.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"reward_coins",children:"Reward Coins (per member)"}),e.jsx(B,{id:"reward_coins",type:"number",min:"0",value:i.reward_coins,onChange:h=>l({...i,reward_coins:parseInt(h.target.value)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"reward_message",children:"Reward Message (Optional)"}),e.jsx(B,{id:"reward_message",value:i.reward_message,onChange:h=>l({...i,reward_message:h.target.value}),placeholder:"e.g., Amazing teamwork! You did it together!"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{children:"Select Team Members"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2 max-h-60 overflow-y-auto",children:x.length===0?e.jsx("p",{className:"text-gray-600 text-sm",children:"No children linked to your account"}):x.map(h=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ts,{id:h.email,checked:s.includes(h.email),onCheckedChange:()=>p(h.email)}),e.jsx(T,{htmlFor:h.email,className:"cursor-pointer flex-1",children:h.child_name||h.full_name||h.email})]},h.email))}),s.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.map(h=>{const o=x.find(f=>f.email===h);return e.jsxs(z,{className:"bg-purple-500 text-white",children:[(o==null?void 0:o.child_name)||(o==null?void 0:o.full_name)||h,e.jsx("button",{onClick:()=>p(h),className:"ml-2 hover:bg-purple-600 rounded-full",children:e.jsx(Vs,{className:"w-3 h-3"})})]},h)})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{onClick:c,className:"flex-1 bg-purple-500 hover:bg-purple-600",disabled:!i.challenge_name||s.length===0||g.isPending,children:g.isPending?"Creating...":"Create Challenge"}),e.jsx(R,{variant:"outline",onClick:()=>r(!1),children:"Cancel"})]})]})]})]})}var Ft="Switch",[ti]=Wa(Ft),[ai,si]=ti(Ft),Es=O.forwardRef((a,t)=>{const{__scopeSwitch:r,name:s,checked:n,defaultChecked:i,required:l,disabled:d,value:m="on",onCheckedChange:x,form:g,...c}=a,[p,y]=O.useState(null),j=Et(t,N=>y(N)),h=O.useRef(!1),o=p?g||!!p.closest("form"):!0,[f,v]=Ha({prop:n,defaultProp:i??!1,onChange:x,caller:Ft});return e.jsxs(ai,{scope:r,checked:f,disabled:d,children:[e.jsx(dt.button,{type:"button",role:"switch","aria-checked":f,"aria-required":l,"data-state":Ls(f),"data-disabled":d?"":void 0,disabled:d,value:m,...c,ref:j,onClick:Qt(a.onClick,N=>{v(w=>!w),o&&(h.current=N.isPropagationStopped(),h.current||N.stopPropagation())})}),o&&e.jsx(Ms,{control:p,bubbles:!h.current,name:s,value:m,checked:f,required:l,disabled:d,form:g,style:{transform:"translateX(-100%)"}})]})});Es.displayName=Ft;var Ds="SwitchThumb",Rs=O.forwardRef((a,t)=>{const{__scopeSwitch:r,...s}=a,n=si(Ds,r);return e.jsx(dt.span,{"data-state":Ls(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:t})});Rs.displayName=Ds;var ri="SwitchBubbleInput",Ms=O.forwardRef(({__scopeSwitch:a,control:t,checked:r,bubbles:s=!0,...n},i)=>{const l=O.useRef(null),d=Et(l,i),m=os(r),x=Qa(t);return O.useEffect(()=>{const g=l.current;if(!g)return;const c=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(c,"checked").set;if(m!==r&&y){const j=new Event("click",{bubbles:s});y.call(g,r),g.dispatchEvent(j)}},[m,r,s]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:d,style:{...n.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ms.displayName=ri;function Ls(a){return a?"checked":"unchecked"}var $s=Es,ni=Rs;const na=O.forwardRef(({className:a,...t},r)=>e.jsx($s,{className:Nt("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...t,ref:r,children:e.jsx(ni,{className:Nt("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));na.displayName=$s.displayName;function ii({childEmail:a,currentControls:t}){const r=Ge(),[s,n]=O.useState(!1),[i,l]=O.useState({daily_time_limit_minutes:0,time_limits_by_operation:{},enforce_time_limits:!0,time_limit_warning_minutes:5,allowed_operations:["addition","subtraction","multiplication","division"],allowed_levels:["easy","medium","hard"],blocked_features:[],focus_operations:[],focus_priority:"suggest",focus_reminder_frequency:"daily",weekly_goal_games:0,weekly_goal_stars:0,monthly_goal_games:0,monthly_goal_accuracy:0}),[d,m]=O.useState([]),[x,g]=O.useState(!1),[c,p]=O.useState({title:"",description:"",target_type:"games_completed",target_value:10,operation:"any",level:"any",deadline:""});O.useEffect(()=>{t&&(l({...i,...t}),t.custom_learning_goals&&m(t.custom_learning_goals))},[t]);const y=ie({mutationFn:async()=>{const u=Y(X),E=(await Ue(_e(u,"users"))).docs.find(K=>K.data().email===a);if(!E)throw new Error("Child not found");await bt(we(u,"users",E.id),{parental_controls:{...i,custom_learning_goals:d}},{merge:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["allUsers"]}),n(!0),setTimeout(()=>n(!1),3e3)}}),j=()=>{y.mutate()},h=[{id:"addition",name:"Addition",emoji:""},{id:"subtraction",name:"Subtraction",emoji:""},{id:"multiplication",name:"Multiplication",emoji:""},{id:"division",name:"Division",emoji:""},{id:"fractions",name:"Fractions",emoji:""},{id:"decimals",name:"Decimals",emoji:"0.5"},{id:"percentages",name:"Percentages",emoji:"%"},{id:"word_problems",name:"Word Problems",emoji:""},{id:"money",name:"Money Math",emoji:""},{id:"time",name:"Time",emoji:""},{id:"geometry",name:"Geometry",emoji:""},{id:"mixed",name:"Mixed",emoji:""}],o=[{id:"easy",name:"Easy"},{id:"medium",name:"Medium"},{id:"hard",name:"Hard"},{id:"expert",name:"Expert"}],f=[{id:"shop",name:"Shop",description:"Disable access to the rewards shop"},{id:"leaderboards",name:"Leaderboards",description:"Hide competitive leaderboards"},{id:"team_challenges",name:"Team Challenges",description:"Disable team-based challenges"},{id:"daily_challenge",name:"Daily Challenge",description:"Disable daily challenges"},{id:"power_ups",name:"Power-Ups",description:"Prevent using power-ups in games"}],v=(u,_)=>{const E=_==="allowed"?"allowed_operations":"focus_operations",K=i[E];K.includes(u)?l({...i,[E]:K.filter(k=>k!==u)}):l({...i,[E]:[...K,u]})},N=u=>{const _=i.allowed_levels;_.includes(u)?l({...i,allowed_levels:_.filter(E=>E!==u)}):l({...i,allowed_levels:[..._,u]})},w=u=>{const _=i.blocked_features||[];_.includes(u)?l({...i,blocked_features:_.filter(E=>E!==u)}):l({...i,blocked_features:[..._,u]})},S=(u,_)=>{l({...i,time_limits_by_operation:{...i.time_limits_by_operation||{},[u]:parseInt(_)||0}})},M=()=>{c.title&&(m([...d,{...c,id:Date.now().toString()}]),p({title:"",description:"",target_type:"games_completed",target_value:10,operation:"any",level:"any",deadline:""}),g(!1))},A=u=>{m(d.filter(_=>_.id!==u))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(We,{className:"w-6 h-6 text-blue-600"}),"Advanced Parental Controls"]})}),s&&e.jsxs(ee,{className:"bg-green-50 border-green-200",children:[e.jsx(Aa,{className:"w-4 h-4 text-green-600"}),e.jsxs(te,{className:"text-green-800",children:[e.jsx(Ne,{className:"w-4 h-4 inline mr-2"}),"Settings saved successfully! Changes are now active."]})]}),e.jsxs(da,{defaultValue:"time-limits",className:"w-full",children:[e.jsxs(ua,{className:"grid w-full grid-cols-4",children:[e.jsxs(W,{value:"time-limits",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Time Limits"]}),e.jsxs(W,{value:"content",children:[e.jsx(xt,{className:"w-4 h-4 mr-2"}),"Content Filter"]}),e.jsxs(W,{value:"focus",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Focus Topics"]}),e.jsxs(W,{value:"goals",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Custom Goals"]})]}),e.jsx(H,{value:"time-limits",className:"space-y-6",children:e.jsxs(P,{className:"border-2 border-blue-200",children:[e.jsx(L,{className:"bg-blue-50",children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-blue-600"}),"Daily Time Limits"]})}),e.jsxs(C,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{htmlFor:"daily_limit",className:"text-base font-bold",children:"Overall Daily Time Limit"}),e.jsx(na,{checked:i.enforce_time_limits,onCheckedChange:u=>l({...i,enforce_time_limits:u})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(B,{id:"daily_limit",type:"number",min:"0",max:"480",value:i.daily_time_limit_minutes,onChange:u=>l({...i,daily_time_limit_minutes:parseInt(u.target.value)||0}),className:"max-w-xs",disabled:!i.enforce_time_limits}),e.jsx("span",{className:"text-gray-600",children:"minutes per day"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:i.daily_time_limit_minutes===0?"Set to 0 for unlimited time":`Child can use the app for ${i.daily_time_limit_minutes} minutes per day`})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[e.jsx(T,{htmlFor:"warning_time",className:"text-base font-bold",children:"Time Limit Warning"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(B,{id:"warning_time",type:"number",min:"1",max:"30",value:i.time_limit_warning_minutes,onChange:u=>l({...i,time_limit_warning_minutes:parseInt(u.target.value)||5}),className:"max-w-xs",disabled:!i.enforce_time_limits||i.daily_time_limit_minutes===0}),e.jsx("span",{className:"text-gray-600",children:"minutes before limit"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Show a warning when this many minutes remain"})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[e.jsx(T,{className:"text-base font-bold",children:"Time Limits by Math Concept (Optional)"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Set specific time limits for individual math concepts. Leave at 0 for no limit."}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:h.map(u=>{var _;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-2xl",children:u.emoji}),e.jsx("div",{className:"flex-1",children:e.jsx(T,{className:"text-sm font-medium",children:u.name})}),e.jsx(B,{type:"number",min:"0",max:"120",value:((_=i.time_limits_by_operation)==null?void 0:_[u.id])||0,onChange:E=>S(u.id,E.target.value),className:"w-20",disabled:!i.enforce_time_limits}),e.jsx("span",{className:"text-xs text-gray-500",children:"min"})]},u.id)})})]}),e.jsxs(ee,{className:"bg-yellow-50 border-yellow-200",children:[e.jsx(Ut,{className:"w-4 h-4 text-yellow-600"}),e.jsxs(te,{className:"text-yellow-800 text-sm",children:[e.jsx("strong",{children:"How it works:"})," Time limits are enforced per calendar day. When time runs out, your child will be notified and games will be locked until the next day."]})]})]})]})}),e.jsxs(H,{value:"content",className:"space-y-6",children:[e.jsxs(P,{className:"border-2 border-green-200",children:[e.jsx(L,{className:"bg-green-50",children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"w-5 h-5 text-green-600"}),"Allowed Math Concepts"]})}),e.jsxs(C,{className:"p-6 space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select which math concepts your child can access. At least one must be selected."}),e.jsx("div",{className:"grid md:grid-cols-3 gap-3",children:h.map(u=>e.jsx("div",{className:`p-4 rounded-lg border-2 transition-all cursor-pointer ${i.allowed_operations.includes(u.id)?"border-green-500 bg-green-50":"border-gray-200 bg-gray-50"}`,onClick:()=>v(u.id,"allowed"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:u.emoji}),e.jsx("div",{className:"text-sm font-medium",children:u.name})]})},u.id))}),e.jsxs(ee,{className:"bg-yellow-50 border-yellow-200 mt-4",children:[e.jsx(Ut,{className:"w-4 h-4 text-yellow-600"}),e.jsx(te,{className:"text-yellow-800 text-sm",children:"At least one operation must be allowed for your child to play games."})]})]})]}),e.jsxs(P,{className:"border-2 border-purple-200",children:[e.jsx(L,{className:"bg-purple-50",children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"w-5 h-5 text-purple-600"}),"Allowed Difficulty Levels"]})}),e.jsxs(C,{className:"p-6 space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Control which difficulty levels your child can play."}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:o.map(u=>e.jsx("div",{className:`p-4 rounded-lg border-2 transition-all cursor-pointer ${i.allowed_levels.includes(u.id)?"border-purple-500 bg-purple-50":"border-gray-200 bg-gray-50"}`,onClick:()=>N(u.id),children:e.jsx("div",{className:"text-center font-medium",children:u.name})},u.id))})]})]}),e.jsxs(P,{className:"border-2 border-orange-200",children:[e.jsx(L,{className:"bg-orange-50",children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"w-5 h-5 text-orange-600"}),"Feature Access Control"]})}),e.jsxs(C,{className:"p-6 space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Control which app features your child can access."}),f.map(u=>{var _;return e.jsxs("div",{className:"flex items-start justify-between p-4 bg-gray-50 rounded-lg border-2 border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold mb-1",children:u.name}),e.jsx("p",{className:"text-sm text-gray-600",children:u.description})]}),e.jsx(na,{checked:!((_=i.blocked_features)!=null&&_.includes(u.id)),onCheckedChange:()=>w(u.id)})]},u.id)})]})]})]}),e.jsx(H,{value:"focus",className:"space-y-6",children:e.jsxs(P,{className:"border-2 border-indigo-200",children:[e.jsx(L,{className:"bg-indigo-50",children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-indigo-600"}),"Focus Topics & Recommendations"]})}),e.jsx(C,{className:"p-6 space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-base font-bold mb-3 block",children:"Select Focus Operations"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Highlight specific math concepts for your child to practice more."}),e.jsx("div",{className:"grid md:grid-cols-3 gap-3",children:h.map(u=>e.jsx("div",{className:`p-4 rounded-lg border-2 transition-all cursor-pointer ${i.focus_operations.includes(u.id)?"border-indigo-500 bg-indigo-50 ring-2 ring-indigo-200":"border-gray-200 bg-gray-50"}`,onClick:()=>v(u.id,"focus"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:u.emoji}),e.jsx("div",{className:"text-sm font-medium",children:u.name}),i.focus_operations.includes(u.id)&&e.jsx(Badge,{className:"mt-2 bg-indigo-500 text-white text-xs",children:"Focus"})]})},u.id))})]}),i.focus_operations.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pt-4 border-t space-y-3",children:[e.jsx(T,{className:"text-base font-bold",children:"Focus Priority Mode"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${i.focus_priority==="suggest"?"border-indigo-500 bg-indigo-50":"border-gray-200 bg-white"}`,onClick:()=>l({...i,focus_priority:"suggest"}),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${i.focus_priority==="suggest"?"border-indigo-500":"border-gray-300"}`,children:i.focus_priority==="suggest"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-500"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:"Suggest (Recommended)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Show reminders and highlight focus topics, but allow access to all enabled content"})]})]})}),e.jsx("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${i.focus_priority==="enforce"?"border-indigo-500 bg-indigo-50":"border-gray-200 bg-white"}`,onClick:()=>l({...i,focus_priority:"enforce"}),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${i.focus_priority==="enforce"?"border-indigo-500":"border-gray-300"}`,children:i.focus_priority==="enforce"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-500"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:"Enforce (Strict)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Only allow focus topics - other content will be locked"})]})]})})]})]}),e.jsxs("div",{className:"pt-4 border-t space-y-3",children:[e.jsx(T,{className:"text-base font-bold",children:"Reminder Frequency"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["never","daily","every_session"].map(u=>e.jsx("div",{className:`p-3 rounded-lg border-2 cursor-pointer text-center transition-all ${i.focus_reminder_frequency===u?"border-indigo-500 bg-indigo-50":"border-gray-200 bg-white"}`,onClick:()=>l({...i,focus_reminder_frequency:u}),children:e.jsx("div",{className:"font-medium capitalize",children:u==="every_session"?"Every Game":u})},u))})]})]}),i.focus_operations.length===0&&e.jsxs(ee,{className:"bg-blue-50 border-blue-200",children:[e.jsx(ne,{className:"w-4 h-4 text-blue-600"}),e.jsx(te,{className:"text-blue-800 text-sm",children:"Select at least one operation above to set it as a focus topic for your child."})]})]})})]})}),e.jsxs(H,{value:"goals",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"Custom Learning Goals"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create personalized goals tailored to your child's needs"})]}),e.jsxs(R,{onClick:()=>g(!x),className:"bg-indigo-500 hover:bg-indigo-600",children:[e.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Add Goal"]})]}),x&&e.jsxs(P,{className:"border-2 border-indigo-300",children:[e.jsx(L,{className:"bg-indigo-50",children:e.jsx($,{children:"Create New Learning Goal"})}),e.jsxs(C,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"goal_title",children:"Goal Title"}),e.jsx(B,{id:"goal_title",value:c.title,onChange:u=>p({...c,title:u.target.value}),placeholder:"e.g., Master Multiplication Tables"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"goal_description",children:"Description (Optional)"}),e.jsx(Xe,{id:"goal_description",value:c.description,onChange:u=>p({...c,description:u.target.value}),placeholder:"Add more details about this goal...",rows:2})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"target_type",children:"Goal Type"}),e.jsxs("select",{id:"target_type",value:c.target_type,onChange:u=>p({...c,target_type:u.target.value}),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"games_completed",children:"Games Completed"}),e.jsx("option",{value:"stars_earned",children:"Stars Earned"}),e.jsx("option",{value:"accuracy",children:"Accuracy (%)"}),e.jsx("option",{value:"time_spent",children:"Time Spent (minutes)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"target_value",children:"Target Value"}),e.jsx(B,{id:"target_value",type:"number",min:"1",value:c.target_value,onChange:u=>p({...c,target_value:parseInt(u.target.value)||1})})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"goal_operation",children:"Operation"}),e.jsxs("select",{id:"goal_operation",value:c.operation,onChange:u=>p({...c,operation:u.target.value}),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"any",children:"Any Operation"}),h.map(u=>e.jsxs("option",{value:u.id,children:[u.emoji," ",u.name]},u.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"goal_level",children:"Difficulty Level"}),e.jsxs("select",{id:"goal_level",value:c.level,onChange:u=>p({...c,level:u.target.value}),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"any",children:"Any Level"}),o.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"goal_deadline",children:"Deadline (Optional)"}),e.jsx(B,{id:"goal_deadline",type:"date",value:c.deadline,onChange:u=>p({...c,deadline:u.target.value})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{onClick:M,className:"flex-1 bg-indigo-500 hover:bg-indigo-600",disabled:!c.title,children:"Add Goal"}),e.jsx(R,{variant:"outline",onClick:()=>g(!1),children:"Cancel"})]})]})]}),e.jsx("div",{className:"space-y-4",children:d.length===0?e.jsx(P,{className:"border-2 border-gray-200",children:e.jsxs(C,{className:"p-12 text-center",children:[e.jsx(be,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"No custom goals yet"}),e.jsx("p",{className:"text-gray-500",children:"Create goals to motivate and guide your child's learning"})]})}):d.map(u=>e.jsxs(P,{className:"border-2 border-indigo-200",children:[e.jsx(L,{className:"bg-indigo-50",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-indigo-600"}),u.title]}),u.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:u.description})]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>A(u.id),className:"text-gray-400 hover:text-red-600",children:e.jsx(Mt,{className:"w-5 h-5"})})]})}),e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Type:"})," ",u.target_type.replace("_"," ")]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Target:"})," ",u.target_value]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Operation:"})," ",u.operation]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Level:"})," ",u.level]})]}),u.deadline&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsxs("span",{children:["Deadline: ",u.deadline]})]})]})]},u.id))})]})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t",children:e.jsxs(R,{onClick:j,disabled:y.isPending,className:"h-12 px-8 bg-gradient-to-r from-blue-500 to-purple-500",children:[e.jsx(Aa,{className:"w-5 h-5 mr-2"}),y.isPending?"Saving...":"Save All Settings"]})})]})}function li({childEmail:a,childProgress:t}){const r=Ge(),[s,n]=O.useState(!1),[i,l]=O.useState({title:"",description:"",operation:"addition",level:"easy",target_games:5,target_accuracy:80,due_date:"",instructions:""}),{data:d=[]}=pe({queryKey:["lessonAssignments",a],queryFn:async()=>{const o=Y(X),f=la(_e(o,"customGoals"),Ee("child_email","==",a),Ee("goal_type","==","specific_operation"));return(await Ue(f)).docs.map(N=>({id:N.id,...N.data()}))},initialData:[],enabled:!!a}),m=ie({mutationFn:async o=>{const f=Y(X);await ca(_e(f,"customGoals"),{...o,child_email:a,goal_type:"specific_operation",target_value:o.target_games})},onSuccess:()=>{r.invalidateQueries({queryKey:["lessonAssignments"]}),r.invalidateQueries({queryKey:["childGoals"]}),n(!1),l({title:"",description:"",operation:"addition",level:"easy",target_games:5,target_accuracy:80,due_date:"",instructions:""})}}),x=ie({mutationFn:async o=>{const f=Y(X);await oa(we(f,"customGoals",o))},onSuccess:()=>{r.invalidateQueries({queryKey:["lessonAssignments"]}),r.invalidateQueries({queryKey:["childGoals"]})}}),g=()=>{i.title&&m.mutate(i)},c=o=>{const f=t.filter(w=>w.operation===o.operation&&w.level===o.level&&new Date(w.created_date)>=new Date(o.created_date)),v=f.length,N=f.length>0?f.reduce((w,S)=>w+S.correct_answers/S.total_questions*100,0)/f.length:0;return{gamesCompleted:v,avgAccuracy:Math.round(N),isComplete:v>=o.target_value&&N>=(o.target_accuracy||70)}},y=(()=>{const o={addition:{total:0,correct:0},subtraction:{total:0,correct:0},multiplication:{total:0,correct:0},division:{total:0,correct:0}};t.forEach(v=>{o[v.operation]&&(o[v.operation].total+=v.total_questions,o[v.operation].correct+=v.correct_answers)});const f=[];return Object.entries(o).forEach(([v,N])=>{if(N.total>0){const w=N.correct/N.total*100;w<70&&f.push({operation:v,level:w<50?"easy":"medium",reason:`Low accuracy: ${Math.round(w)}%`})}}),f})(),j={addition:"",subtraction:"",multiplication:"",division:""},h={easy:"bg-green-500",medium:"bg-yellow-500",hard:"bg-red-500"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Yt,{className:"w-6 h-6 text-blue-600"}),"Lesson Assignments"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create custom practice lessons tailored to your child's needs"})]}),e.jsxs(R,{onClick:()=>n(!s),className:"bg-blue-500 hover:bg-blue-600",children:[e.jsx(Rt,{className:"w-4 h-4 mr-2"}),"New Lesson"]})]}),y.length>0&&e.jsxs(ee,{className:"bg-yellow-50 border-yellow-300",children:[e.jsx(ma,{className:"w-5 h-5 text-yellow-600"}),e.jsxs(te,{className:"text-yellow-800",children:[e.jsx("strong",{children:"Suggested Focus Areas:"}),e.jsx("div",{className:"mt-2 space-y-2",children:y.map((o,f)=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:j[o.operation]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium capitalize",children:[o.operation," - ",o.level]}),e.jsx("p",{className:"text-sm text-gray-600",children:o.reason})]})]}),e.jsx(R,{size:"sm",onClick:()=>{l({...i,operation:o.operation,level:o.level,title:`Practice ${o.operation.charAt(0).toUpperCase()+o.operation.slice(1)}`}),n(!0)},children:"Create Lesson"})]},f))})]})]}),s&&e.jsxs(P,{className:"border-2 border-blue-300",children:[e.jsx(L,{className:"bg-blue-50",children:e.jsx($,{children:"Create New Lesson Assignment"})}),e.jsxs(C,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"title",children:"Lesson Title"}),e.jsx(B,{id:"title",value:i.title,onChange:o=>l({...i,title:o.target.value}),placeholder:"e.g., Master Two-Digit Addition"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"description",children:"Description"}),e.jsx(Xe,{id:"description",value:i.description,onChange:o=>l({...i,description:o.target.value}),placeholder:"What should the student learn from this lesson?",rows:3})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"operation",children:"Operation"}),e.jsxs(de,{value:i.operation,onValueChange:o=>l({...i,operation:o}),children:[e.jsx(ue,{children:e.jsx(me,{})}),e.jsxs(he,{children:[e.jsx(D,{value:"addition",children:" Addition"}),e.jsx(D,{value:"subtraction",children:" Subtraction"}),e.jsx(D,{value:"multiplication",children:" Multiplication"}),e.jsx(D,{value:"division",children:" Division"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"level",children:"Difficulty Level"}),e.jsxs(de,{value:i.level,onValueChange:o=>l({...i,level:o}),children:[e.jsx(ue,{children:e.jsx(me,{})}),e.jsxs(he,{children:[e.jsx(D,{value:"easy",children:"Easy"}),e.jsx(D,{value:"medium",children:"Medium"}),e.jsx(D,{value:"hard",children:"Hard"})]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"target_games",children:"Target Games"}),e.jsx(B,{id:"target_games",type:"number",min:"1",max:"50",value:i.target_games,onChange:o=>l({...i,target_games:parseInt(o.target.value)})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Number of games to complete"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"target_accuracy",children:"Target Accuracy (%)"}),e.jsx(B,{id:"target_accuracy",type:"number",min:"50",max:"100",value:i.target_accuracy,onChange:o=>l({...i,target_accuracy:parseInt(o.target.value)})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Minimum accuracy to complete"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"due_date",children:"Due Date (Optional)"}),e.jsx(B,{id:"due_date",type:"date",value:i.due_date,onChange:o=>l({...i,due_date:o.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"instructions",children:"Instructions for Student"}),e.jsx(Xe,{id:"instructions",value:i.instructions,onChange:o=>l({...i,instructions:o.target.value}),placeholder:"Any specific tips or guidance?",rows:3})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(R,{onClick:g,className:"flex-1 bg-blue-500 hover:bg-blue-600",disabled:!i.title||m.isPending,children:[e.jsx(Xa,{className:"w-4 h-4 mr-2"}),m.isPending?"Assigning...":"Assign Lesson"]}),e.jsx(R,{variant:"outline",onClick:()=>n(!1),children:"Cancel"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-bold text-lg",children:"Active Assignments"}),d.length===0?e.jsx(P,{className:"border-2 border-gray-200",children:e.jsxs(C,{className:"p-12 text-center",children:[e.jsx(Yt,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"No lessons assigned yet"}),e.jsx("p",{className:"text-gray-500",children:"Create custom lessons to guide your child's learning"})]})}):d.map(o=>{const f=c(o),v=Math.min(f.gamesCompleted/o.target_value*100,100);return e.jsxs(P,{className:`border-2 ${f.isComplete?"border-green-300 bg-green-50":"border-blue-200"}`,children:[e.jsx(L,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-3xl",children:j[o.operation]}),e.jsxs("div",{children:[e.jsxs($,{className:"flex items-center gap-2",children:[o.title,f.isComplete&&e.jsxs(z,{className:"bg-green-500",children:[e.jsx(Ne,{className:"w-3 h-3 mr-1"}),"Completed"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(z,{className:h[o.level]+" text-white",children:o.level}),o.due_date&&e.jsxs(z,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(De,{className:"w-3 h-3"}),"Due: ",je(new Date(o.due_date),"MMM d")]})]})]})]}),o.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:o.description}),o.instructions&&e.jsx(ee,{className:"mt-2",children:e.jsxs(te,{className:"text-sm",children:[e.jsx("strong",{children:"Instructions:"})," ",o.instructions]})})]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>x.mutate(o.id),className:"text-gray-400 hover:text-red-600",children:e.jsx(Mt,{className:"w-5 h-5"})})]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ne,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Games"})]}),e.jsxs("p",{className:"text-2xl font-bold",children:[f.gamesCompleted," / ",o.target_value]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ne,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Accuracy"})]}),e.jsxs("p",{className:"text-2xl font-bold",children:[f.avgAccuracy,"%",e.jsxs("span",{className:"text-sm text-gray-500",children:[" / ",o.target_accuracy||70,"%"]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Overall Progress"}),e.jsxs("span",{className:"font-bold",children:[Math.round(v),"%"]})]}),e.jsx(cs,{value:v,className:"h-3"})]}),f.isComplete&&e.jsxs(ee,{className:"bg-green-100 border-green-300",children:[e.jsx(Ne,{className:"w-4 h-4 text-green-600"}),e.jsxs(te,{className:"text-green-800",children:[e.jsx("strong",{children:"Great job!"})," This lesson has been completed successfully."]})]})]})})]},o.id)})]})]})}function ci({childEmail:a,parentEmail:t}){var K;const r=Ge(),[s,n]=O.useState("encouragement"),[i,l]=O.useState(""),[d,m]=O.useState(""),[x,g]=O.useState(""),[c,p]=O.useState(null),[y,j]=O.useState("normal"),{data:h=[]}=pe({queryKey:["messages",a,t],queryFn:async()=>{const k=Y(X),I=la(_e(k,"messages"),Ee("parent_email","==",t),Ee("child_email","==",a));return(await Ue(I)).docs.map(Q=>Q.data()).sort((Q,G)=>new Date(G.created_date)-new Date(Q.created_date))},initialData:[],enabled:!!a&&!!t}),o=h.filter(k=>k.child_email===t&&!k.parent_read).length,f=ie({mutationFn:async k=>{const I=Y(X);await ca(_e(I,"messages"),{parent_email:t,child_email:a,message_type:k.type,subject:k.subject,message_text:k.text,priority:k.priority,reply_to_message_id:k.replyTo||null,is_read:!1,parent_read:!0,created_date:new Date().toISOString()})},onSuccess:()=>{r.invalidateQueries({queryKey:["messages"]}),r.invalidateQueries({queryKey:["unreadMessages"]}),l(""),m(""),g(""),p(null),j("normal")}}),v=ie({mutationFn:async k=>{const I=Y(X);await Ws(we(I,"messages",k),{parent_read:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["messages"]}),r.invalidateQueries({queryKey:["unreadMessages"]})}}),N=ie({mutationFn:async k=>{const I=Y(X);await oa(we(I,"messages",k))},onSuccess:()=>{r.invalidateQueries({queryKey:["messages"]})}}),w={encouragement:[{subject:"You're Doing Great!",text:"I'm so proud of how hard you're working! Keep it up! "},{subject:"Amazing Progress!",text:"You're doing an amazing job! Your effort really shows! "},{subject:"Math Superstar",text:"Great progress today! You're a math superstar! "},{subject:"Keep Going!",text:"I love seeing you tackle these challenges! Keep going! "},{subject:"So Proud of You",text:"Your determination is inspiring! Way to go! "}],feedback:[{subject:"Nice Improvement!",text:"I noticed you're improving in addition. Excellent work!"},{subject:"Great Accuracy",text:"Your accuracy is getting better every day!"},{subject:"Love Your Effort",text:"I can see you're putting in great effort. Keep it up!"},{subject:"Wonderful Progress",text:"You're making wonderful progress. I'm proud of you!"}],reminder:[{subject:"Daily Challenge",text:"Don't forget to complete your daily challenge today! "},{subject:"Practice Time",text:"Remember to practice your multiplication today!"},{subject:"Almost There",text:"You're close to reaching your goal! Keep practicing! "},{subject:"Lesson Time",text:"Time to work on your assigned lesson! You've got this! "}],celebration:[{subject:"Congratulations!",text:"Congratulations on completing your goal! "},{subject:"Three Stars!",text:"You earned all 3 stars! Amazing! "},{subject:"Incredible Achievement",text:"What an incredible achievement! So proud! "},{subject:"Math Champion",text:"You're a math champion! Great job! "}],question:[{subject:"How's Math Going?",text:"How are you finding the math challenges? Any topics you'd like more help with?"},{subject:"Need Help?",text:"Is there anything you're struggling with? I'm here to help!"},{subject:"What's Your Favorite?",text:"What's your favorite math topic so far?"}]},S={encouragement:Kt,feedback:be,reminder:Me,celebration:qe,question:Se,response:mt},M={encouragement:"from-pink-400 to-rose-500",feedback:"from-blue-400 to-purple-500",reminder:"from-yellow-400 to-orange-500",celebration:"from-green-400 to-emerald-500",question:"from-indigo-400 to-blue-500",response:"from-gray-400 to-slate-500"},A={low:"text-gray-500",normal:"text-blue-500",high:"text-red-500"},u=()=>{var k,I;i.trim()&&f.mutate({type:c?"response":s,text:i,subject:d||((I=(k=w[s])==null?void 0:k[0])==null?void 0:I.subject)||"Message from Parent",priority:y,replyTo:c==null?void 0:c.id})},_=k=>{g(k),l(k.text),m(k.subject)},E=k=>{p(k),n("response"),m(`Re: ${k.subject}`),l(""),window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Se,{className:"w-6 h-6 text-green-600"}),"Communication Center",o>0&&e.jsxs(z,{className:"bg-red-500 text-white animate-pulse",children:[o," New"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Send messages and receive responses from your child"})]})}),e.jsxs(ee,{className:"bg-blue-50 border-blue-200",children:[e.jsx(Me,{className:"w-5 h-5 text-blue-600"}),e.jsxs(te,{className:"text-blue-800",children:[e.jsx("strong",{children:"Real-time messaging with your child!"})," Messages appear instantly in their inbox, and they can respond directly. Both of you will see notifications for new messages."]})]}),c&&e.jsxs(ee,{className:"bg-purple-50 border-purple-300",children:[e.jsx(mt,{className:"w-5 h-5 text-purple-600"}),e.jsx(te,{className:"text-purple-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Replying to:"})," ",c.subject,e.jsxs("p",{className:"text-sm mt-1 italic",children:['"',c.message_text,'"']})]}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>p(null),className:"text-purple-600",children:"Cancel"})]})})]}),e.jsxs(P,{className:"border-2 border-green-300",children:[e.jsx(L,{className:"bg-green-50",children:e.jsx($,{children:c?"Send Reply":"Send a Message"})}),e.jsxs(C,{className:"p-6 space-y-4",children:[!c&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"message_type",children:"Message Type"}),e.jsxs(de,{value:s,onValueChange:n,children:[e.jsx(ue,{children:e.jsx(me,{})}),e.jsxs(he,{children:[e.jsx(D,{value:"encouragement",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-4 h-4"}),"Encouragement"]})}),e.jsx(D,{value:"feedback",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"Feedback"]})}),e.jsx(D,{value:"reminder",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4"}),"Reminder"]})}),e.jsx(D,{value:"celebration",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4"}),"Celebration"]})}),e.jsx(D,{value:"question",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"w-4 h-4"}),"Question"]})})]})]})]}),!c&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{children:"Quick Templates"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-40 overflow-y-auto",children:(K=w[s])==null?void 0:K.map((k,I)=>e.jsx(R,{variant:"outline",className:"justify-start text-left h-auto py-3 px-4",onClick:()=>_(k),children:e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm",children:k.subject}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:k.text})]})},I))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"subject",children:"Subject"}),e.jsx(B,{id:"subject",value:d,onChange:k=>m(k.target.value),placeholder:"Message subject..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"message_text",children:"Message"}),e.jsx(Xe,{id:"message_text",value:i,onChange:k=>l(k.target.value),placeholder:"Write your message...",rows:4,className:"resize-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"priority",children:"Priority"}),e.jsxs(de,{value:y,onValueChange:j,children:[e.jsx(ue,{children:e.jsx(me,{})}),e.jsxs(he,{children:[e.jsx(D,{value:"low",children:"Low Priority"}),e.jsx(D,{value:"normal",children:"Normal"}),e.jsx(D,{value:"high",children:"High Priority"})]})]})]}),e.jsxs(R,{onClick:u,disabled:!i.trim()||f.isPending,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600",children:[e.jsx(Xa,{className:"w-4 h-4 mr-2"}),f.isPending?"Sending...":"Send Message"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-bold text-lg",children:"Message History"}),e.jsxs(z,{variant:"outline",children:[h.length," Messages"]})]}),h.length===0?e.jsx(P,{className:"border-2 border-gray-200",children:e.jsxs(C,{className:"p-12 text-center",children:[e.jsx(Se,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"No messages yet"}),e.jsx("p",{className:"text-gray-500",children:"Start a conversation with your child!"})]})}):h.map(k=>{const I=S[k.message_type]||Se,re=M[k.message_type]||"from-gray-400 to-gray-500",Q=k.child_email===t,G=Q&&!k.parent_read;return e.jsx(P,{className:`border-2 transition-all ${G?"border-blue-400 bg-blue-50 shadow-lg":"border-gray-200 hover:shadow-md"}`,children:e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br ${re} flex items-center justify-center flex-shrink-0`,children:e.jsx(I,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx(z,{className:`bg-gradient-to-r ${re} text-white`,children:k.message_type}),Q&&e.jsxs(z,{className:"bg-purple-500 text-white",children:[e.jsx(mt,{className:"w-3 h-3 mr-1"}),"Reply from child"]}),k.priority!=="normal"&&e.jsxs(z,{variant:"outline",className:A[k.priority],children:[e.jsx(ma,{className:"w-3 h-3 mr-1"}),k.priority]}),G&&e.jsx(z,{className:"bg-blue-500 text-white animate-pulse",children:"NEW"}),e.jsx("span",{className:"text-sm text-gray-500 ml-auto",children:je(new Date(k.created_date),"MMM d, h:mm a")})]}),e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:k.subject}),e.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:k.message_text}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[Q&&e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>E(k),className:"text-purple-600 border-purple-300",children:[e.jsx(mt,{className:"w-4 h-4 mr-1"}),"Reply"]}),G&&e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>v.mutate(k.id),className:"text-blue-600 border-blue-300",children:[e.jsx(Ne,{className:"w-4 h-4 mr-1"}),"Mark as Read"]}),e.jsxs(R,{size:"sm",variant:"ghost",onClick:()=>{confirm("Delete this message?")&&N.mutate(k.id)},className:"text-red-600",children:[e.jsx(Mt,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]})]})})},k.id)})]}),e.jsxs(P,{className:"border-2 border-purple-200 bg-purple-50",children:[e.jsx(L,{children:e.jsx($,{className:"text-lg",children:"Quick Praise Buttons"})}),e.jsxs(C,{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs(R,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>{n("encouragement"),m("Great job today!"),l("Great job today! "),u()},children:[e.jsx(be,{className:"w-6 h-6 text-yellow-500"}),e.jsx("span",{className:"text-xs",children:"Great Job!"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>{n("encouragement"),m("I'm proud of you!"),l("I'm proud of you! "),u()},children:[e.jsx(Kt,{className:"w-6 h-6 text-pink-500"}),e.jsx("span",{className:"text-xs",children:"Proud!"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>{n("encouragement"),m("Keep it up!"),l("Keep it up! "),u()},children:[e.jsx(fr,{className:"w-6 h-6 text-blue-500"}),e.jsx("span",{className:"text-xs",children:"Keep Going!"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>{n("celebration"),m("Amazing work!"),l("Amazing work! "),u()},children:[e.jsx(qe,{className:"w-6 h-6 text-green-500"}),e.jsx("span",{className:"text-xs",children:"Amazing!"})]})]})]})]})}function oi({myChildren:a,parentEmail:t}){const r=Ge(),[s,n]=O.useState(null),[i,l]=O.useState(""),d=ie({mutationFn:async({childEmail:c,newName:p})=>{const y=Y(X),h=(await Ue(_e(y,"users"))).docs.find(o=>o.data().email===c);if(!h)throw new Error("Child not found");await bt(we(y,"users",h.id),{child_name:p},{merge:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["allUsers"]}),n(null),l("")}}),m=ie({mutationFn:async c=>{const p=Y(X),j=(await Ue(_e(p,"users"))).docs.find(h=>h.data().email===c);if(!j)throw new Error("Child not found");await bt(we(p,"users",j.id),{parental_controls:{daily_time_limit:0,allowed_operations:["addition","subtraction","multiplication","division"],allowed_levels:["easy","medium","hard"],focus_operations:[],disabled_features:[]}},{merge:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["allUsers"]})}}),x=c=>{i.trim()&&d.mutate({childEmail:c,newName:i})},g=c=>{var j,h;const p=c.parental_controls&&Object.keys(c.parental_controls).length>0,y=p&&(c.parental_controls.daily_time_limit>0||((j=c.parental_controls.disabled_features)==null?void 0:j.length)>0||((h=c.parental_controls.allowed_operations)==null?void 0:h.length)<4);return{hasControls:p,hasRestrictions:y,status:y?"restricted":p?"monitored":"open"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Xt,{className:"w-6 h-6 text-purple-600"}),"Student Account Management"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage linked student accounts and their settings"})]}),e.jsxs(ee,{className:"bg-blue-50 border-blue-200",children:[e.jsx(Me,{className:"w-5 h-5 text-blue-600"}),e.jsxs(te,{className:"text-blue-800",children:[e.jsx("strong",{children:"Managing Multiple Students:"})," You can monitor and control settings for all students linked to your account. Each student maintains their own progress and achievements while you guide their learning journey."]})]}),e.jsxs(P,{className:"border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",children:[e.jsx(L,{children:e.jsxs($,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Account Overview"}),e.jsxs(z,{className:"bg-purple-500 text-white text-lg px-4 py-2",children:[a.length," ",a.length===1?"Student":"Students"]})]})}),e.jsxs(C,{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Va,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Active Students"})]}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:a.length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(We,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"With Controls"})]}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:a.filter(c=>g(c).hasControls).length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(qe,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Combined Stars"})]}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:a.reduce((c,p)=>c+(p.total_stars_earned||0),0)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-bold text-lg",children:"Student Accounts"}),a.length===0?e.jsx(P,{className:"border-2 border-gray-200",children:e.jsxs(C,{className:"p-12 text-center",children:[e.jsx(Xt,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Students Linked"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Have your students add your email (",t,") as their parent/teacher email in their profile settings."]}),e.jsxs(ee,{className:"bg-blue-50 border-blue-200 text-left",children:[e.jsx(Me,{className:"w-5 h-5 text-blue-600"}),e.jsxs(te,{className:"text-blue-800",children:[e.jsx("strong",{children:"How students can link their account:"}),e.jsxs("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Go to their Avatar/Profile page"}),e.jsx("li",{children:'Scroll to "Parent/Teacher Access" section'}),e.jsxs("li",{children:["Enter your email: ",e.jsx("strong",{children:t})]}),e.jsx("li",{children:"Click Save"})]})]})]})]})}):a.map(c=>{var f,v,N,w,S,M,A,u,_,E;const p=g(c),y={avatar_skin_tone:c.avatar_skin_tone||"medium",avatar_hair_style:c.avatar_hair_style||"short",avatar_hair_color:c.avatar_hair_color||"brown",avatar_eyes:c.avatar_eyes||"normal",avatar_outfit:c.avatar_outfit||"casual",avatar_accessory:c.avatar_accessory||"none"},j={open:"bg-green-100 text-green-700 border-green-300",monitored:"bg-blue-100 text-blue-700 border-blue-300",restricted:"bg-orange-100 text-orange-700 border-orange-300"},o={open:Ne,monitored:We,restricted:Ut}[p.status];return e.jsx(P,{className:"border-2 border-gray-200 hover:shadow-lg transition-shadow",children:e.jsxs(C,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Ya,{avatarData:y,size:"medium"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold",children:c.child_name||c.full_name||"Student"}),e.jsxs(z,{className:j[p.status],children:[e.jsx(o,{className:"w-3 h-3 mr-1"}),p.status]})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:c.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsxs("span",{children:["Joined ",je(new Date(c.created_date),"MMM d, yyyy")]})]})]}),s===c.email?e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(B,{placeholder:"Display name",value:i,onChange:K=>l(K.target.value),className:"w-full"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{size:"sm",onClick:()=>x(c.email),disabled:d.isPending,children:"Save"}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>{n(null),l("")},children:"Cancel"})]})]}):e.jsxs(R,{size:"sm",variant:"outline",className:"mt-3",onClick:()=>{n(c.email),l(c.child_name||"")},children:[e.jsx(Ua,{className:"w-3 h-3 mr-1"}),"Edit Name"]})]})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(be,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Stars"})]}),e.jsx("p",{className:"text-xl font-bold text-yellow-700",children:c.total_stars_earned||0})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(qe,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Coins"})]}),e.jsx("p",{className:"text-xl font-bold text-blue-700",children:c.coins||0})]}),e.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(We,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Badges"})]}),e.jsx("p",{className:"text-xl font-bold text-purple-700",children:((f=c.earned_badges)==null?void 0:f.length)||0})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(Ye,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Time Limit"})]}),e.jsxs("p",{className:"text-lg font-bold text-green-700",children:[((v=c.parental_controls)==null?void 0:v.daily_time_limit)||"",((N=c.parental_controls)==null?void 0:N.daily_time_limit)>0&&"m"]})]})]})]}),p.hasControls&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-bold text-sm",children:"Active Controls:"}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>{confirm("Reset all parental controls for this student?")&&m.mutate(c.email)},children:"Reset Controls"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[((w=c.parental_controls)==null?void 0:w.daily_time_limit)>0&&e.jsxs(z,{variant:"outline",className:"justify-start",children:[e.jsx(Ye,{className:"w-3 h-3 mr-1"}),c.parental_controls.daily_time_limit,"m/day"]}),((M=(S=c.parental_controls)==null?void 0:S.allowed_operations)==null?void 0:M.length)<4&&e.jsxs(z,{variant:"outline",className:"justify-start",children:[e.jsx(ba,{className:"w-3 h-3 mr-1"}),4-c.parental_controls.allowed_operations.length," ops blocked"]}),((u=(A=c.parental_controls)==null?void 0:A.focus_operations)==null?void 0:u.length)>0&&e.jsxs(z,{variant:"outline",className:"justify-start bg-purple-50",children:[e.jsx(be,{className:"w-3 h-3 mr-1"}),c.parental_controls.focus_operations.length," focus areas"]}),((E=(_=c.parental_controls)==null?void 0:_.disabled_features)==null?void 0:E.length)>0&&e.jsxs(z,{variant:"outline",className:"justify-start",children:[e.jsx(ba,{className:"w-3 h-3 mr-1"}),c.parental_controls.disabled_features.length," features disabled"]})]})]})]})},c.email)})]}),e.jsxs(P,{className:"border-2 border-blue-200 bg-blue-50",children:[e.jsx(L,{children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5 text-blue-600"}),"Account Management Tips"]})}),e.jsxs(C,{className:"space-y-3 text-sm text-blue-900",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Adding Students:"})," Have each student add your email in their profile settings to link their account to yours."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Display Names:"})," Set custom display names to easily identify students (especially useful for teachers with multiple students)."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Controls:"}),' Each student can have individual parental controls. Configure them in the "Controls" tab.']}),e.jsxs("p",{children:[e.jsx("strong",{children:"Privacy:"})," Students cannot see messages between their account and yours. All communication is one-way (parent to child)."]})]})]})]})}function di({childEmail:a,childProgress:t,childDailyChallenges:r}){var S,M;const[s,n]=O.useState("week"),[i,l]=O.useState("all"),m=(()=>{let A;const u=new Date;switch(s){case"week":A=Qs(u);break;case"month":A=cr(u);break;case"all":A=new Date(0);break;default:A=Bt(u,7)}const _=t.filter(E=>new Date(E.created_date)>=A);return i==="all"?_:_.filter(E=>E.operation===i)})(),x=()=>{const A={};return Array.from({length:7},(u,_)=>{const E=je(Bt(new Date,6-_),"yyyy-MM-dd");return A[E]={date:je(Bt(new Date,6-_),"EEE"),games:0,accuracy:0,totalQuestions:0,correctAnswers:0},E}),m.forEach(u=>{const _=je(new Date(u.created_date),"yyyy-MM-dd");A[_]&&(A[_].games++,A[_].totalQuestions+=u.total_questions,A[_].correctAnswers+=u.correct_answers)}),Object.values(A).map(u=>({...u,accuracy:u.totalQuestions>0?Math.round(u.correctAnswers/u.totalQuestions*100):0}))},g=()=>{const A={addition:0,subtraction:0,multiplication:0,division:0};return m.forEach(u=>{A[u.operation]!==void 0&&A[u.operation]++}),Object.entries(A).map(([u,_])=>({name:u.charAt(0).toUpperCase()+u.slice(1),value:_,color:u==="addition"?"#10b981":u==="subtraction"?"#3b82f6":u==="multiplication"?"#8b5cf6":"#f59e0b"}))},c=()=>{const A={addition:{total:0,correct:0},subtraction:{total:0,correct:0},multiplication:{total:0,correct:0},division:{total:0,correct:0}};return m.forEach(u=>{A[u.operation]&&(A[u.operation].total+=u.total_questions,A[u.operation].correct+=u.correct_answers)}),Object.entries(A).map(([u,_])=>({skill:u.charAt(0).toUpperCase()+u.slice(1),score:_.total>0?Math.round(_.correct/_.total*100):0}))},p=()=>{const A={Morning:0,Afternoon:0,Evening:0,Night:0};return m.forEach(u=>{const _=new Date(u.created_date).getHours();_>=6&&_<12?A.Morning++:_>=12&&_<17?A.Afternoon++:_>=17&&_<21?A.Evening++:A.Night++}),Object.entries(A).map(([u,_])=>({name:u,games:_}))},y=()=>m.slice(-10).reverse().map((u,_)=>({game:`Game ${_+1}`,accuracy:Math.round(u.correct_answers/u.total_questions*100),speed:u.time_taken})),j=()=>{if(m.length===0)return{totalGames:0,avgAccuracy:0,avgSpeed:0,totalStars:0,improvementRate:0};const A=m.length,u=Math.round(m.reduce((G,Z)=>G+Z.correct_answers/Z.total_questions*100,0)/A),_=Math.round(m.reduce((G,Z)=>G+Z.time_taken,0)/A),E=m.reduce((G,Z)=>G+(Z.stars_earned||0),0),K=m.slice(0,5),k=m.slice(5,10),I=K.length>0?K.reduce((G,Z)=>G+Z.correct_answers/Z.total_questions*100,0)/K.length:0,re=k.length>0?k.reduce((G,Z)=>G+Z.correct_answers/Z.total_questions*100,0)/k.length:0,Q=re>0?Math.round((I-re)/re*100):0;return{totalGames:A,avgAccuracy:u,avgSpeed:_,totalStars:E,improvementRate:Q}},h=x(),o=g(),f=c(),v=p(),N=y(),w=j();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(jt,{className:"w-6 h-6 text-purple-600"}),"Advanced Analytics Dashboard"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Comprehensive performance insights and trends"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(de,{value:s,onValueChange:n,children:[e.jsx(ue,{className:"w-32",children:e.jsx(me,{})}),e.jsxs(he,{children:[e.jsx(D,{value:"week",children:"This Week"}),e.jsx(D,{value:"month",children:"This Month"}),e.jsx(D,{value:"all",children:"All Time"})]})]}),e.jsxs(de,{value:i,onValueChange:l,children:[e.jsx(ue,{className:"w-32",children:e.jsx(me,{})}),e.jsxs(he,{children:[e.jsx(D,{value:"all",children:"All Ops"}),e.jsx(D,{value:"addition",children:"Addition"}),e.jsx(D,{value:"subtraction",children:"Subtraction"}),e.jsx(D,{value:"multiplication",children:"Multiplication"}),e.jsx(D,{value:"division",children:"Division"})]})]}),e.jsx(R,{variant:"outline",size:"icon",children:e.jsx(xr,{className:"w-4 h-4"})}),e.jsxs(R,{variant:"outline",children:[e.jsx(lr,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(P,{className:"border-2 border-blue-200",children:e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Games"})]}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:w.totalGames})]})}),e.jsx(P,{className:"border-2 border-green-200",children:e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Na,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Accuracy"})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[w.avgAccuracy,"%"]})]})}),e.jsx(P,{className:"border-2 border-purple-200",children:e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Speed"})]}),e.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[w.avgSpeed,"s"]})]})}),e.jsx(P,{className:"border-2 border-yellow-200",children:e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Na,{className:"w-5 h-5 text-yellow-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Stars"})]}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:w.totalStars})]})}),e.jsx(P,{className:`border-2 ${w.improvementRate>=0?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[w.improvementRate>=0?e.jsx(wt,{className:"w-5 h-5 text-green-600"}):e.jsx(Za,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Trend"})]}),e.jsxs("p",{className:`text-3xl font-bold ${w.improvementRate>=0?"text-green-600":"text-red-600"}`,children:[w.improvementRate>0?"+":"",w.improvementRate,"%"]})]})})]}),e.jsx(P,{className:"border-2 border-purple-200",children:e.jsx(C,{className:"p-6",children:e.jsxs(da,{defaultValue:"activity",className:"w-full",children:[e.jsxs(ua,{className:"grid w-full grid-cols-5 mb-6",children:[e.jsx(W,{value:"activity",children:"Activity"}),e.jsx(W,{value:"skills",children:"Skills"}),e.jsx(W,{value:"distribution",children:"Distribution"}),e.jsx(W,{value:"trends",children:"Trends"}),e.jsx(W,{value:"time",children:"Time"})]}),e.jsx(H,{value:"activity",children:e.jsxs(P,{children:[e.jsx(L,{children:e.jsx($,{children:"Daily Activity (Last 7 Days)"})}),e.jsx(C,{children:e.jsx(Oe,{width:"100%",height:350,children:e.jsxs(zn,{data:h,children:[e.jsx(He,{strokeDasharray:"3 3"}),e.jsx(Re,{dataKey:"date"}),e.jsx(ge,{yAxisId:"left"}),e.jsx(ge,{yAxisId:"right",orientation:"right"}),e.jsx(Te,{}),e.jsx(Qe,{}),e.jsx(ke,{yAxisId:"left",type:"monotone",dataKey:"games",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6,name:"Games Played"}),e.jsx(ke,{yAxisId:"right",type:"monotone",dataKey:"accuracy",stroke:"#10b981",fill:"#10b981",fillOpacity:.6,name:"Accuracy %"})]})})})]})}),e.jsx(H,{value:"skills",children:e.jsxs(P,{children:[e.jsx(L,{children:e.jsx($,{children:"Skills Assessment"})}),e.jsx(C,{children:e.jsx(Oe,{width:"100%",height:400,children:e.jsxs(Bn,{data:f,children:[e.jsx(us,{}),e.jsx(rt,{dataKey:"skill"}),e.jsx(st,{domain:[0,100]}),e.jsx(ut,{name:"Accuracy %",dataKey:"score",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6}),e.jsx(Te,{})]})})})]})}),e.jsx(H,{value:"distribution",children:e.jsxs(P,{children:[e.jsx(L,{children:e.jsx($,{children:"Operation Distribution"})}),e.jsx(C,{children:e.jsx(Oe,{width:"100%",height:400,children:e.jsxs(Gn,{children:[e.jsx(Pe,{data:o,cx:"50%",cy:"50%",labelLine:!1,label:A=>`${A.name}: ${A.value}`,outerRadius:120,fill:"#8884d8",dataKey:"value",children:o.map((A,u)=>e.jsx(rs,{fill:A.color},`cell-${u}`))}),e.jsx(Te,{})]})})})]})}),e.jsx(H,{value:"trends",children:e.jsxs(P,{children:[e.jsx(L,{children:e.jsx($,{children:"Recent Performance Trend"})}),e.jsx(C,{children:e.jsx(Oe,{width:"100%",height:350,children:e.jsxs(ls,{data:N,children:[e.jsx(He,{strokeDasharray:"3 3"}),e.jsx(Re,{dataKey:"game"}),e.jsx(ge,{yAxisId:"left"}),e.jsx(ge,{yAxisId:"right",orientation:"right"}),e.jsx(Te,{}),e.jsx(Qe,{}),e.jsx(At,{yAxisId:"left",type:"monotone",dataKey:"accuracy",stroke:"#10b981",strokeWidth:3,name:"Accuracy %"}),e.jsx(At,{yAxisId:"right",type:"monotone",dataKey:"speed",stroke:"#f59e0b",strokeWidth:3,name:"Speed (seconds)"})]})})})]})}),e.jsx(H,{value:"time",children:e.jsxs(P,{children:[e.jsx(L,{children:e.jsx($,{children:"Time of Day Analysis"})}),e.jsxs(C,{children:[e.jsx(Oe,{width:"100%",height:350,children:e.jsxs(ra,{data:v,children:[e.jsx(He,{strokeDasharray:"3 3"}),e.jsx(Re,{dataKey:"name"}),e.jsx(ge,{}),e.jsx(Te,{}),e.jsx(Qe,{}),e.jsx(Be,{dataKey:"games",fill:"#8b5cf6",name:"Games Played"})]})}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-600 mb-1",children:"Most Active Time"}),e.jsx("p",{className:"font-bold text-blue-700",children:((S=v.reduce((A,u)=>u.games>A.games?u:A,v[0]))==null?void 0:S.name)||"N/A"})]}),e.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-600 mb-1",children:"Recommended Practice Time"}),e.jsx("p",{className:"font-bold text-purple-700",children:((M=v.reduce((A,u)=>u.games>A.games?u:A,v[0]))==null?void 0:M.name)||"N/A"})]})]})]})]})})]})})})]})}function Li(){const a=Ge(),t=Us(),[r,s]=O.useState(null),[n,i]=O.useState("overview"),[l,d]=O.useState(!1),{user:m}=Ys(),{data:x}=pe({queryKey:["currentUser"],queryFn:async()=>({email:"parent@example.com",is_parent_mode:!0,is_premium_parent:!1,is_family_teacher:!1}),initialData:{email:"parent@example.com",is_parent_mode:!0,is_premium_parent:!1,is_family_teacher:!1}}),{data:g=[]}=pe({queryKey:["allUsers"],queryFn:async()=>[],initialData:[]}),c=g.filter(N=>N.parent_email===(x==null?void 0:x.email)),{data:p=[]}=pe({queryKey:["childProgress",r],queryFn:async()=>[],initialData:[],enabled:!!r}),{data:y=[]}=pe({queryKey:["childDailyChallenges",r],queryFn:async()=>[],initialData:[],enabled:!!r}),{data:j=[]}=pe({queryKey:["childGoals",r],queryFn:async()=>[],initialData:[],enabled:!!r}),h=ie({mutationFn:async N=>{throw console.log("Parent mode toggle:",N),alert("Parent mode settings are currently being migrated to Firebase. This feature will be available soon!"),new Error("Parent mode pending implementation")},onSuccess:()=>{a.invalidateQueries({queryKey:["currentUser"]})}}),o=c.find(N=>N.email===r),f=g.find(N=>N.email===r),v=!!(m!=null&&m.hasPremiumAccess);return x!=null&&x.is_parent_mode?v?(b.useEffect(()=>{m&&d(!m.hasPremiumAccess)},[m]),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[l&&e.jsx(or,{featureName:"Parent & Teacher Dashboard",description:"Monitor your child's progress with detailed analytics, set learning goals, manage parental controls, and communicate with AI tutors.",isOpen:l,onClose:()=>d(!1)}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Parent & Teacher Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive learning management & monitoring"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(R,{variant:"outline",onClick:()=>t(Gt("Subscription")),children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),"Manage Subscription"]}),e.jsxs(R,{variant:"outline",onClick:()=>h.mutate(!1),children:[e.jsx(Ua,{className:"w-4 h-4 mr-2"}),"Exit Parent Mode"]}),e.jsxs(R,{className:"bg-gradient-to-r from-yellow-400 to-orange-500",onClick:()=>t(Gt("Subscription")),children:[e.jsx(qt,{className:"w-4 h-4 mr-2"}),(x==null?void 0:x.subscription_tier)==="family_teacher"?"Family Plan":"Premium"]})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx(Vn,{myChildren:c,selectedChildEmail:r,onSelectChild:s,currentUserEmail:x==null?void 0:x.email})}),o?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(P,{className:"border-2 border-blue-200 hover:shadow-lg transition-all cursor-pointer hover:scale-105",onClick:()=>i("communication"),children:e.jsxs(C,{className:"p-4 text-center",children:[e.jsx(ur,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),e.jsx("h3",{className:"font-bold text-sm",children:"Quick Message"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Send encouragement"})]})}),e.jsx(P,{className:"border-2 border-green-200 hover:shadow-lg transition-all cursor-pointer hover:scale-105",onClick:()=>i("lessons"),children:e.jsxs(C,{className:"p-4 text-center",children:[e.jsx(hr,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),e.jsx("h3",{className:"font-bold text-sm",children:"New Assignment"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Create lesson"})]})}),e.jsx(P,{className:"border-2 border-purple-200 hover:shadow-lg transition-all cursor-pointer hover:scale-105",onClick:()=>i("analytics"),children:e.jsxs(C,{className:"p-4 text-center",children:[e.jsx(jt,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),e.jsx("h3",{className:"font-bold text-sm",children:"View Report"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Generate PDF"})]})}),e.jsx(P,{className:"border-2 border-orange-200 hover:shadow-lg transition-all cursor-pointer hover:scale-105",onClick:()=>i("goals"),children:e.jsxs(C,{className:"p-4 text-center",children:[e.jsx(ne,{className:"w-8 h-8 mx-auto mb-2 text-orange-600"}),e.jsx("h3",{className:"font-bold text-sm",children:"Set Goal"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"New challenge"})]})})]}),e.jsx(Wn,{childProgress:p,childDailyChallenges:y,selectedChild:o}),e.jsx(P,{className:"border-2 border-purple-200 shadow-lg",children:e.jsx(C,{className:"p-6",children:e.jsxs(da,{value:n,onValueChange:i,className:"w-full",children:[e.jsxs(ua,{className:"grid w-full grid-cols-4 lg:grid-cols-8 mb-6",children:[e.jsxs(W,{value:"overview",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Overview"]}),e.jsxs(W,{value:"analytics",children:[e.jsx(wt,{className:"w-4 h-4 mr-2"}),"Analytics"]}),e.jsxs(W,{value:"lessons",children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Lessons"]}),e.jsxs(W,{value:"goals",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Goals"]}),e.jsxs(W,{value:"communication",children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Messages"]}),e.jsxs(W,{value:"team",children:[e.jsx(gt,{className:"w-4 h-4 mr-2"}),"Team"]}),e.jsxs(W,{value:"controls",children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Controls"]}),e.jsxs(W,{value:"accounts",children:[e.jsx(Xt,{className:"w-4 h-4 mr-2"}),"Accounts"]})]}),e.jsxs(H,{value:"overview",className:"space-y-6",children:[e.jsx(Hn,{childProgress:p,childDailyChallenges:y}),e.jsx(Un,{childProgress:p,childDailyChallenges:y})]}),e.jsx(H,{value:"analytics",className:"space-y-6",children:e.jsx(di,{childEmail:r,childProgress:p,childDailyChallenges:y})}),e.jsx(H,{value:"lessons",className:"space-y-6",children:e.jsx(li,{childEmail:r,childProgress:p})}),e.jsx(H,{value:"goals",className:"space-y-6",children:e.jsx(Qn,{childEmail:r,childGoals:j,childProgress:p,childDailyChallenges:y})}),e.jsx(H,{value:"communication",className:"space-y-6",children:e.jsx(ci,{childEmail:r,parentEmail:x==null?void 0:x.email})}),e.jsx(H,{value:"team",className:"space-y-6",children:e.jsx(ei,{})}),e.jsx(H,{value:"controls",className:"space-y-6",children:e.jsx(ii,{childEmail:r,currentControls:(f==null?void 0:f.parental_controls)||{}})}),e.jsx(H,{value:"accounts",className:"space-y-6",children:e.jsx(oi,{myChildren:c,parentEmail:x==null?void 0:x.email})})]})})})]}):e.jsx(P,{className:"border-2 border-gray-200",children:e.jsxs(C,{className:"p-12 text-center",children:[e.jsx(gt,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Child Selected"}),e.jsx("p",{className:"text-gray-600 mb-6",children:c.length>0?"Select a child from above to view their progress":"Add a child account to start monitoring their progress"}),c.length===0&&e.jsxs(ee,{className:"bg-blue-50 border-blue-200 text-left",children:[e.jsx(Me,{className:"w-5 h-5 text-blue-600"}),e.jsxs(te,{className:"text-blue-800",children:[e.jsx("strong",{children:"How to add a child:"}),e.jsxs("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Have your child create an account"}),e.jsx("li",{children:"In their account settings, they can add your email as their parent"}),e.jsx("li",{children:"Their progress will then appear in your portal"})]})]})]})]})})]})):e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs(P,{className:"border-4 border-yellow-300 shadow-2xl",children:[e.jsxs(L,{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-center py-12",children:[e.jsx(qt,{className:"w-20 h-20 mx-auto mb-4"}),e.jsx($,{className:"text-4xl mb-2",children:"Unlock Premium Parent Features"}),e.jsx("p",{className:"text-xl opacity-90",children:"Get full access to advanced parental controls and analytics"})]}),e.jsxs(C,{className:"p-8 space-y-6",children:[e.jsxs(ee,{className:"bg-blue-50 border-blue-200",children:[e.jsx(We,{className:"w-5 h-5 text-blue-600"}),e.jsxs(te,{className:"text-blue-800",children:[e.jsx("strong",{children:"Premium Parent Subscription Includes:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Advanced parental controls (time limits, content filtering)"}),e.jsx("li",{children:"Detailed progress analytics and performance insights"}),e.jsx("li",{children:"Custom goal setting and weekly/monthly reports"}),e.jsx("li",{children:"Focus topic recommendations"}),e.jsx("li",{children:"Feature access management"}),e.jsx("li",{children:"Lesson assignment capabilities"}),e.jsx("li",{children:"Communication center with your child"}),e.jsx("li",{children:"Student account management tools"})]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs(R,{className:"h-14 px-8 text-lg bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600",onClick:()=>t(Gt("Subscription")),children:[e.jsx(qt,{className:"w-5 h-5 mr-2"}),"View Subscription Plans"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Starting at $4.99/month  Cancel anytime"})]})]})]})}):e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs(P,{className:"border-4 border-purple-300 shadow-2xl",children:[e.jsxs(L,{className:"bg-gradient-to-r from-purple-500 to-blue-500 text-white text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx($,{className:"text-4xl mb-2",children:"Parent & Teacher Portal"}),e.jsx("p",{className:"text-xl opacity-90",children:"Monitor and guide your child's learning journey"})]}),e.jsxs(C,{className:"p-8 space-y-6",children:[e.jsxs(ee,{className:"bg-blue-50 border-blue-200",children:[e.jsx(Me,{className:"w-5 h-5 text-blue-600"}),e.jsxs(te,{className:"text-blue-800",children:[e.jsx("strong",{children:"Welcome to the Parent Portal!"})," This feature allows you to:",e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"View detailed progress across all game modes"}),e.jsx("li",{children:"Track performance trends and identify strengths/weaknesses"}),e.jsx("li",{children:"Set custom goals and challenges"}),e.jsx("li",{children:"Monitor daily challenge participation"}),e.jsx("li",{children:"Control app usage and customize learning focus"}),e.jsx("li",{children:"Set time limits and manage feature access"}),e.jsx("li",{children:"Assign specific lessons and practice areas"}),e.jsx("li",{children:"Communicate directly with your child"}),e.jsx("li",{children:"Manage multiple student accounts"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border-2 border-purple-200",children:[e.jsx(wt,{className:"w-12 h-12 mx-auto mb-3 text-purple-600"}),e.jsx("h3",{className:"font-bold mb-2",children:"Track Progress"}),e.jsx("p",{className:"text-sm text-gray-600",children:"See detailed statistics and performance trends"})]}),e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border-2 border-blue-200",children:[e.jsx(ne,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),e.jsx("h3",{className:"font-bold mb-2",children:"Assign Lessons"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create custom lessons and practice goals"})]}),e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border-2 border-green-200",children:[e.jsx(Se,{className:"w-12 h-12 mx-auto mb-3 text-green-600"}),e.jsx("h3",{className:"font-bold mb-2",children:"Communicate"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send feedback and encouragement"})]})]}),e.jsxs("div",{className:"text-center pt-4",children:[e.jsxs(R,{onClick:()=>h.mutate(!0),className:"h-14 px-8 text-lg bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600",disabled:h.isPending,children:[e.jsx(gt,{className:"w-5 h-5 mr-2"}),h.isPending?"Enabling...":"Enable Parent Mode"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"You can switch back to regular mode anytime"})]})]})]})})}export{Li as default};
