import{r as j,j as e,V as g,C as k,M as V,W as x,d as L,h as R}from"./index-52tutDqx.js";import{T as S}from"./TextToSpeech-AHz3T4an.js";function Q({question:t,onAnswer:w,questionNumber:d}){const[C,f]=j.useState(null),[h,y]=j.useState(!1),u=Array.isArray(t.optionsDisplay)&&t.optionsDisplay.length===t.options.length?t.optionsDisplay:t.options,N=a=>{h||(f(a),y(!0),setTimeout(()=>{w(a),f(null),y(!1)},500))};return e.jsxs(g.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:[e.jsxs(k,{className:"border-4 border-purple-200 shadow-2xl",children:[e.jsx(V,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm mb-2 opacity-90",children:["Question ",d]}),e.jsxs("h2",{className:"text-5xl md:text-6xl font-bold flex items-center gap-2",children:[t.question,e.jsx(S,{text:x(t.question),style:"icon",label:"Read question"})]})]})}),e.jsx(L,{className:"p-8",children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.options.map((a,i)=>{const m=u[i],s=a===t.answer,r=C===a;let l="text-2xl font-bold h-24 transition-all transform hover:scale-105";return h&&r&&(l+=s?" bg-green-500 text-white hover:bg-green-500 scale-110":" bg-red-500 text-white hover:bg-red-500 shake"),e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.1},children:e.jsx(R,{variant:"outline",className:l,onClick:()=>N(a),disabled:h,children:e.jsxs("span",{className:"flex items-center gap-2",children:[m,e.jsx(S,{text:x(String(m)),style:"icon",label:`Read answer option ${i+1}`})]})})},i)})})})]}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>{const a=x(`Question ${d}: ${t.question}. Possible answers are: ${u.join(", ")}.`);if(!("speechSynthesis"in window)){alert("Text-to-speech is not supported in this browser.");return}window.speechSynthesis.cancel();const i=()=>{const s=new window.SpeechSynthesisUtterance(a);try{const r=localStorage.getItem("tts.lang")==="es"?"es":"en";s.lang=r==="es"?"es-ES":"en-US";const l=parseFloat(localStorage.getItem("tts.rate"));s.rate=isNaN(l)?1:Math.min(2,Math.max(.1,l)),s.pitch=1.2;const v=window.speechSynthesis.getVoices(),p=v.filter(o=>(o.lang||"").toLowerCase().startsWith(r)),b=["emma","female","woman","girl","zira","jenny","olivia","sonia","ana","isabella","sara","sofia","monica","paulina","samantha","victoria","heera","veena"],M=["david","male","man","boy","mark","james","richard","thomas","daniel","george","michael"];let n=p.find(o=>o.name.toLowerCase().includes("emma"));n||(n=p.find(o=>b.some(c=>o.name.toLowerCase().includes(c)))),n||(n=p.filter(c=>!M.some(A=>c.name.toLowerCase().includes(A)))[0]),n||(n=v.find(o=>b.some(c=>o.name.toLowerCase().includes(c)))),n&&(s.voice=n)}catch{s.lang="en-US",s.rate=1,s.pitch=1.2}window.speechSynthesis.speak(s)};window.speechSynthesis.getVoices().length===0?window.speechSynthesis.addEventListener("voiceschanged",i,{once:!0}):i()},className:"px-6 py-3 bg-gradient-to-r from-green-400 to-emerald-500 hover:from-green-500 hover:to-emerald-600 text-white font-bold text-lg rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 border-4 border-green-300",children:"ðŸ”Š Read it to Me"}),e.jsx("button",{onClick:()=>{"speechSynthesis"in window&&window.speechSynthesis.cancel()},className:"px-6 py-3 bg-gradient-to-r from-red-200 to-red-400 hover:from-red-300 hover:to-red-500 text-white font-bold text-lg rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 border-4 border-red-200",children:"â¹ï¸ Stop Read"})]})})]})}function W(){const t=["ðŸŽ‰","âœ¨","â­","ðŸŒŸ","ðŸ’«","ðŸŽŠ"];return e.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:[...Array(20)].map((w,d)=>e.jsx(g.div,{initial:{x:Math.random()*window.innerWidth,y:-50,rotate:0,opacity:1},animate:{y:window.innerHeight+50,rotate:360,opacity:0},transition:{duration:2+Math.random()*2,ease:"linear"},className:"absolute text-4xl",children:t[Math.floor(Math.random()*t.length)]},d))})}export{W as C,Q};
