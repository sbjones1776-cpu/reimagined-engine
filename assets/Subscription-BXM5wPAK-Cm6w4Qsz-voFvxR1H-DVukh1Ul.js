import{p as T,S as h,I as q,x as e,o as k,g as d,b as o,G as y,k as r,l as f,$ as i,a7 as U,P as w,q as v,i as Y,B as I,f as X,y as u,v as p,M as a,r as E}from"./index-DElVeBpj.js";import{I as L}from"./useMutation-Dw-sPjxD-CEUn9Yuu-xvhDPSZb-Dr0QtMK_.js";import{H as W,X as K}from"./AppTrialPromo-fh-8uCNN-DKo9sh4v-BiPmLhpn-DmAk7113.js";import{a as j}from"./triangle-alert-BF04o9wv-5R0uES8i-B0nBc2eR-DyIfcPD2.js";function Q(){const b=T(),[m,R]=h.useState(!1),[P,B]=h.useState(null),[_,g]=h.useState(!1),$=(()=>{try{const s=/Android/i.test(navigator.userAgent||""),n=typeof document<"u"&&typeof document.referrer=="string"&&document.referrer.startsWith("android-app://");return!(s&&n)}catch{return!0}})(),{data:t}=q({queryKey:["currentUser"],queryFn:async()=>({email:"user@example.com",subscription_tier:"free",subscription_expires_at:null,subscription_auto_renew:!1}),initialData:{email:"user@example.com",subscription_tier:"free",subscription_expires_at:null,subscription_auto_renew:!1}});h.useEffect(()=>{const s=new URLSearchParams(window.location.search),n=s.get("success"),c=s.get("tier");n==="true"&&c&&setTimeout(()=>{b.invalidateQueries({queryKey:["currentUser"]})},1e3)},[b]);const x=(t==null?void 0:t.subscription_tier)||"free",C=x!=="free",l=t!=null&&t.subscription_expires_at?new Date(t.subscription_expires_at):null,A=l?Math.ceil((l-new Date)/(1e3*60*60*24)):0,S=(s,n="monthly")=>{const c=K(s,n);c?window.open(c,"_blank","noopener,noreferrer"):alert("No payment link available for this plan and period.")},N=L({mutationFn:async()=>{throw console.log("Subscription cancel request"),alert("Subscription cancellation is currently being migrated to Firebase. This feature will be available soon!"),new Error("Subscription cancel pending implementation")},onSuccess:()=>{b.invalidateQueries({queryKey:["currentUser"]}),g(!1)}}),M=[{id:"premium_player",name:"Premium Player",price:"$4.99",annualPrice:"$47.88",annualSavings:"Save $12",icon:Y,color:"from-blue-500 to-cyan-500",features:["Unlimited games & challenges","Advanced avatar customization","Exclusive pets & badges","Ad-free experience","Priority support","Offline mode","Custom themes"],recommended:!1},{id:"premium_parent",name:"Premium Parent",price:"$7.99",annualPrice:"$76.88",annualSavings:"Save $19",icon:I,color:"from-purple-500 to-pink-500",features:["All Premium Player features","Advanced parental controls","Detailed progress analytics","Custom goal setting","Time limit management","Content filtering","Weekly/monthly reports","Direct messaging with child"],recommended:!0},{id:"family_teacher",name:"Family/Teacher Plan",price:"$12.99",annualPrice:"$124.88",annualSavings:"$31",icon:X,color:"from-orange-500 to-red-500",features:["All Premium Parent features","Up to 10 student accounts","Classroom management tools","Lesson assignment system","Team challenges","Bulk progress reports","Multi-child dashboard","Priority teacher support"],recommended:!1}];return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 overflow-x-hidden",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-block mb-4",children:e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center shadow-xl animate-pulse",children:e.jsx(k,{className:"w-10 h-10 text-white"})})}),e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 bg-clip-text text-transparent",children:"Unlock Premium Features"}),e.jsx("p",{className:"text-xl text-gray-600 mb-2 break-words",children:"Choose the perfect plan for your learning journey"}),e.jsx("p",{className:"text-md text-green-600 mb-2 font-semibold",children:"Save 20% when you purchase any yearly plan!"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 break-words",children:"Secure payment powered by Square"}),e.jsx("div",{className:"max-w-xl mx-auto",children:e.jsx(W,{compact:!0})})]}),C&&e.jsx(d,{className:"mb-12 border-4 border-green-400 shadow-xl bg-gradient-to-r from-green-50 to-emerald-50",children:e.jsx(o,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(y,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 break-words",children:x==="premium_parent"?"Premium Parent":x==="premium_player"?"Premium Player":"Family/Teacher Plan"}),e.jsx(r,{className:"bg-green-500 text-white",children:"Active"})]}),e.jsxs("div",{className:"space-y-1",children:[l&&e.jsx("p",{className:"text-gray-600 break-words",children:(t==null?void 0:t.subscription_auto_renew)===!1?`Expires ${f(l,"MMMM d, yyyy")}`:`Renews ${f(l,"MMMM d, yyyy")} • ${A} days left`}),(t==null?void 0:t.subscription_auto_renew)===!1&&e.jsxs(r,{variant:"outline",className:"bg-orange-50 border-orange-300 text-orange-700",children:[e.jsx(j,{className:"w-3 h-3 mr-1"}),"Subscription will not renew"]})]})]})]}),(t==null?void 0:t.subscription_auto_renew)!==!1&&$&&e.jsxs(i,{variant:"destructive",onClick:()=>g(!0),className:"h-12 text-sm sm:text-base",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Cancel Subscription"]})]})})}),P&&e.jsxs(w,{className:"mb-8 bg-red-50 border-red-200",children:[e.jsx(j,{className:"w-5 h-5 text-red-600"}),e.jsxs(v,{className:"text-red-800",children:[e.jsx("strong",{children:"Error:"})," ",P]})]}),new URLSearchParams(window.location.search).get("success")==="true"&&e.jsxs(w,{className:"mb-8 bg-green-50 border-green-200",children:[e.jsx(y,{className:"w-5 h-5 text-green-600"}),e.jsxs(v,{className:"text-green-800",children:[e.jsx("strong",{children:"Success!"})," Your subscription is being activated. This may take a few moments."]})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 mb-12",children:M.map(s=>{const n=s.icon,c=x===s.id;return e.jsxs(d,{className:`relative overflow-hidden transition-all duration-300 ${s.recommended?"border-4 border-purple-400 shadow-2xl scale-105":"border-2 border-gray-200 hover:shadow-xl hover:scale-102"}`,children:[s.recommended&&e.jsx("div",{className:"absolute top-0 right-0 bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-1 text-sm font-bold rounded-bl-lg",children:"MOST POPULAR"}),e.jsx("div",{className:`h-32 bg-gradient-to-br ${s.color} flex items-center justify-center`,children:e.jsx(n,{className:"w-16 h-16 text-white"})}),e.jsxs(u,{children:[e.jsx(p,{className:"text-2xl mb-2 break-words",children:s.name}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl sm:text-4xl font-bold",children:s.price}),e.jsx("span",{className:"text-gray-600",children:"/month"})]})}),e.jsx("div",{className:"bg-green-50 p-2 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-semibold text-green-700 break-words",children:[s.annualPrice,"/year"]}),e.jsx(r,{className:"bg-green-500 text-white text-xs",children:s.annualSavings})]})})]})]}),e.jsxs(o,{className:"space-y-6",children:[e.jsx("ul",{className:"space-y-3",children:s.features.map((F,D)=>e.jsxs("li",{className:"flex items-start gap-2 min-w-0",children:[e.jsx(a,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-700 flex-1 min-w-0 break-words",children:F})]},D))}),c?e.jsxs(i,{disabled:!0,className:"w-full h-12 bg-gray-400 cursor-not-allowed",children:[e.jsx(y,{className:"w-5 h-5 mr-2"}),"Current Plan"]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{onClick:()=>S(s.id,"monthly"),disabled:m,className:`w-full h-12 text-base sm:text-lg bg-gradient-to-r ${s.color} hover:opacity-90`,children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),"Subscribe Monthly"]})}),e.jsx(i,{onClick:()=>S(s.id,"yearly"),disabled:m,variant:"outline",className:"w-full h-12 text-sm sm:text-base",children:m?"Processing...":e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-5 h-5 mr-2"}),"Subscribe Annually (Save 20%)"]})})]})]})]},s.id)})}),e.jsxs(d,{className:"mb-12",children:[e.jsx(u,{className:"bg-gradient-to-r from-purple-50 to-pink-50",children:e.jsx(p,{className:"text-2xl",children:"Compare Features"})}),e.jsx(o,{className:"p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2",children:[e.jsx("th",{className:"text-left p-4 font-bold",children:"Feature"}),e.jsx("th",{className:"text-center p-4 font-bold",children:"Free"}),e.jsx("th",{className:"text-center p-4 font-bold",children:"Premium Player"}),e.jsx("th",{className:"text-center p-4 font-bold bg-purple-50",children:"Premium Parent"}),e.jsx("th",{className:"text-center p-4 font-bold",children:"Family/Teacher"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-4",children:"Math Games Access"}),e.jsx("td",{className:"text-center p-4",children:e.jsx(r,{variant:"outline",children:"Limited"})}),e.jsx("td",{className:"text-center p-4",children:e.jsx(a,{className:"w-5 h-5 text-green-500 mx-auto"})}),e.jsx("td",{className:"text-center p-4 bg-purple-50",children:e.jsx(a,{className:"w-5 h-5 text-green-500 mx-auto"})}),e.jsx("td",{className:"text-center p-4",children:e.jsx(a,{className:"w-5 h-5 text-green-500 mx-auto"})})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-4",children:"Daily Challenges"}),e.jsx("td",{className:"text-center p-4",children:e.jsx(a,{className:"w-5 h-5 text-green-500 mx-auto"})}),e.jsx("td",{className:"text-center p-4",children:e.jsx(a,{className:"w-5 h-5 text-green-500 mx-auto"})}),e.jsx("td",{className:"text-center p-4 bg-purple-50",children:e.jsx(a,{className:"w-5 h-5 text-green-500 mx-auto"})}),e.jsx("td",{className:"text-center p-4",children:e.jsx(a,{className:"w-5 h-5 text-green-500 mx-auto"})})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-4",children:"AI Tutor Help"}),e.jsx("td",{className:"text-center p-4",children:e.jsx(r,{variant:"outline",children:"Limited"})}),e.jsx("td",{className:"text-center p-4",children:e.jsx(a,{className:"w-5 h-5 text-green-500 mx-auto"})}),e.jsx("td",{className:"text-center p-4 bg-purple-50",children:e.jsx(a,{className:"w-5 h-5 text-green-500 mx-auto"})}),e.jsx("td",{className:"text-center p-4",children:e.jsx(a,{className:"w-5 h-5 text-green-500 mx-auto"})})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-4",children:"Parental Controls"}),e.jsx("td",{className:"text-center p-4",children:"—"}),e.jsx("td",{className:"text-center p-4",children:"—"}),e.jsx("td",{className:"text-center p-4 bg-purple-50",children:e.jsx(a,{className:"w-5 h-5 text-green-500 mx-auto"})}),e.jsx("td",{className:"text-center p-4",children:e.jsx(a,{className:"w-5 h-5 text-green-500 mx-auto"})})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-4",children:"Progress Analytics"}),e.jsx("td",{className:"text-center p-4",children:e.jsx(r,{variant:"outline",children:"Basic"})}),e.jsx("td",{className:"text-center p-4",children:e.jsx(r,{variant:"outline",children:"Basic"})}),e.jsx("td",{className:"text-center p-4 bg-purple-50",children:e.jsx(r,{className:"bg-purple-500 text-white",children:"Advanced"})}),e.jsx("td",{className:"text-center p-4",children:e.jsx(r,{className:"bg-orange-500 text-white",children:"Advanced"})})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-4",children:"Number of Students"}),e.jsx("td",{className:"text-center p-4",children:"1"}),e.jsx("td",{className:"text-center p-4",children:"1"}),e.jsx("td",{className:"text-center p-4 bg-purple-50",children:"1"}),e.jsx("td",{className:"text-center p-4",children:e.jsx(r,{className:"bg-orange-500 text-white",children:"Up to 10"})})]})]})]})})})]}),e.jsxs(d,{children:[e.jsx(u,{children:e.jsx(p,{children:"Frequently Asked Questions"})}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Can I cancel anytime?"}),e.jsx("p",{className:"text-gray-600",children:"Yes! You can cancel your subscription at any time from this page. You'll continue to have access until the end of your billing period."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"What payment methods do you accept?"}),e.jsx("p",{className:"text-gray-600",children:"We accept all major credit cards (Visa, Mastercard, American Express) and debit cards through our secure payment provider, Square."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Is there a free trial?"}),e.jsx("p",{className:"text-gray-600",children:"The free version gives you access to basic features to try out the app. Premium features are available immediately upon subscription."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"What's the difference between monthly and annual plans?"}),e.jsx("p",{className:"text-gray-600",children:"Annual plans save you 20% compared to monthly subscriptions. You pay upfront for the year and get uninterrupted access to all premium features."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Can I upgrade or downgrade my plan?"}),e.jsx("p",{className:"text-gray-600",children:"Yes! Contact our support team and we'll help you switch plans. Changes typically take effect at the start of your next billing cycle."})]})]})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(d,{className:"max-w-md w-full border-4 border-red-300",children:[e.jsx(u,{className:"bg-red-50",children:e.jsxs(p,{className:"flex items-center gap-2 text-red-700",children:[e.jsx(j,{className:"w-6 h-6"}),"Cancel Subscription?"]})}),e.jsxs(o,{className:"p-6 space-y-4",children:[e.jsx("p",{className:"text-gray-700",children:"Are you sure you want to cancel your subscription?"}),e.jsxs(w,{className:"bg-yellow-50 border-yellow-300",children:[e.jsx(j,{className:"w-4 h-4 text-yellow-600"}),e.jsxs(v,{className:"text-yellow-800 text-sm",children:["You'll lose access to premium features when your current billing period ends on ",l?f(l,"MMMM d, yyyy"):"the end date","."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(i,{variant:"outline",className:"flex-1",onClick:()=>g(!1),children:"Keep Subscription"}),e.jsx(i,{variant:"destructive",className:"flex-1",onClick:()=>N.mutate(),disabled:N.isPending,children:N.isPending?"Cancelling...":"Yes, Cancel"})]})]})]})})]})}export{Q as default};
