import{C as r,x as e,u as D,n as F,o as U,Q as z,Y as L,i as M,a as H,l as $,b as J,c as Q,m as W,U as Y,d as B}from"./index-8_HM-GMx.js";import{n as O}from"./download-k8BXtbsE-hJBy54oi-W-SMHhYC-Bl-czKV--CsHTKCTt-BP9X_a4h-DBl5YPJh-DgteZXgB-BSDDse-H-BTDA4j8j-r2Jt5h6y-Dw2tzXgm.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],R=L("Share",V);/**
* @license lucide-react v0.475.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Z=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],q=L("Smartphone",Z);function A(t,i){if(typeof t=="function")return t(i);t!=null&&(t.current=i)}function K(...t){return i=>{let s=!1;const l=t.map(o=>{const n=A(o,i);return!s&&typeof n=="function"&&(s=!0),n});if(s)return()=>{for(let o=0;o<l.length;o++){const n=l[o];typeof n=="function"?n():A(t[o],null)}}}}function _(...t){return r.useCallback(K(...t),t)}class G extends r.Component{getSnapshotBeforeUpdate(i){const s=this.props.childRef.current;if(s&&i.isPresent&&!this.props.isPresent){const l=s.offsetParent,o=B(l)&&l.offsetWidth||0,n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft,n.right=o-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ee({children:t,isPresent:i,anchorX:s,root:l}){const o=r.useId(),n=r.useRef(null),f=r.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:g}=r.useContext(Y),y=_(n,t==null?void 0:t.ref);return r.useInsertionEffect(()=>{const{width:a,height:u,top:c,left:d,right:m}=f.current;if(i||!n.current||!a||!u)return;const j=s==="left"?`left: ${d}`:`right: ${m}`;n.current.dataset.motionPopId=o;const h=document.createElement("style");g&&(h.nonce=g);const w=l??document.head;return w.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${u}px !important;
            ${j}px !important;
            top: ${c}px !important;
          }
        `),()=>{w.contains(h)&&w.removeChild(h)}},[i]),e.jsx(G,{isPresent:i,childRef:n,sizeRef:f,children:r.cloneElement(t,{ref:y})})}const te=({children:t,initial:i,isPresent:s,onExitComplete:l,custom:o,presenceAffectsLayout:n,mode:f,anchorX:g,root:y})=>{const a=$(se),u=r.useId();let c=!0,d=r.useMemo(()=>(c=!1,{id:u,initial:i,isPresent:s,custom:o,onExitComplete:m=>{a.set(m,!0);for(const j of a.values())if(!j)return;l&&l()},register:m=>(a.set(m,!1),()=>a.delete(m))}),[s,a,l]);return n&&c&&(d={...d}),r.useMemo(()=>{a.forEach((m,j)=>a.set(j,!1))},[s]),r.useEffect(()=>{!s&&!a.size&&l&&l()},[s]),f==="popLayout"&&(t=e.jsx(ee,{isPresent:s,anchorX:g,root:y,children:t})),e.jsx(W.Provider,{value:d,children:t})};function se(){return new Map}const v=t=>t.key||"";function I(t){const i=[];return r.Children.forEach(t,s=>{r.isValidElement(s)&&i.push(s)}),i}const ne=({children:t,custom:i,initial:s=!0,onExitComplete:l,presenceAffectsLayout:o=!0,mode:n="sync",propagate:f=!1,anchorX:g="left",root:y})=>{const[a,u]=H(f),c=r.useMemo(()=>I(t),[t]),d=f&&!a?[]:c.map(v),m=r.useRef(!0),j=r.useRef(c),h=$(()=>new Map),[w,T]=r.useState(c),[b,C]=r.useState(c);J(()=>{m.current=!1,j.current=c;for(let x=0;x<b.length;x++){const p=v(b[x]);d.includes(p)?h.delete(p):h.get(p)!==!0&&h.set(p,!1)}},[b,d.length,d.join("-")]);const k=[];if(c!==w){let x=[...c];for(let p=0;p<b.length;p++){const N=b[p],P=v(N);d.includes(P)||(x.splice(p,0,N),k.push(N))}return n==="wait"&&k.length&&(x=k),C(I(x)),T(c),null}const{forceRender:S}=r.useContext(Q);return e.jsx(e.Fragment,{children:b.map(x=>{const p=v(x),N=f&&!a?!1:c===b||d.includes(p),P=()=>{if(h.has(p))h.set(p,!0);else return;let E=!0;h.forEach(X=>{X||(E=!1)}),E&&(S==null||S(),C(j.current),f&&(u==null||u()),l&&l())};return e.jsx(te,{isPresent:N,initial:!m.current||s?void 0:!1,custom:i,presenceAffectsLayout:o,mode:n,root:y,onExitComplete:N?void 0:P,anchorX:g,children:x},p)})})};function ie(){const[t,i]=r.useState(null),[s,l]=r.useState(!1),[o,n]=r.useState(!1),[f,g]=r.useState(!1);r.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){g(!0);return}const u=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;n(u);const c=d=>{d.preventDefault(),i(d),setTimeout(()=>{l(!0)},3e3)};return window.addEventListener("beforeinstallprompt",c),u&&setTimeout(()=>{l(!0)},3e3),()=>{window.removeEventListener("beforeinstallprompt",c)}},[]);const y=async()=>{if(!t)return;t.prompt();const{outcome:u}=await t.userChoice;u==="accepted"&&(console.log("User accepted the install prompt"),g(!0)),i(null),l(!1)},a=()=>{l(!1),sessionStorage.setItem("installPromptDismissed","true")};return f||sessionStorage.getItem("installPromptDismissed")?null:e.jsx(ne,{children:s&&e.jsx(D.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"fixed bottom-20 left-4 right-4 z-50 md:left-auto md:right-8 md:max-w-md lg:bottom-8",children:e.jsx(F,{className:"border-4 border-purple-400 shadow-2xl bg-gradient-to-br from-purple-50 to-pink-50",children:e.jsxs(U,{className:"p-4",children:[e.jsx("button",{onClick:a,className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Dismiss",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0 shadow-lg",children:e.jsx(q,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:"Install Math Adventure"}),o?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Add to your home screen for the best experience!"}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-purple-200 text-sm space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(R,{className:"w-4 h-4 text-blue-600"})}),e.jsx("p",{className:"font-semibold text-purple-700",children:"How to install on iPhone/iPad:"})]}),e.jsxs("ol",{className:"space-y-2 text-gray-700 ml-2",children:[e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"font-bold text-purple-600 flex-shrink-0",children:"1."}),e.jsxs("span",{children:["Tap the ",e.jsx("strong",{children:"Share button"})," ",e.jsx(R,{className:"inline w-4 h-4"})," at the bottom of your screen (or top in Safari)"]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"font-bold text-purple-600 flex-shrink-0",children:"2."}),e.jsxs("span",{children:["Scroll down and tap ",e.jsx("strong",{children:'"Add to Home Screen"'})," ",e.jsx("span",{className:"inline-block bg-gray-100 px-2 py-1 rounded text-xs",children:"ðŸ“±+"})]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"font-bold text-purple-600 flex-shrink-0",children:"3."}),e.jsxs("span",{children:["Tap ",e.jsx("strong",{children:'"Add"'})," in the top right corner"]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"font-bold text-purple-600 flex-shrink-0",children:"4."}),e.jsx("span",{children:"The app icon will appear on your home screen!"})]})]}),e.jsx("div",{className:"bg-blue-50 p-2 rounded mt-3",children:e.jsxs("p",{className:"text-xs text-blue-700",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Once installed, open the app from your home screen for the full-screen experience!"]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Install the app for quick access and offline play!"}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border-2 border-purple-200 mb-3",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"âœ¨ Benefits:"}),e.jsxs("ul",{className:"text-xs text-gray-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Works offline"}),e.jsx("li",{children:"â€¢ Faster loading"}),e.jsx("li",{children:"â€¢ Full-screen experience"}),e.jsx("li",{children:"â€¢ Home screen access"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:y,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Install App"]}),e.jsx(M,{onClick:a,variant:"outline",children:"Later"})]})]})]})]})]})})})})}export{ie as default};
