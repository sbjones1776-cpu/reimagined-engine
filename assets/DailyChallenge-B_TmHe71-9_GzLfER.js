import{V as Be,H as Me,T as f,h as ce,C as V,_ as Fe,i as de,x as e,t as q,v as L,q as H,o as z,G as J,Q as U,d as k,$ as T,A,c as Le,f as me,g as N,E as xe,a0 as Ye,aq as He,a6 as Ue}from"./index-DfCIuvW-.js";import{P as Oe}from"./useMutation-BBbn5Ibo-BJFBDAw4.js";import{F as Ee}from"./progress-D8Mly-oi-3Ij_j_WH.js";import{Q as Ke,I as Pe}from"./CelebrationAnimation-5xmelkAl-MsLmzNGW.js";import{e as O}from"./award-DsC9STJ2-D9jCxi3D.js";import{o as W}from"./target-CKjL3a7Z-CNfUoT2L.js";import{d as ue}from"./medal-Co574HnZ-BrwNViFy.js";import{w as $}from"./QuestionGenerator-z-c728t7-CSzYVewV.js";import{L as Re}from"./TextToSpeech-jPFv8Mzs-9YNY52v7.js";import{r as pe}from"./arrow-left-B1UHrOU7-W_GQWmbU.js";import{o as Y}from"./flame-ByI7R4Rc-BbLUZ-TU.js";import{e as X}from"./zap-w4f_OL2g-BKWEZluV.js";function he({todaysChallenges:d,currentUser:m}){const n=[...d].sort((s,b)=>b.score!==s.score?b.score-s.score:s.time_taken-b.time_taken),r=n.slice(0,10),a=n.findIndex(s=>s.created_by===(m==null?void 0:m.email))+1,l=s=>s===1?e.jsx(k,{className:"w-6 h-6 text-yellow-500 fill-yellow-500"}):s===2?e.jsx(ue,{className:"w-6 h-6 text-gray-400 fill-gray-400"}):s===3?e.jsx(ue,{className:"w-6 h-6 text-amber-600 fill-amber-600"}):e.jsxs("span",{className:"w-6 h-6 flex items-center justify-center font-bold text-gray-500",children:["#",s]}),c=s=>s===1?"from-yellow-100 to-yellow-200 border-yellow-300":s===2?"from-gray-100 to-gray-200 border-gray-300":s===3?"from-amber-100 to-amber-200 border-amber-300":"from-white to-gray-50 border-gray-200";return e.jsxs(H,{className:"border-2 border-purple-200",children:[e.jsx(z,{className:"bg-gradient-to-r from-purple-100 to-pink-100",children:e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-6 h-6 text-purple-600"}),"Today's Leaderboard",a>0&&e.jsxs(N,{variant:"outline",className:"ml-auto bg-white",children:["You're #",a]})]})}),e.jsx(U,{className:"p-6",children:r.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(k,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Be the first to complete today's challenge!"})]}):e.jsx("div",{className:"space-y-2",children:r.map((s,b)=>{var j;const D=b+1,w=s.created_by===(m==null?void 0:m.email),E=Math.round(s.correct_answers/s.total_questions*100);return e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border-2 transition-all ${w?"bg-gradient-to-r from-purple-100 to-pink-100 border-purple-300 shadow-md":`bg-gradient-to-r ${c(D)} border`}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[l(D),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:w?"You":((j=s.created_by)==null?void 0:j.split("@")[0])||"Player"}),w&&e.jsx(N,{className:"bg-purple-500 text-white",children:"You"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"w-4 h-4"}),s.score," pts"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"w-4 h-4"}),E,"%"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"w-4 h-4"}),s.time_taken,"s"]})]})]})]}),s.bonus_stars>0&&e.jsxs(N,{className:"bg-yellow-500 text-white",children:["+",s.bonus_stars," â­"]})]},b)})})})]})}const be=(d,m="standard_mixed")=>{const n=new Date(d).getTime(),r=(a,l,c=0)=>{const s=Math.sin(n+a+l+c)*1e4;return Math.floor((s-Math.floor(s))*(l-a+1))+a};return({standard_mixed:ge,speed_round:Ge,accuracy_focus:Ie,concept_mastery:Ve,word_problem_day:Xe,brain_teaser:ze,grade_level_challenge:Je,streak_builder:We}[m]||ge)(r,n)};function ge(d,m){const n=["addition","subtraction","multiplication","division"],r=[];for(let a=0;a<15;a++){const l=n[d(0,n.length-1,a)],c=a<5?"easy":a<10?"medium":"hard";r.push($(l,c))}return{questions:r,objective:"Complete 15 mixed math problems across different difficulties",bonusTarget:{accuracy:90,time:180},totalQuestions:15,challengeType:"standard_mixed",concepts:n,description:"Test your skills across all four operations with increasing difficulty!"}}function Ge(d,m){const n=["addition","multiplication"],r=[];for(let a=0;a<20;a++){const l=n[d(0,1,a)];r.push($(l,"easy"))}return{questions:r,objective:"Answer 20 quick-fire questions as fast as possible!",bonusTarget:{accuracy:85,time:120},totalQuestions:20,challengeType:"speed_round",concepts:n,description:"Race against the clock! Can you finish in under 2 minutes?",timeLimit:120}}function Ie(d,m){const n=["multiplication","division","fractions"],r=[];for(let a=0;a<12;a++){const l=n[d(0,n.length-1,a)],c=a<4?"medium":a<8?"hard":"expert";r.push($(l,c))}return{questions:r,objective:"Achieve perfect or near-perfect accuracy on challenging problems",bonusTarget:{accuracy:95,time:300},totalQuestions:12,challengeType:"accuracy_focus",concepts:n,description:"Take your time and aim for perfection! Accuracy is key today."}}function Ve(d,m){const n=["fractions","decimals","percentages","word_problems","geometry"],r=n[d(0,n.length-1,0)],a=[];for(let l=0;l<15;l++){const c=l<5?"easy":l<10?"medium":"hard";a.push($(r,c))}return{questions:a,objective:`Master ${r} today!`,bonusTarget:{accuracy:88,time:240},totalQuestions:15,challengeType:"concept_mastery",concepts:[r],description:`Deep dive into ${r}! Build your expertise with focused practice.`,focusConcept:r}}function Xe(d,m){const n=[];for(let r=0;r<10;r++){const a=r<3?"easy":r<7?"medium":"hard";n.push($("word_problems",a))}return{questions:n,objective:"Solve real-world math problems",bonusTarget:{accuracy:85,time:300},totalQuestions:10,challengeType:"word_problem_day",concepts:["word_problems"],description:"Apply math to real life! Read carefully and solve each scenario."}}function ze(d,m){const n=[],r=["fractions","decimals","percentages","geometry","mixed"];for(let a=0;a<12;a++){const l=r[d(0,r.length-1,a)];n.push($(l,"hard"))}return{questions:n,objective:"Crack today's brain teasers!",bonusTarget:{accuracy:80,time:360},totalQuestions:12,challengeType:"brain_teaser",concepts:r,description:"Think outside the box! These tricky problems will challenge your mind."}}function Je(d,m){const n=["1","2","3","4","5","6","7","8"],r=n[d(0,n.length-1,0)],a={1:["addition","subtraction"],2:["addition","subtraction","time","money"],3:["multiplication","division","fractions"],4:["multiplication","division","fractions","decimals"],5:["decimals","fractions","percentages"],6:["percentages","fractions","decimals","geometry"],7:["percentages","geometry","mixed"],8:["mixed","geometry","percentages"]}[r]||["addition","subtraction"],l=[];for(let c=0;c<15;c++){const s=a[d(0,a.length-1,c)],b=c<5?"easy":c<10?"medium":"hard";l.push($(s,b))}return{questions:l,objective:`Complete Grade ${r} Challenge`,bonusTarget:{accuracy:87,time:240},totalQuestions:15,challengeType:"grade_level_challenge",concepts:a,description:`Master Grade ${r} math skills! Perfect for students at this level.`,gradeLevel:r}}function We(d,m){const n=["addition","subtraction","multiplication"],r=[];for(let a=0;a<18;a++){const l=n[d(0,n.length-1,a)],c=a<6||a<12?"easy":"medium";r.push($(l,c))}return{questions:r,objective:"Build your daily streak! Complete for bonus rewards.",bonusTarget:{accuracy:85,time:200},totalQuestions:18,challengeType:"streak_builder",concepts:n,description:"Keep your streak alive! Designed to be completable for all skill levels.",streakFocus:!0}}const Ze=(d,m,n,r)=>{const{bonusTarget:a,challengeType:l}=d;let c=0,s=0,b=!1,j=!1;return m>=95?(c=3,b=!0):m>=85?c=2:m>=70&&(c=1),a&&n<=a.time&&(c+=1,s+=20,j=!0),r&&r>=3&&(c+=1,s+=10*Math.min(r,10)),l==="speed_round"&&j&&(s+=30),l==="accuracy_focus"&&b&&(s+=40),l==="brain_teaser"&&m>=80&&(c+=1,s+=25),{bonusStars:Math.min(c,5),bonusCoins:s,perfectScoreBonus:b,speedBonus:j}};function xs(){var d,m,n;const r=Be(),a=Me(),[l,c]=f.useState(0),[s,b]=f.useState(null),[j,D]=f.useState([]),[w,E]=f.useState(0),[K,fe]=f.useState(!1),[P,ye]=f.useState(Date.now()),[je,Z]=f.useState(!1),[B,Ne]=f.useState(0),[R,we]=f.useState(!1),[ve,ee]=f.useState(!1),[g,se]=f.useState(null),Q=ce(V(new Date),"yyyy-MM-dd"),C=(()=>{const t=new Date().getDay();return["streak_builder","standard_mixed","speed_round","concept_mastery","accuracy_focus","word_problem_day","brain_teaser"][t]})(),{user:x}=Fe(),{data:v=[]}=de({queryKey:["dailyChallenges",Q],queryFn:async()=>[],initialData:[]}),{data:te=[]}=de({queryKey:["userDailyChallenges"],queryFn:async()=>{const t=getFirestore(firebaseApp);if(!(x!=null&&x.email))return[];const o=query(collection(t,"dailyChallenges"),where("created_by","==",x.email));return(await getDocs(o)).docs.map(u=>u.data())},initialData:[],enabled:!!x}),_e=v.some(t=>t.created_by===(x==null?void 0:x.email)),S=(()=>{if(te.length===0)return 0;const t=[...te].sort((i,y)=>new Date(y.challenge_date)-new Date(i.challenge_date));let o=0,u=V(new Date);for(const i of t){const y=V(new Date(i.challenge_date));if(Math.floor((u-y)/(1e3*60*60*24))===o)o++;else break}return o})();f.useEffect(()=>{if(!K&&R){const t=setInterval(()=>{Ne(Math.floor((Date.now()-P)/1e3))},1e3);return()=>clearInterval(t)}},[P,K,R]);const ke=Oe({mutationFn:async t=>{if(!(x!=null&&x.email))throw new Error("User not authenticated");const o=await He(x.email,t),u=t.bonus_coins||0,i=((x==null?void 0:x.coins)||0)+u;return await Ue(x.email,{coins:i,last_login_date:Q}),o},onSuccess:()=>{a.invalidateQueries({queryKey:["dailyChallenges"]}),a.invalidateQueries({queryKey:["userDailyChallenges"]}),a.invalidateQueries({queryKey:["currentUser"]})}}),$e=()=>{const t=be(Q,C);b(t),ye(Date.now()),we(!0)},Ce=t=>{const o=t===s.questions[l].answer;if(D([...j,{question:l,correct:o}]),o&&(E(w+10),Z(!0),setTimeout(()=>Z(!1),1e3)),!o){const u=s.questions[l];se({questionObj:u,userAnswer:t,correctAnswer:u.answer,explanation:u.explanation||"Review the steps to solve this problem."}),ee(!0);return}l<s.totalQuestions-1?setTimeout(()=>{c(l+1)},500):re(o)},ae=(t,o)=>{const u=((t==null?void 0:t.question)||"").trim(),i=[];let y=null,p=null,h=null;const F=(_=>{const G=[{key:"+",name:"addition"},{key:"-",name:"subtraction"},{key:"Ã—",name:"multiplication"},{key:"x",name:"multiplication"},{key:"â‹…",name:"multiplication"},{key:"Â·",name:"multiplication"},{key:"Ã·",name:"division"},{key:"/",name:"division"}];for(const I of G)if(_.includes(` ${I.key} `)){const[Ae,De]=_.split(` ${I.key} `),oe=parseFloat(Ae.replace(/[^0-9.\-]/g,"")),ie=parseFloat(De.replace(/[^0-9.\-]/g,""));if(!Number.isNaN(oe)&&!Number.isNaN(ie))return{op:I.name,a:oe,b:ie}}return null})(u);if(F&&(y=F.op,p=F.a,h=F.b),y==="addition"){i.push(`Set up the problem: ${p} + ${h}`);const _=p%10+h%10;p>=10&&h>=10?(i.push(`Add the ones place: ${p%10} + ${h%10} = ${_}${_>=10?" (carry 1)":""}`),i.push(`Add the tens (and carry if needed): ${Math.floor(p/10)} + ${Math.floor(h/10)}${_>=10?" + 1":""}`)):i.push(`Add the numbers: ${p} + ${h}`),i.push(`Final answer: ${o}`)}else y==="subtraction"?(i.push(`Set up the problem: ${p} - ${h}`),p%10<h%10&&p>=10&&i.push("Borrow from the tens place so you can subtract the ones place."),i.push(`Subtract to find the difference: ${p} - ${h} = ${o}`)):y==="multiplication"?(i.push(`Think of ${p} groups of ${h}.`),(p>=10||h>=10)&&i.push("Break it apart to make it easier, then multiply and add."),i.push(`Multiply: ${p} Ã— ${h} = ${o}`)):y==="division"?(i.push(`How many ${h}'s fit into ${p}?`),i.push(`Count groups or use facts until you reach ${p}.`),i.push(`So, ${p} Ã· ${h} = ${o}`)):u.includes(".")||/\d+\.\d+/.test(u)?(i.push("Line up the decimal points."),i.push("Add or subtract carefully column by column."),i.push(`Final answer: ${o}`)):t!=null&&t.explanation?i.push(t.explanation):i.push("Solve step by step to find the answer.");const Qe=["Let's solve it step by step.",...i.map((_,G)=>`Step ${G+1}. ${Ye(_)}`)].join(" ");return{steps:i,tts:Qe}},re=t=>{const o=Math.floor((Date.now()-P)/1e3),u=j.filter(h=>h.correct).length+(t?1:0),i=w+(t?10:0),y=u/s.totalQuestions*100,p=Ze(s,y,o,S);ke.mutate({challenge_date:Q,challenge_type:C,score:i,correct_answers:u,total_questions:s.totalQuestions,time_taken:o,bonus_stars:p.bonusStars,bonus_coins:p.bonusCoins,streak_bonus:S>=3,perfect_score_bonus:p.perfectScoreBonus,speed_bonus:p.speedBonus,challenge_objective:s.objective,concepts_covered:s.concepts}),setTimeout(()=>fe(!0),500)},Se=()=>{window.speechSynthesis&&window.speechSynthesis.cancel(),ee(!1),se(null),l<s.totalQuestions-1?c(l+1):re(!1)},qe=t=>({standard_mixed:me,speed_round:X,accuracy_focus:W,concept_mastery:Le,word_problem_day:O,brain_teaser:k,grade_level_challenge:O,streak_builder:Y})[t]||me,Te=t=>({standard_mixed:"from-purple-500 to-pink-500",speed_round:"from-yellow-500 to-orange-500",accuracy_focus:"from-green-500 to-emerald-500",concept_mastery:"from-blue-500 to-cyan-500",word_problem_day:"from-indigo-500 to-purple-500",brain_teaser:"from-red-500 to-pink-500",grade_level_challenge:"from-teal-500 to-cyan-500",streak_builder:"from-orange-500 to-red-500"})[t]||"from-purple-500 to-pink-500",le=qe(C),M=Te(C);if(!R)return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs(q,{variant:"outline",onClick:()=>r(L("Home")),className:"mb-6 gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),"Back"]}),_e?e.jsxs(H,{className:"border-4 border-green-300 shadow-2xl",children:[e.jsxs(z,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white text-center py-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âœ…"}),e.jsx(J,{className:"text-3xl",children:"Challenge Complete!"}),e.jsx("p",{className:"text-lg mt-2 opacity-90",children:"You've already completed today's challenge"})]}),e.jsxs(U,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Your Results Today"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[e.jsx(k,{className:"w-8 h-8 mx-auto mb-2 text-purple-500"}),e.jsx("div",{className:"text-2xl font-bold",children:(d=v.find(t=>t.created_by===(x==null?void 0:x.email)))==null?void 0:d.score}),e.jsx("div",{className:"text-sm text-gray-600",children:"Score"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl",children:[e.jsx(T,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),e.jsx("div",{className:"text-2xl font-bold",children:(m=v.find(t=>t.created_by===(x==null?void 0:x.email)))==null?void 0:m.bonus_stars}),e.jsx("div",{className:"text-sm text-gray-600",children:"Bonus Stars"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx(A,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsxs("div",{className:"text-2xl font-bold",children:[(n=v.find(t=>t.created_by===(x==null?void 0:x.email)))==null?void 0:n.time_taken,"s"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Time"})]})]})]}),e.jsx(he,{todaysChallenges:v,currentUser:x}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Come back tomorrow for a new challenge!"}),e.jsx(q,{onClick:()=>r(L("Home")),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:"Back to Home"})]})]})]}):e.jsxs(H,{className:"border-4 border-purple-300 shadow-2xl",children:[e.jsxs(z,{className:`bg-gradient-to-r ${M} text-white text-center py-12`,children:[e.jsx("div",{className:"text-7xl mb-4",children:e.jsx(le,{className:"w-20 h-20 mx-auto"})}),e.jsx(J,{className:"text-4xl mb-2",children:C.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}),e.jsx("p",{className:"text-xl opacity-90",children:ce(new Date,"MMMM d, yyyy")})]}),e.jsx(U,{className:"p-8 space-y-6",children:(()=>{const t=be(Q,C);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-xl border-2 border-blue-200",children:[e.jsxs("h3",{className:"text-xl font-bold mb-2 flex items-center gap-2",children:[e.jsx(W,{className:"w-6 h-6 text-blue-600"}),"Today's Objective"]}),e.jsx("p",{className:"text-lg text-gray-700",children:t.objective}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:t.description})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 p-6 rounded-xl border-2 border-yellow-200",children:[e.jsx(T,{className:"w-12 h-12 text-yellow-500 mb-3"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Bonus Rewards"}),e.jsx("p",{className:"text-gray-600",children:"Up to 5 bonus stars & extra coins!"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-xl border-2 border-orange-200",children:[e.jsx(Y,{className:"w-12 h-12 text-orange-500 mb-3"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Current Streak"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[S," ",S===1?"Day":"Days"]}),S>=3&&e.jsx(N,{className:"mt-2 bg-orange-500",children:"+1 Bonus Star!"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-xl border-2 border-purple-200",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5 text-purple-600"}),"Challenge Details"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Questions:"})," ",t.totalQuestions]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Concepts:"})," ",t.concepts.join(", ")]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Players Today:"})," ",v.length]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl border-2 border-green-200",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-green-600"}),"How to Earn Bonus Rewards"]}),e.jsxs("ul",{className:"space-y-2 text-gray-700",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-yellow-500"}),"70%+ accuracy: 1 bonus star"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-yellow-500"}),"85%+ accuracy: 2 bonus stars"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-yellow-500"}),"95%+ accuracy: 3 bonus stars"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4 text-orange-500"}),"Complete quickly: +1 star & coins"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4 text-orange-500"}),"3+ day streak: +1 extra star & coins"]})]})]}),e.jsx(q,{onClick:$e,className:`w-full h-16 text-xl bg-gradient-to-r ${M} hover:opacity-90 shadow-lg`,children:"Start Today's Challenge"})]})})()})]})]});if(K){const t=j.filter(u=>u.correct).length;t/s.totalQuestions*100;const o=v.find(u=>u.created_by===(x==null?void 0:x.email));return e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs(H,{className:"border-4 border-yellow-300 shadow-2xl",children:[e.jsxs("div",{className:`bg-gradient-to-r ${M} py-12 text-white text-center`,children:[e.jsx("div",{className:"text-8xl mb-4",children:"ðŸ†"}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-2",children:"Challenge Complete!"}),e.jsx("p",{className:"text-xl",children:"Great job on today's challenge!"})]}),e.jsxs(U,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[e.jsx(k,{className:"w-8 h-8 mx-auto mb-2 text-purple-500"}),e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:w}),e.jsx("div",{className:"text-sm text-gray-600",children:"Score"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[t,"/",s.totalQuestions]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Correct"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[e.jsx(A,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[B,"s"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Time"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[e.jsx(T,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500 fill-yellow-500"}),e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:(o==null?void 0:o.bonus_stars)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Bonus Stars"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[(o==null?void 0:o.perfect_score_bonus)&&e.jsxs(N,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-2 text-base",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Perfect Score Bonus!"]}),(o==null?void 0:o.speed_bonus)&&e.jsxs(N,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-4 py-2 text-base",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Speed Bonus!"]}),(o==null?void 0:o.streak_bonus)&&e.jsxs(N,{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 text-base",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Streak Bonus! (",S," days)"]})]}),(o==null?void 0:o.bonus_coins)>0&&e.jsx("div",{className:"bg-gradient-to-r from-cyan-100 to-blue-100 p-4 rounded-xl border-2 border-cyan-300 text-center",children:e.jsxs("p",{className:"font-bold text-lg",children:["Earned ",o.bonus_coins," Bonus Coins! ðŸª™"]})}),e.jsx(he,{todaysChallenges:v,currentUser:x}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(q,{variant:"outline",className:"flex-1 h-14 text-lg gap-2",onClick:()=>r(L("Home")),children:[e.jsx(pe,{className:"w-5 h-5"}),"Back Home"]}),e.jsxs(q,{className:`flex-1 h-14 text-lg bg-gradient-to-r ${M} hover:opacity-90 gap-2`,onClick:()=>r(L("Progress")),children:[e.jsx(k,{className:"w-5 h-5"}),"View Progress"]})]})]})]})})}const ne=(l+1)/s.totalQuestions*100;return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[je&&e.jsx(Ke,{}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(N,{variant:"outline",className:"text-lg px-4 py-2",children:[e.jsx(le,{className:"w-5 h-5 mr-2"}),C.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")]}),e.jsxs("div",{className:"flex items-center gap-4",children:[(s==null?void 0:s.timeLimit)&&e.jsxs(N,{variant:B>s.timeLimit?"destructive":"outline",className:"text-lg px-4 py-2",children:[e.jsx(A,{className:"w-5 h-5 mr-2"}),B,"s / ",s.timeLimit,"s"]}),!(s!=null&&s.timeLimit)&&e.jsxs("div",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-md",children:[e.jsx(A,{className:"w-5 h-5 text-blue-500"}),e.jsxs("span",{className:"font-bold text-gray-800",children:[B,"s"]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-md",children:[e.jsx(k,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:w})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["Question ",l+1," of ",s.totalQuestions]}),e.jsxs("span",{children:[Math.round(ne),"%"]})]}),e.jsx(Ee,{value:ne,className:"h-3"})]})]}),ve&&g?e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsxs("div",{className:"bg-white border-4 border-red-300 rounded-2xl shadow-2xl p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500 text-white flex items-center justify-center text-2xl",children:"âœ–"}),e.jsx("h2",{className:"text-2xl font-bold text-red-600",children:"Let's Learn From This One"})]}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:"Question:"}),e.jsx("p",{className:"text-3xl font-bold mb-4",children:g.questionObj.question}),(()=>{let t=ae(g.questionObj,g.correctAnswer).tts;return g.explanation&&(t+=`
`+g.explanation),e.jsx("div",{className:"mb-4",children:e.jsx(Re,{text:t,style:"button",label:"ðŸ”Š Read the steps & explanation"})})})(),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-6 text-center",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-red-50 border-2 border-red-200",children:[e.jsx("p",{className:"text-sm font-medium text-red-600 mb-1",children:"Your Answer"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:g.userAnswer})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-green-50 border-2 border-green-200",children:[e.jsx("p",{className:"text-sm font-medium text-green-600 mb-1",children:"Correct Answer"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:g.correctAnswer})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-purple-50 border-2 border-purple-200",children:[e.jsx("p",{className:"text-sm font-medium text-purple-600 mb-1",children:"Question #"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:l+1})]})]}),(()=>{const t=ae(g.questionObj,g.correctAnswer);return e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border-2 border-blue-200 p-6 rounded-xl mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2",children:"âœ¨ Let's solve it step by step"}),e.jsx("ol",{className:"list-decimal pl-5 space-y-1 text-gray-800",children:t.steps.map((o,u)=>e.jsx("li",{children:o},u))})]})})(),g.explanation&&e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-200 p-6 rounded-xl mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-2 flex items-center gap-2",children:"ðŸ§  Step-by-Step Explanation"}),e.jsx("p",{className:"whitespace-pre-line leading-relaxed text-gray-700",children:g.explanation})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(q,{onClick:Se,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:opacity-90 px-8 h-14 text-lg",children:"Continue"})})]})}):s&&s.questions.length>0&&e.jsx(Pe,{question:s.questions[l],onAnswer:Ce,questionNumber:l+1})]})}export{xs as default};
