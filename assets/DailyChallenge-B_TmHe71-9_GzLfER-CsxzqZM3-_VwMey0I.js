import{X as Ae,n as Me,S as y,Y as ce,_ as X,Z as Le,m as de,x as e,r as q,y as F,t as R,z as V,A as Z,i as U,p as k,f as T,j as B,e as Fe,E as me,q as N,R as xe,a0 as Ee,aq as Re,a6 as Ue}from"./index-yRbXivLn.js";import{G as Ye}from"./useMutation-BBbn5Ibo-BJFBDAw4-Dv4aGJVX-BVnXju1M.js";import{B as He}from"./progress-D8Mly-oi-3Ij_j_WH-Cj7a_al8-XJPky_9h.js";import{V as Oe,A as Ge}from"./CelebrationAnimation-5xmelkAl-MsLmzNGW-DQLTHAl3-CZLYZj1G.js";import{c as Y}from"./award-DsC9STJ2-D9jCxi3D-CzTl10qc-BMHn5bMC.js";import{y as J}from"./target-CKjL3a7Z-CNfUoT2L-BFcD-nDp-BZzxImDO.js";import{t as ue}from"./medal-Co574HnZ-BrwNViFy-sMcS5xR1-yOyX0GYK.js";import{w as $}from"./QuestionGenerator-z-c728t7-CSzYVewV-BkEMOThz-BkEMOThz.js";import{L as Ke}from"./TextToSpeech-jPFv8Mzs-9YNY52v7-7DUXlPgf-H7L-9G35.js";import{e as pe}from"./arrow-left-B1UHrOU7-W_GQWmbU-B_okVX8Y-BMeIpEeU.js";import{c as E}from"./flame-ByI7R4Rc-BbLUZ-TU-EBlXwzii-CR1NsYYI.js";import{t as z}from"./zap-w4f_OL2g-BKWEZluV-BRBCNtj7-CAvlrAfT.js";function he({todaysChallenges:d,currentUser:m}){const n=[...d].sort((s,b)=>b.score!==s.score?b.score-s.score:s.time_taken-b.time_taken),l=n.slice(0,10),a=n.findIndex(s=>s.created_by===(m==null?void 0:m.email))+1,r=s=>s===1?e.jsx(k,{className:"w-6 h-6 text-yellow-500 fill-yellow-500"}):s===2?e.jsx(ue,{className:"w-6 h-6 text-gray-400 fill-gray-400"}):s===3?e.jsx(ue,{className:"w-6 h-6 text-amber-600 fill-amber-600"}):e.jsxs("span",{className:"w-6 h-6 flex items-center justify-center font-bold text-gray-500",children:["#",s]}),c=s=>s===1?"from-yellow-100 to-yellow-200 border-yellow-300":s===2?"from-gray-100 to-gray-200 border-gray-300":s===3?"from-amber-100 to-amber-200 border-amber-300":"from-white to-gray-50 border-gray-200";return e.jsxs(R,{className:"border-2 border-purple-200",children:[e.jsx(V,{className:"bg-gradient-to-r from-purple-100 to-pink-100",children:e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-6 h-6 text-purple-600"}),"Today's Leaderboard",a>0&&e.jsxs(N,{variant:"outline",className:"ml-auto bg-white",children:["You're #",a]})]})}),e.jsx(U,{className:"p-6",children:l.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(k,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Be the first to complete today's challenge!"})]}):e.jsx("div",{className:"space-y-2",children:l.map((s,b)=>{var j;const Q=b+1,w=s.created_by===(m==null?void 0:m.email),H=Math.round(s.correct_answers/s.total_questions*100);return e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border-2 transition-all ${w?"bg-gradient-to-r from-purple-100 to-pink-100 border-purple-300 shadow-md":`bg-gradient-to-r ${c(Q)} border`}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[r(Q),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:w?"You":((j=s.created_by)==null?void 0:j.split("@")[0])||"Player"}),w&&e.jsx(N,{className:"bg-purple-500 text-white",children:"You"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"w-4 h-4"}),s.score," pts"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-4 h-4"}),H,"%"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-4 h-4"}),s.time_taken,"s"]})]})]})]}),s.bonus_stars>0&&e.jsxs(N,{className:"bg-yellow-500 text-white",children:["+",s.bonus_stars," â­"]})]},b)})})})]})}const be=(d,m="standard_mixed")=>{const n=new Date(d).getTime(),l=(a,r,c=0)=>{const s=Math.sin(n+a+r+c)*1e4;return Math.floor((s-Math.floor(s))*(r-a+1))+a};return({standard_mixed:ge,speed_round:Ie,accuracy_focus:Pe,concept_mastery:Xe,word_problem_day:ze,brain_teaser:Ve,grade_level_challenge:Ze,streak_builder:Je}[m]||ge)(l,n)};function ge(d,m){const n=["addition","subtraction","multiplication","division"],l=[];for(let a=0;a<15;a++){const r=n[d(0,n.length-1,a)],c=a<5?"easy":a<10?"medium":"hard";l.push($(r,c))}return{questions:l,objective:"Complete 15 mixed math problems across different difficulties",bonusTarget:{accuracy:90,time:180},totalQuestions:15,challengeType:"standard_mixed",concepts:n,description:"Test your skills across all four operations with increasing difficulty!"}}function Ie(d,m){const n=["addition","multiplication"],l=[];for(let a=0;a<20;a++){const r=n[d(0,1,a)];l.push($(r,"easy"))}return{questions:l,objective:"Answer 20 quick-fire questions as fast as possible!",bonusTarget:{accuracy:85,time:120},totalQuestions:20,challengeType:"speed_round",concepts:n,description:"Race against the clock! Can you finish in under 2 minutes?",timeLimit:120}}function Pe(d,m){const n=["multiplication","division","fractions"],l=[];for(let a=0;a<12;a++){const r=n[d(0,n.length-1,a)],c=a<4?"medium":a<8?"hard":"expert";l.push($(r,c))}return{questions:l,objective:"Achieve perfect or near-perfect accuracy on challenging problems",bonusTarget:{accuracy:95,time:300},totalQuestions:12,challengeType:"accuracy_focus",concepts:n,description:"Take your time and aim for perfection! Accuracy is key today."}}function Xe(d,m){const n=["fractions","decimals","percentages","word_problems","geometry"],l=n[d(0,n.length-1,0)],a=[];for(let r=0;r<15;r++){const c=r<5?"easy":r<10?"medium":"hard";a.push($(l,c))}return{questions:a,objective:`Master ${l} today!`,bonusTarget:{accuracy:88,time:240},totalQuestions:15,challengeType:"concept_mastery",concepts:[l],description:`Deep dive into ${l}! Build your expertise with focused practice.`,focusConcept:l}}function ze(d,m){const n=[];for(let l=0;l<10;l++){const a=l<3?"easy":l<7?"medium":"hard";n.push($("word_problems",a))}return{questions:n,objective:"Solve real-world math problems",bonusTarget:{accuracy:85,time:300},totalQuestions:10,challengeType:"word_problem_day",concepts:["word_problems"],description:"Apply math to real life! Read carefully and solve each scenario."}}function Ve(d,m){const n=[],l=["fractions","decimals","percentages","geometry","mixed"];for(let a=0;a<12;a++){const r=l[d(0,l.length-1,a)];n.push($(r,"hard"))}return{questions:n,objective:"Crack today's brain teasers!",bonusTarget:{accuracy:80,time:360},totalQuestions:12,challengeType:"brain_teaser",concepts:l,description:"Think outside the box! These tricky problems will challenge your mind."}}function Ze(d,m){const n=["1","2","3","4","5","6","7","8"],l=n[d(0,n.length-1,0)],a={1:["addition","subtraction"],2:["addition","subtraction","time","money"],3:["multiplication","division","fractions"],4:["multiplication","division","fractions","decimals"],5:["decimals","fractions","percentages"],6:["percentages","fractions","decimals","geometry"],7:["percentages","geometry","mixed"],8:["mixed","geometry","percentages"]}[l]||["addition","subtraction"],r=[];for(let c=0;c<15;c++){const s=a[d(0,a.length-1,c)],b=c<5?"easy":c<10?"medium":"hard";r.push($(s,b))}return{questions:r,objective:`Complete Grade ${l} Challenge`,bonusTarget:{accuracy:87,time:240},totalQuestions:15,challengeType:"grade_level_challenge",concepts:a,description:`Master Grade ${l} math skills! Perfect for students at this level.`,gradeLevel:l}}function Je(d,m){const n=["addition","subtraction","multiplication"],l=[];for(let a=0;a<18;a++){const r=n[d(0,n.length-1,a)],c=a<6||a<12?"easy":"medium";l.push($(r,c))}return{questions:l,objective:"Build your daily streak! Complete for bonus rewards.",bonusTarget:{accuracy:85,time:200},totalQuestions:18,challengeType:"streak_builder",concepts:n,description:"Keep your streak alive! Designed to be completable for all skill levels.",streakFocus:!0}}const We=(d,m,n,l)=>{const{bonusTarget:a,challengeType:r}=d;let c=0,s=0,b=!1,j=!1;return m>=95?(c=3,b=!0):m>=85?c=2:m>=70&&(c=1),a&&n<=a.time&&(c+=1,s+=20,j=!0),l&&l>=3&&(c+=1,s+=10*Math.min(l,10)),r==="speed_round"&&j&&(s+=30),r==="accuracy_focus"&&b&&(s+=40),r==="brain_teaser"&&m>=80&&(c+=1,s+=25),{bonusStars:Math.min(c,5),bonusCoins:s,perfectScoreBonus:b,speedBonus:j}};function xs(){var d,m,n;const l=Ae(),a=Me(),[r,c]=y.useState(0),[s,b]=y.useState(null),[j,Q]=y.useState([]),[w,H]=y.useState(0),[O,ye]=y.useState(!1),[G,fe]=y.useState(Date.now()),[je,W]=y.useState(!1),[A,Ne]=y.useState(0),[K,we]=y.useState(!1),[ve,ee]=y.useState(!1),[g,se]=y.useState(null),D=ce(X(new Date),"yyyy-MM-dd"),C=(()=>{const t=new Date().getDay();return["streak_builder","standard_mixed","speed_round","concept_mastery","accuracy_focus","word_problem_day","brain_teaser"][t]})(),{user:x}=Le(),{data:v=[]}=de({queryKey:["dailyChallenges",D],queryFn:async()=>[],initialData:[]}),{data:te=[]}=de({queryKey:["userDailyChallenges"],queryFn:async()=>{const t=getFirestore(firebaseApp);if(!(x!=null&&x.email))return[];const o=query(collection(t,"dailyChallenges"),where("created_by","==",x.email));return(await getDocs(o)).docs.map(u=>u.data())},initialData:[],enabled:!!x}),_e=v.some(t=>t.created_by===(x==null?void 0:x.email)),S=(()=>{if(te.length===0)return 0;const t=[...te].sort((i,f)=>new Date(f.challenge_date)-new Date(i.challenge_date));let o=0,u=X(new Date);for(const i of t){const f=X(new Date(i.challenge_date));if(Math.floor((u-f)/(1e3*60*60*24))===o)o++;else break}return o})();y.useEffect(()=>{if(!O&&K){const t=setInterval(()=>{Ne(Math.floor((Date.now()-G)/1e3))},1e3);return()=>clearInterval(t)}},[G,O,K]);const ke=Ye({mutationFn:async t=>{if(!(x!=null&&x.email))throw new Error("User not authenticated");const o=await Re(x.email,t),u=t.bonus_coins||0,i=((x==null?void 0:x.coins)||0)+u;return await Ue(x.email,{coins:i,last_login_date:D}),o},onSuccess:()=>{a.invalidateQueries({queryKey:["dailyChallenges"]}),a.invalidateQueries({queryKey:["userDailyChallenges"]}),a.invalidateQueries({queryKey:["currentUser"]})}}),$e=()=>{const t=be(D,C);b(t),fe(Date.now()),we(!0)},Ce=t=>{const o=t===s.questions[r].answer;if(Q([...j,{question:r,correct:o}]),o&&(H(w+10),W(!0),setTimeout(()=>W(!1),1e3)),!o){const u=s.questions[r];se({questionObj:u,userAnswer:t,correctAnswer:u.answer,explanation:u.explanation||"Review the steps to solve this problem."}),ee(!0);return}r<s.totalQuestions-1?setTimeout(()=>{c(r+1)},500):le(o)},ae=(t,o)=>{const u=((t==null?void 0:t.question)||"").trim(),i=[];let f=null,p=null,h=null;const L=(_=>{const I=[{key:"+",name:"addition"},{key:"-",name:"subtraction"},{key:"Ã—",name:"multiplication"},{key:"x",name:"multiplication"},{key:"â‹…",name:"multiplication"},{key:"Â·",name:"multiplication"},{key:"Ã·",name:"division"},{key:"/",name:"division"}];for(const P of I)if(_.includes(` ${P.key} `)){const[Be,Qe]=_.split(` ${P.key} `),oe=parseFloat(Be.replace(/[^0-9.\-]/g,"")),ie=parseFloat(Qe.replace(/[^0-9.\-]/g,""));if(!Number.isNaN(oe)&&!Number.isNaN(ie))return{op:P.name,a:oe,b:ie}}return null})(u);if(L&&(f=L.op,p=L.a,h=L.b),f==="addition"){i.push(`Set up the problem: ${p} + ${h}`);const _=p%10+h%10;p>=10&&h>=10?(i.push(`Add the ones place: ${p%10} + ${h%10} = ${_}${_>=10?" (carry 1)":""}`),i.push(`Add the tens (and carry if needed): ${Math.floor(p/10)} + ${Math.floor(h/10)}${_>=10?" + 1":""}`)):i.push(`Add the numbers: ${p} + ${h}`),i.push(`Final answer: ${o}`)}else f==="subtraction"?(i.push(`Set up the problem: ${p} - ${h}`),p%10<h%10&&p>=10&&i.push("Borrow from the tens place so you can subtract the ones place."),i.push(`Subtract to find the difference: ${p} - ${h} = ${o}`)):f==="multiplication"?(i.push(`Think of ${p} groups of ${h}.`),(p>=10||h>=10)&&i.push("Break it apart to make it easier, then multiply and add."),i.push(`Multiply: ${p} Ã— ${h} = ${o}`)):f==="division"?(i.push(`How many ${h}'s fit into ${p}?`),i.push(`Count groups or use facts until you reach ${p}.`),i.push(`So, ${p} Ã· ${h} = ${o}`)):u.includes(".")||/\d+\.\d+/.test(u)?(i.push("Line up the decimal points."),i.push("Add or subtract carefully column by column."),i.push(`Final answer: ${o}`)):t!=null&&t.explanation?i.push(t.explanation):i.push("Solve step by step to find the answer.");const De=["Let's solve it step by step.",...i.map((_,I)=>`Step ${I+1}. ${Ee(_)}`)].join(" ");return{steps:i,tts:De}},le=t=>{const o=Math.floor((Date.now()-G)/1e3),u=j.filter(h=>h.correct).length+(t?1:0),i=w+(t?10:0),f=u/s.totalQuestions*100,p=We(s,f,o,S);ke.mutate({challenge_date:D,challenge_type:C,score:i,correct_answers:u,total_questions:s.totalQuestions,time_taken:o,bonus_stars:p.bonusStars,bonus_coins:p.bonusCoins,streak_bonus:S>=3,perfect_score_bonus:p.perfectScoreBonus,speed_bonus:p.speedBonus,challenge_objective:s.objective,concepts_covered:s.concepts}),setTimeout(()=>ye(!0),500)},Se=()=>{window.speechSynthesis&&window.speechSynthesis.cancel(),ee(!1),se(null),r<s.totalQuestions-1?c(r+1):le(!1)},qe=t=>({standard_mixed:me,speed_round:z,accuracy_focus:J,concept_mastery:Fe,word_problem_day:Y,brain_teaser:k,grade_level_challenge:Y,streak_builder:E})[t]||me,Te=t=>({standard_mixed:"from-purple-500 to-pink-500",speed_round:"from-yellow-500 to-orange-500",accuracy_focus:"from-green-500 to-emerald-500",concept_mastery:"from-blue-500 to-cyan-500",word_problem_day:"from-indigo-500 to-purple-500",brain_teaser:"from-red-500 to-pink-500",grade_level_challenge:"from-teal-500 to-cyan-500",streak_builder:"from-orange-500 to-red-500"})[t]||"from-purple-500 to-pink-500",re=qe(C),M=Te(C);if(!K)return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs(q,{variant:"outline",onClick:()=>l(F("Home")),className:"mb-6 gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),"Back"]}),_e?e.jsxs(R,{className:"border-4 border-green-300 shadow-2xl",children:[e.jsxs(V,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white text-center py-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âœ…"}),e.jsx(Z,{className:"text-3xl",children:"Challenge Complete!"}),e.jsx("p",{className:"text-lg mt-2 opacity-90",children:"You've already completed today's challenge"})]}),e.jsxs(U,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Your Results Today"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[e.jsx(k,{className:"w-8 h-8 mx-auto mb-2 text-purple-500"}),e.jsx("div",{className:"text-2xl font-bold",children:(d=v.find(t=>t.created_by===(x==null?void 0:x.email)))==null?void 0:d.score}),e.jsx("div",{className:"text-sm text-gray-600",children:"Score"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl",children:[e.jsx(T,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),e.jsx("div",{className:"text-2xl font-bold",children:(m=v.find(t=>t.created_by===(x==null?void 0:x.email)))==null?void 0:m.bonus_stars}),e.jsx("div",{className:"text-sm text-gray-600",children:"Bonus Stars"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx(B,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsxs("div",{className:"text-2xl font-bold",children:[(n=v.find(t=>t.created_by===(x==null?void 0:x.email)))==null?void 0:n.time_taken,"s"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Time"})]})]})]}),e.jsx(he,{todaysChallenges:v,currentUser:x}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Come back tomorrow for a new challenge!"}),e.jsx(q,{onClick:()=>l(F("Home")),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:"Back to Home"})]})]})]}):e.jsxs(R,{className:"border-4 border-purple-300 shadow-2xl",children:[e.jsxs(V,{className:`bg-gradient-to-r ${M} text-white text-center py-12`,children:[e.jsx("div",{className:"text-7xl mb-4",children:e.jsx(re,{className:"w-20 h-20 mx-auto"})}),e.jsx(Z,{className:"text-4xl mb-2",children:C.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}),e.jsx("p",{className:"text-xl opacity-90",children:ce(new Date,"MMMM d, yyyy")})]}),e.jsx(U,{className:"p-8 space-y-6",children:(()=>{const t=be(D,C);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-xl border-2 border-blue-200",children:[e.jsxs("h3",{className:"text-xl font-bold mb-2 flex items-center gap-2",children:[e.jsx(J,{className:"w-6 h-6 text-blue-600"}),"Today's Objective"]}),e.jsx("p",{className:"text-lg text-gray-700",children:t.objective}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:t.description})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 p-6 rounded-xl border-2 border-yellow-200",children:[e.jsx(T,{className:"w-12 h-12 text-yellow-500 mb-3"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Bonus Rewards"}),e.jsx("p",{className:"text-gray-600",children:"Up to 5 bonus stars & extra coins!"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-xl border-2 border-orange-200",children:[e.jsx(E,{className:"w-12 h-12 text-orange-500 mb-3"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Current Streak"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[S," ",S===1?"Day":"Days"]}),S>=3&&e.jsx(N,{className:"mt-2 bg-orange-500",children:"+1 Bonus Star!"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-xl border-2 border-purple-200",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5 text-purple-600"}),"Challenge Details"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Questions:"})," ",t.totalQuestions]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Concepts:"})," ",t.concepts.join(", ")]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Players Today:"})," ",v.length]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl border-2 border-green-200",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-green-600"}),"How to Earn Bonus Rewards"]}),e.jsxs("ul",{className:"space-y-2 text-gray-700",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-yellow-500"}),"70%+ accuracy: 1 bonus star"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-yellow-500"}),"85%+ accuracy: 2 bonus stars"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-yellow-500"}),"95%+ accuracy: 3 bonus stars"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-orange-500"}),"Complete quickly: +1 star & coins"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-orange-500"}),"3+ day streak: +1 extra star & coins"]})]})]}),e.jsx(q,{onClick:$e,className:`w-full h-16 text-xl bg-gradient-to-r ${M} hover:opacity-90 shadow-lg`,children:"Start Today's Challenge"})]})})()})]})]});if(O){const t=j.filter(u=>u.correct).length;t/s.totalQuestions*100;const o=v.find(u=>u.created_by===(x==null?void 0:x.email));return e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs(R,{className:"border-4 border-yellow-300 shadow-2xl",children:[e.jsxs("div",{className:`bg-gradient-to-r ${M} py-12 text-white text-center`,children:[e.jsx("div",{className:"text-8xl mb-4",children:"ðŸ†"}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-2",children:"Challenge Complete!"}),e.jsx("p",{className:"text-xl",children:"Great job on today's challenge!"})]}),e.jsxs(U,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[e.jsx(k,{className:"w-8 h-8 mx-auto mb-2 text-purple-500"}),e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:w}),e.jsx("div",{className:"text-sm text-gray-600",children:"Score"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[t,"/",s.totalQuestions]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Correct"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[e.jsx(B,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[A,"s"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Time"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[e.jsx(T,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500 fill-yellow-500"}),e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:(o==null?void 0:o.bonus_stars)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Bonus Stars"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[(o==null?void 0:o.perfect_score_bonus)&&e.jsxs(N,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-2 text-base",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Perfect Score Bonus!"]}),(o==null?void 0:o.speed_bonus)&&e.jsxs(N,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-4 py-2 text-base",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Speed Bonus!"]}),(o==null?void 0:o.streak_bonus)&&e.jsxs(N,{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 text-base",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Streak Bonus! (",S," days)"]})]}),(o==null?void 0:o.bonus_coins)>0&&e.jsx("div",{className:"bg-gradient-to-r from-cyan-100 to-blue-100 p-4 rounded-xl border-2 border-cyan-300 text-center",children:e.jsxs("p",{className:"font-bold text-lg",children:["Earned ",o.bonus_coins," Bonus Coins! ðŸª™"]})}),e.jsx(he,{todaysChallenges:v,currentUser:x}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(q,{variant:"outline",className:"flex-1 h-14 text-lg gap-2",onClick:()=>l(F("Home")),children:[e.jsx(pe,{className:"w-5 h-5"}),"Back Home"]}),e.jsxs(q,{className:`flex-1 h-14 text-lg bg-gradient-to-r ${M} hover:opacity-90 gap-2`,onClick:()=>l(F("Progress")),children:[e.jsx(k,{className:"w-5 h-5"}),"View Progress"]})]})]})]})})}const ne=(r+1)/s.totalQuestions*100;return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[je&&e.jsx(Oe,{}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(N,{variant:"outline",className:"text-lg px-4 py-2",children:[e.jsx(re,{className:"w-5 h-5 mr-2"}),C.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")]}),e.jsxs("div",{className:"flex items-center gap-4",children:[(s==null?void 0:s.timeLimit)&&e.jsxs(N,{variant:A>s.timeLimit?"destructive":"outline",className:"text-lg px-4 py-2",children:[e.jsx(B,{className:"w-5 h-5 mr-2"}),A,"s / ",s.timeLimit,"s"]}),!(s!=null&&s.timeLimit)&&e.jsxs("div",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-md",children:[e.jsx(B,{className:"w-5 h-5 text-blue-500"}),e.jsxs("span",{className:"font-bold text-gray-800",children:[A,"s"]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-md",children:[e.jsx(k,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:w})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["Question ",r+1," of ",s.totalQuestions]}),e.jsxs("span",{children:[Math.round(ne),"%"]})]}),e.jsx(He,{value:ne,className:"h-3"})]})]}),ve&&g?e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsxs("div",{className:"bg-white border-4 border-red-300 rounded-2xl shadow-2xl p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500 text-white flex items-center justify-center text-2xl",children:"âœ–"}),e.jsx("h2",{className:"text-2xl font-bold text-red-600",children:"Let's Learn From This One"})]}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:"Question:"}),e.jsx("p",{className:"text-3xl font-bold mb-4",children:g.questionObj.question}),(()=>{let t=ae(g.questionObj,g.correctAnswer).tts;return g.explanation&&(t+=`
`+g.explanation),e.jsx("div",{className:"mb-4",children:e.jsx(Ke,{text:t,style:"button",label:"ðŸ”Š Read the steps & explanation"})})})(),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-6 text-center",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-red-50 border-2 border-red-200",children:[e.jsx("p",{className:"text-sm font-medium text-red-600 mb-1",children:"Your Answer"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:g.userAnswer})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-green-50 border-2 border-green-200",children:[e.jsx("p",{className:"text-sm font-medium text-green-600 mb-1",children:"Correct Answer"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:g.correctAnswer})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-purple-50 border-2 border-purple-200",children:[e.jsx("p",{className:"text-sm font-medium text-purple-600 mb-1",children:"Question #"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:r+1})]})]}),(()=>{const t=ae(g.questionObj,g.correctAnswer);return e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border-2 border-blue-200 p-6 rounded-xl mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2",children:"âœ¨ Let's solve it step by step"}),e.jsx("ol",{className:"list-decimal pl-5 space-y-1 text-gray-800",children:t.steps.map((o,u)=>e.jsx("li",{children:o},u))})]})})(),g.explanation&&e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-200 p-6 rounded-xl mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-2 flex items-center gap-2",children:"ðŸ§  Step-by-Step Explanation"}),e.jsx("p",{className:"whitespace-pre-line leading-relaxed text-gray-700",children:g.explanation})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(q,{onClick:Se,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:opacity-90 px-8 h-14 text-lg",children:"Continue"})})]})}):s&&s.questions.length>0&&e.jsx(Ge,{question:s.questions[r],onAnswer:Ce,questionNumber:r+1})]})}export{xs as default};
