import{j as e,C as R,M as z,N as Z,K as P,B as N,d as H,T as _,e as M,Q as qe,z as Ae,r as y,f as de,s as U,a1 as Fe,u as me,h as D,g as L,x as Q,b as xe,aq as Le,a3 as Ee,W as Re,E as Pe,a as ue}from"./index-52tutDqx.js";import{u as He}from"./useMutation-Dw-sPjxD.js";import{P as Ge}from"./progress-DswiN-jt.js";import{C as Ie,Q as Ke}from"./CelebrationAnimation-Dc0BowXO.js";import{T as O}from"./target-1p2ICMDN.js";import{M as pe}from"./medal-iK-ypg-g.js";import{g as C}from"./QuestionGenerator-z-c728t7.js";import{T as Ye}from"./TextToSpeech-AHz3T4an.js";import{A as he}from"./arrow-left-8gFWt4dJ.js";import{F as E}from"./flame-Z4NDYWf0.js";import{Z as W}from"./zap-BUGd4PS-.js";function ge({todaysChallenges:m,currentUser:x}){const a=[...m].sort((l,h)=>h.score!==l.score?h.score-l.score:l.time_taken-h.time_taken),n=a.slice(0,10),s=a.findIndex(l=>l.created_by===(x==null?void 0:x.email))+1,d=l=>l===1?e.jsx(_,{className:"w-6 h-6 text-yellow-500 fill-yellow-500"}):l===2?e.jsx(pe,{className:"w-6 h-6 text-gray-400 fill-gray-400"}):l===3?e.jsx(pe,{className:"w-6 h-6 text-amber-600 fill-amber-600"}):e.jsxs("span",{className:"w-6 h-6 flex items-center justify-center font-bold text-gray-500",children:["#",l]}),c=l=>l===1?"from-yellow-100 to-yellow-200 border-yellow-300":l===2?"from-gray-100 to-gray-200 border-gray-300":l===3?"from-amber-100 to-amber-200 border-amber-300":"from-white to-gray-50 border-gray-200";return e.jsxs(R,{className:"border-2 border-purple-200",children:[e.jsx(z,{className:"bg-gradient-to-r from-purple-100 to-pink-100",children:e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-6 h-6 text-purple-600"}),"Today's Leaderboard",s>0&&e.jsxs(N,{variant:"outline",className:"ml-auto bg-white",children:["You're #",s]})]})}),e.jsx(H,{className:"p-6",children:n.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(_,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Be the first to complete today's challenge!"})]}):e.jsx("div",{className:"space-y-2",children:n.map((l,h)=>{var S;const b=h+1,k=l.created_by===(x==null?void 0:x.email),G=Math.round(l.correct_answers/l.total_questions*100);return e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border-2 transition-all ${k?"bg-gradient-to-r from-purple-100 to-pink-100 border-purple-300 shadow-md":`bg-gradient-to-r ${c(b)} border`}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[d(b),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:k?"You":((S=l.created_by)==null?void 0:S.split("@")[0])||"Player"}),k&&e.jsx(N,{className:"bg-purple-500 text-white",children:"You"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-4 h-4"}),l.score," pts"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-4 h-4"}),G,"%"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-4 h-4"}),l.time_taken,"s"]})]})]})]}),l.bonus_stars>0&&e.jsxs(N,{className:"bg-yellow-500 text-white",children:["+",l.bonus_stars," â­"]})]},h)})})})]})}const be=(m,x="standard_mixed")=>{const a=new Date(m).getTime(),n=(c,l,h=0)=>{const b=Math.sin(a+c+l+h)*1e4;return Math.floor((b-Math.floor(b))*(l-c+1))+c};return({standard_mixed:fe,speed_round:Ue,accuracy_focus:We,concept_mastery:ze,word_problem_day:Ze,brain_teaser:Oe,grade_level_challenge:Ve,streak_builder:Je}[x]||fe)(n,a)};function fe(m,x){const a=["addition","subtraction","multiplication","division"],n=[];for(let s=0;s<15;s++){const d=a[m(0,a.length-1,s)],c=s<5?"easy":s<10?"medium":"hard";n.push(C(d,c))}return{questions:n,objective:"Complete 15 mixed math problems across different difficulties",bonusTarget:{accuracy:90,time:180},totalQuestions:15,challengeType:"standard_mixed",concepts:a,description:"Test your skills across all four operations with increasing difficulty!"}}function Ue(m,x){const a=["addition","multiplication"],n=[];for(let s=0;s<20;s++){const d=a[m(0,1,s)];n.push(C(d,"easy"))}return{questions:n,objective:"Answer 20 quick-fire questions as fast as possible!",bonusTarget:{accuracy:85,time:120},totalQuestions:20,challengeType:"speed_round",concepts:a,description:"Race against the clock! Can you finish in under 2 minutes?",timeLimit:120}}function We(m,x){const a=["multiplication","division","fractions"],n=[];for(let s=0;s<12;s++){const d=a[m(0,a.length-1,s)],c=s<4?"medium":s<8?"hard":"expert";n.push(C(d,c))}return{questions:n,objective:"Achieve perfect or near-perfect accuracy on challenging problems",bonusTarget:{accuracy:95,time:300},totalQuestions:12,challengeType:"accuracy_focus",concepts:a,description:"Take your time and aim for perfection! Accuracy is key today."}}function ze(m,x){const a=["fractions","decimals","percentages","word_problems","geometry"],n=a[m(0,a.length-1,0)],s=[];for(let d=0;d<15;d++){const c=d<5?"easy":d<10?"medium":"hard";s.push(C(n,c))}return{questions:s,objective:`Master ${n} today!`,bonusTarget:{accuracy:88,time:240},totalQuestions:15,challengeType:"concept_mastery",concepts:[n],description:`Deep dive into ${n}! Build your expertise with focused practice.`,focusConcept:n}}function Ze(m,x){const a=[];for(let n=0;n<10;n++){const s=n<3?"easy":n<7?"medium":"hard";a.push(C("word_problems",s))}return{questions:a,objective:"Solve real-world math problems",bonusTarget:{accuracy:85,time:300},totalQuestions:10,challengeType:"word_problem_day",concepts:["word_problems"],description:"Apply math to real life! Read carefully and solve each scenario."}}function Oe(m,x){const a=[],n=["fractions","decimals","percentages","geometry","mixed"];for(let s=0;s<12;s++){const d=n[m(0,n.length-1,s)];a.push(C(d,"hard"))}return{questions:a,objective:"Crack today's brain teasers!",bonusTarget:{accuracy:80,time:360},totalQuestions:12,challengeType:"brain_teaser",concepts:n,description:"Think outside the box! These tricky problems will challenge your mind."}}function Ve(m,x){const a=["1","2","3","4","5","6","7","8"],n=a[m(0,a.length-1,0)],d={1:["addition","subtraction"],2:["addition","subtraction","time","money"],3:["multiplication","division","fractions"],4:["multiplication","division","fractions","decimals"],5:["decimals","fractions","percentages"],6:["percentages","fractions","decimals","geometry"],7:["percentages","geometry","mixed"],8:["mixed","geometry","percentages"]}[n]||["addition","subtraction"],c=[];for(let l=0;l<15;l++){const h=d[m(0,d.length-1,l)],b=l<5?"easy":l<10?"medium":"hard";c.push(C(h,b))}return{questions:c,objective:`Complete Grade ${n} Challenge`,bonusTarget:{accuracy:87,time:240},totalQuestions:15,challengeType:"grade_level_challenge",concepts:d,description:`Master Grade ${n} math skills! Perfect for students at this level.`,gradeLevel:n}}function Je(m,x){const a=["addition","subtraction","multiplication"],n=[];for(let s=0;s<18;s++){const d=a[m(0,a.length-1,s)],c=s<6||s<12?"easy":"medium";n.push(C(d,c))}return{questions:n,objective:"Build your daily streak! Complete for bonus rewards.",bonusTarget:{accuracy:85,time:200},totalQuestions:18,challengeType:"streak_builder",concepts:a,description:"Keep your streak alive! Designed to be completable for all skill levels.",streakFocus:!0}}const Xe=(m,x,a,n)=>{const{bonusTarget:s,challengeType:d}=m;let c=0,l=0,h=!1,b=!1;return x>=95?(c=3,h=!0):x>=85?c=2:x>=70&&(c=1),s&&a<=s.time&&(c+=1,l+=20,b=!0),n&&n>=3&&(c+=1,l+=10*Math.min(n,10)),d==="speed_round"&&b&&(l+=30),d==="accuracy_focus"&&h&&(l+=40),d==="brain_teaser"&&x>=80&&(c+=1,l+=25),{bonusStars:Math.min(c,5),bonusCoins:l,perfectScoreBonus:h,speedBonus:b}};function ps(){var ne,le,oe;const m=qe(),x=Ae(),[a,n]=y.useState(0),[s,d]=y.useState(null),[c,l]=y.useState([]),[h,b]=y.useState(0),[k,G]=y.useState(!1),[S,ye]=y.useState(Date.now()),[je,V]=y.useState(!1),[q,Ne]=y.useState(0),[I,we]=y.useState(!1),[ve,J]=y.useState(!1),[f,X]=y.useState(null),B=de(U(new Date),"yyyy-MM-dd"),T=(()=>{const t=new Date().getDay();return["streak_builder","standard_mixed","speed_round","concept_mastery","accuracy_focus","word_problem_day","brain_teaser"][t]})(),{user:i}=Fe(),{data:w=[]}=me({queryKey:["dailyChallenges",B],queryFn:async()=>[],initialData:[]}),{data:ee=[]}=me({queryKey:["userDailyChallenges"],queryFn:async()=>{const t=getFirestore(firebaseApp);if(!(i!=null&&i.email))return[];const r=query(collection(t,"dailyChallenges"),where("created_by","==",i.email));return(await getDocs(r)).docs.map(o=>o.data())},initialData:[],enabled:!!i}),_e=w.some(t=>t.created_by===(i==null?void 0:i.email)),$=(()=>{if(ee.length===0)return 0;const t=[...ee].sort((o,j)=>new Date(j.challenge_date)-new Date(o.challenge_date));let r=0,p=U(new Date);for(const o of t){const j=U(new Date(o.challenge_date));if(Math.floor((p-j)/(1e3*60*60*24))===r)r++;else break}return r})();y.useEffect(()=>{if(!k&&I){const t=setInterval(()=>{Ne(Math.floor((Date.now()-S)/1e3))},1e3);return()=>clearInterval(t)}},[S,k,I]);const Ce=He({mutationFn:async t=>{if(!(i!=null&&i.email))throw new Error("User not authenticated");const r=await Le(i.email,t),p=t.bonus_coins||0,o=((i==null?void 0:i.coins)||0)+p;return await Ee(i.email,{coins:o,last_login_date:B}),r},onSuccess:()=>{x.invalidateQueries({queryKey:["dailyChallenges"]}),x.invalidateQueries({queryKey:["userDailyChallenges"]}),x.invalidateQueries({queryKey:["currentUser"]})}}),ke=()=>{const t=be(B,T);d(t),ye(Date.now()),we(!0)},Te=t=>{const r=t===s.questions[a].answer;if(l([...c,{question:a,correct:r}]),r&&(b(h+10),V(!0),setTimeout(()=>V(!1),1e3)),!r){const p=s.questions[a];X({questionObj:p,userAnswer:t,correctAnswer:p.answer,explanation:p.explanation||"Review the steps to solve this problem."}),J(!0);return}a<s.totalQuestions-1?setTimeout(()=>{n(a+1)},500):te(r)},se=(t,r)=>{const p=((t==null?void 0:t.question)||"").trim(),o=[];let j=null,u=null,g=null;const F=(v=>{const K=[{key:"+",name:"addition"},{key:"-",name:"subtraction"},{key:"Ã—",name:"multiplication"},{key:"x",name:"multiplication"},{key:"â‹…",name:"multiplication"},{key:"Â·",name:"multiplication"},{key:"Ã·",name:"division"},{key:"/",name:"division"}];for(const Y of K)if(v.includes(` ${Y.key} `)){const[Be,Me]=v.split(` ${Y.key} `),ie=parseFloat(Be.replace(/[^0-9.\-]/g,"")),ce=parseFloat(Me.replace(/[^0-9.\-]/g,""));if(!Number.isNaN(ie)&&!Number.isNaN(ce))return{op:Y.name,a:ie,b:ce}}return null})(p);if(F&&(j=F.op,u=F.a,g=F.b),j==="addition"){o.push(`Set up the problem: ${u} + ${g}`);const v=u%10+g%10;u>=10&&g>=10?(o.push(`Add the ones place: ${u%10} + ${g%10} = ${v}${v>=10?" (carry 1)":""}`),o.push(`Add the tens (and carry if needed): ${Math.floor(u/10)} + ${Math.floor(g/10)}${v>=10?" + 1":""}`)):o.push(`Add the numbers: ${u} + ${g}`),o.push(`Final answer: ${r}`)}else j==="subtraction"?(o.push(`Set up the problem: ${u} - ${g}`),u%10<g%10&&u>=10&&o.push("Borrow from the tens place so you can subtract the ones place."),o.push(`Subtract to find the difference: ${u} - ${g} = ${r}`)):j==="multiplication"?(o.push(`Think of ${u} groups of ${g}.`),(u>=10||g>=10)&&o.push("Break it apart to make it easier, then multiply and add."),o.push(`Multiply: ${u} Ã— ${g} = ${r}`)):j==="division"?(o.push(`How many ${g}'s fit into ${u}?`),o.push(`Count groups or use facts until you reach ${u}.`),o.push(`So, ${u} Ã· ${g} = ${r}`)):p.includes(".")||/\d+\.\d+/.test(p)?(o.push("Line up the decimal points."),o.push("Add or subtract carefully column by column."),o.push(`Final answer: ${r}`)):t!=null&&t.explanation?o.push(t.explanation):o.push("Solve step by step to find the answer.");const Qe=["Let's solve it step by step.",...o.map((v,K)=>`Step ${K+1}. ${Re(v)}`)].join(" ");return{steps:o,tts:Qe}},te=t=>{const r=Math.floor((Date.now()-S)/1e3),p=c.filter(g=>g.correct).length+(t?1:0),o=h+(t?10:0),j=p/s.totalQuestions*100,u=Xe(s,j,r,$);Ce.mutate({challenge_date:B,challenge_type:T,score:o,correct_answers:p,total_questions:s.totalQuestions,time_taken:r,bonus_stars:u.bonusStars,bonus_coins:u.bonusCoins,streak_bonus:$>=3,perfect_score_bonus:u.perfectScoreBonus,speed_bonus:u.speedBonus,challenge_objective:s.objective,concepts_covered:s.concepts}),setTimeout(()=>G(!0),500)},Se=()=>{window.speechSynthesis&&window.speechSynthesis.cancel(),J(!1),X(null),a<s.totalQuestions-1?n(a+1):te(!1)},$e=t=>({standard_mixed:ue,speed_round:W,accuracy_focus:O,concept_mastery:Pe,word_problem_day:P,brain_teaser:_,grade_level_challenge:P,streak_builder:E})[t]||ue,De=t=>({standard_mixed:"from-purple-500 to-pink-500",speed_round:"from-yellow-500 to-orange-500",accuracy_focus:"from-green-500 to-emerald-500",concept_mastery:"from-blue-500 to-cyan-500",word_problem_day:"from-indigo-500 to-purple-500",brain_teaser:"from-red-500 to-pink-500",grade_level_challenge:"from-teal-500 to-cyan-500",streak_builder:"from-orange-500 to-red-500"})[t]||"from-purple-500 to-pink-500",ae=$e(T),A=De(T);if(!I)return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs(D,{variant:"outline",onClick:()=>m(L("Home")),className:"mb-6 gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Back"]}),_e?e.jsxs(R,{className:"border-4 border-green-300 shadow-2xl",children:[e.jsxs(z,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white text-center py-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âœ…"}),e.jsx(Z,{className:"text-3xl",children:"Challenge Complete!"}),e.jsx("p",{className:"text-lg mt-2 opacity-90",children:"You've already completed today's challenge"})]}),e.jsxs(H,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Your Results Today"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[e.jsx(_,{className:"w-8 h-8 mx-auto mb-2 text-purple-500"}),e.jsx("div",{className:"text-2xl font-bold",children:(ne=w.find(t=>t.created_by===(i==null?void 0:i.email)))==null?void 0:ne.score}),e.jsx("div",{className:"text-sm text-gray-600",children:"Score"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl",children:[e.jsx(Q,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),e.jsx("div",{className:"text-2xl font-bold",children:(le=w.find(t=>t.created_by===(i==null?void 0:i.email)))==null?void 0:le.bonus_stars}),e.jsx("div",{className:"text-sm text-gray-600",children:"Bonus Stars"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx(M,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsxs("div",{className:"text-2xl font-bold",children:[(oe=w.find(t=>t.created_by===(i==null?void 0:i.email)))==null?void 0:oe.time_taken,"s"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Time"})]})]})]}),e.jsx(ge,{todaysChallenges:w,currentUser:i}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Come back tomorrow for a new challenge!"}),e.jsx(D,{onClick:()=>m(L("Home")),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:"Back to Home"})]})]})]}):e.jsxs(R,{className:"border-4 border-purple-300 shadow-2xl",children:[e.jsxs(z,{className:`bg-gradient-to-r ${A} text-white text-center py-12`,children:[e.jsx("div",{className:"text-7xl mb-4",children:e.jsx(ae,{className:"w-20 h-20 mx-auto"})}),e.jsx(Z,{className:"text-4xl mb-2",children:T.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}),e.jsx("p",{className:"text-xl opacity-90",children:de(new Date,"MMMM d, yyyy")})]}),e.jsx(H,{className:"p-8 space-y-6",children:(()=>{const t=be(B,T);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-xl border-2 border-blue-200",children:[e.jsxs("h3",{className:"text-xl font-bold mb-2 flex items-center gap-2",children:[e.jsx(O,{className:"w-6 h-6 text-blue-600"}),"Today's Objective"]}),e.jsx("p",{className:"text-lg text-gray-700",children:t.objective}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:t.description})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 p-6 rounded-xl border-2 border-yellow-200",children:[e.jsx(Q,{className:"w-12 h-12 text-yellow-500 mb-3"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Bonus Rewards"}),e.jsx("p",{className:"text-gray-600",children:"Up to 5 bonus stars & extra coins!"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-xl border-2 border-orange-200",children:[e.jsx(E,{className:"w-12 h-12 text-orange-500 mb-3"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Current Streak"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[$," ",$===1?"Day":"Days"]}),$>=3&&e.jsx(N,{className:"mt-2 bg-orange-500",children:"+1 Bonus Star!"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-xl border-2 border-purple-200",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-purple-600"}),"Challenge Details"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Questions:"})," ",t.totalQuestions]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Concepts:"})," ",t.concepts.join(", ")]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Players Today:"})," ",w.length]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl border-2 border-green-200",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-green-600"}),"How to Earn Bonus Rewards"]}),e.jsxs("ul",{className:"space-y-2 text-gray-700",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 text-yellow-500"}),"70%+ accuracy: 1 bonus star"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 text-yellow-500"}),"85%+ accuracy: 2 bonus stars"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 text-yellow-500"}),"95%+ accuracy: 3 bonus stars"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4 text-orange-500"}),"Complete quickly: +1 star & coins"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-orange-500"}),"3+ day streak: +1 extra star & coins"]})]})]}),e.jsx(D,{onClick:ke,className:`w-full h-16 text-xl bg-gradient-to-r ${A} hover:opacity-90 shadow-lg`,children:"Start Today's Challenge"})]})})()})]})]});if(k){const t=c.filter(p=>p.correct).length;t/s.totalQuestions*100;const r=w.find(p=>p.created_by===(i==null?void 0:i.email));return e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs(R,{className:"border-4 border-yellow-300 shadow-2xl",children:[e.jsxs("div",{className:`bg-gradient-to-r ${A} py-12 text-white text-center`,children:[e.jsx("div",{className:"text-8xl mb-4",children:"ðŸ†"}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-2",children:"Challenge Complete!"}),e.jsx("p",{className:"text-xl",children:"Great job on today's challenge!"})]}),e.jsxs(H,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[e.jsx(_,{className:"w-8 h-8 mx-auto mb-2 text-purple-500"}),e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:h}),e.jsx("div",{className:"text-sm text-gray-600",children:"Score"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[t,"/",s.totalQuestions]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Correct"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[e.jsx(M,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[q,"s"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Time"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[e.jsx(Q,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500 fill-yellow-500"}),e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:(r==null?void 0:r.bonus_stars)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Bonus Stars"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[(r==null?void 0:r.perfect_score_bonus)&&e.jsxs(N,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-2 text-base",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Perfect Score Bonus!"]}),(r==null?void 0:r.speed_bonus)&&e.jsxs(N,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-4 py-2 text-base",children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Speed Bonus!"]}),(r==null?void 0:r.streak_bonus)&&e.jsxs(N,{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 text-base",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Streak Bonus! (",$," days)"]})]}),(r==null?void 0:r.bonus_coins)>0&&e.jsx("div",{className:"bg-gradient-to-r from-cyan-100 to-blue-100 p-4 rounded-xl border-2 border-cyan-300 text-center",children:e.jsxs("p",{className:"font-bold text-lg",children:["Earned ",r.bonus_coins," Bonus Coins! ðŸª™"]})}),e.jsx(ge,{todaysChallenges:w,currentUser:i}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(D,{variant:"outline",className:"flex-1 h-14 text-lg gap-2",onClick:()=>m(L("Home")),children:[e.jsx(he,{className:"w-5 h-5"}),"Back Home"]}),e.jsxs(D,{className:`flex-1 h-14 text-lg bg-gradient-to-r ${A} hover:opacity-90 gap-2`,onClick:()=>m(L("Progress")),children:[e.jsx(_,{className:"w-5 h-5"}),"View Progress"]})]})]})]})})}const re=(a+1)/s.totalQuestions*100;return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[je&&e.jsx(Ie,{}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(N,{variant:"outline",className:"text-lg px-4 py-2",children:[e.jsx(ae,{className:"w-5 h-5 mr-2"}),T.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")]}),e.jsxs("div",{className:"flex items-center gap-4",children:[(s==null?void 0:s.timeLimit)&&e.jsxs(N,{variant:q>s.timeLimit?"destructive":"outline",className:"text-lg px-4 py-2",children:[e.jsx(M,{className:"w-5 h-5 mr-2"}),q,"s / ",s.timeLimit,"s"]}),!(s!=null&&s.timeLimit)&&e.jsxs("div",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-md",children:[e.jsx(M,{className:"w-5 h-5 text-blue-500"}),e.jsxs("span",{className:"font-bold text-gray-800",children:[q,"s"]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-md",children:[e.jsx(_,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:h})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["Question ",a+1," of ",s.totalQuestions]}),e.jsxs("span",{children:[Math.round(re),"%"]})]}),e.jsx(Ge,{value:re,className:"h-3"})]})]}),ve&&f?e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsxs("div",{className:"bg-white border-4 border-red-300 rounded-2xl shadow-2xl p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500 text-white flex items-center justify-center text-2xl",children:"âœ–"}),e.jsx("h2",{className:"text-2xl font-bold text-red-600",children:"Let's Learn From This One"})]}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:"Question:"}),e.jsx("p",{className:"text-3xl font-bold mb-4",children:f.questionObj.question}),(()=>{let r=se(f.questionObj,f.correctAnswer).tts;return f.explanation&&(r+=`
`+f.explanation),e.jsx("div",{className:"mb-4",children:e.jsx(Ye,{text:r,style:"button",label:"ðŸ”Š Read the steps & explanation"})})})(),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-6 text-center",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-red-50 border-2 border-red-200",children:[e.jsx("p",{className:"text-sm font-medium text-red-600 mb-1",children:"Your Answer"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:f.userAnswer})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-green-50 border-2 border-green-200",children:[e.jsx("p",{className:"text-sm font-medium text-green-600 mb-1",children:"Correct Answer"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:f.correctAnswer})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-purple-50 border-2 border-purple-200",children:[e.jsx("p",{className:"text-sm font-medium text-purple-600 mb-1",children:"Question #"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:a+1})]})]}),(()=>{const t=se(f.questionObj,f.correctAnswer);return e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border-2 border-blue-200 p-6 rounded-xl mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2",children:"âœ¨ Let's solve it step by step"}),e.jsx("ol",{className:"list-decimal pl-5 space-y-1 text-gray-800",children:t.steps.map((r,p)=>e.jsx("li",{children:r},p))})]})})(),f.explanation&&e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-200 p-6 rounded-xl mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-2 flex items-center gap-2",children:"ðŸ§  Step-by-Step Explanation"}),e.jsx("p",{className:"whitespace-pre-line leading-relaxed text-gray-700",children:f.explanation})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(D,{onClick:Se,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:opacity-90 px-8 h-14 text-lg",children:"Continue"})})]})}):s&&s.questions.length>0&&e.jsx(Ke,{question:s.questions[a],onAnswer:Te,questionNumber:a+1})]})}export{ps as default};
